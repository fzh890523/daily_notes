<!DOCTYPE html>
<!-- saved from url=(0104)https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance -->
<html class="js noTouch" lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script async="" src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/jsll-3.3.1.js.下载"></script><script async="" src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/ms.js.下载"></script><script async="" src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/open-rating.entry.min.js.下载"></script><script async="" src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/open-commenting.entry.min.js.下载"></script><script async="" src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/Livefyre.js.下载"></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="Tuning data ingestion performance for Elasticsearch on Azure">
    <meta property="og:image" content="https://docs.microsoft.com/en-us/_themes/images/microsoft-header.png">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@docsmsft">
    <meta name="twitter:title" content="Tuning data ingestion performance for Elasticsearch on Azure">
    <meta name="twitter:description" content="How to maximize data ingestion performance with Elasticsearch on Azure.">
    <meta name="twitter:image" content="https://docs.microsoft.com/en-us/_themes/images/microsoft-header.png">    
    <meta name="twitter:image:alt" content="Microsoft Logo">
    
    <meta name="breadcrumb_path" content="/azure/bread/toc.json">
<meta name="tags" content="">
<meta name="ms.devlang" content="na">
<meta name="ms.tgt_pltfrm" content="na">
<meta name="ms.assetid" content="1fe28243-bb73-4d76-a534-0e312f866d77">
<meta name="author" content="dragon119">
<meta name="editor" content="">
<meta name="description" content="How to maximize data ingestion performance with Elasticsearch on Azure.">
<meta name="ms.author" content="masashin">
<meta name="manager" content="bennage">
<meta name="documentationcenter" content="na">
<meta name="ms.topic" content="article">
<meta name="services" content="">
<meta name="ms.service" content="guidance">
<meta name="ms.date" content="09/22/2016">
<meta name="ms.workload" content="na">
<meta name="search.ms_sitename" content="Docs">
<meta name="search.ms_docsetname" content="azure-documents">
<meta name="version" content="0">
<meta name="locale" content="en-us">
<meta name="site_name" content="Docs">
<meta name="search.ms_product" content="Azure">
<meta name="depot_name" content="Azure.azure-documents">
<meta name="updated_at" content="2016-11-14 06:02 PM">
<meta name="gitcommit" content="https://github.com/Microsoft/azure-docs-pr/blob/63cf1a5476a205da2f804fb2f408f4d35860835f/articles/guidance/guidance-elasticsearch-tuning-data-ingestion-performance.md">
<meta name="original_content_git_url" content="https://github.com/Microsoft/azure-docs-pr/blob/live/articles/guidance/guidance-elasticsearch-tuning-data-ingestion-performance.md">
<meta name="document_id" content="2639841f-8bea-03c2-f12a-81981a994032">
<meta name="pagetype" content="Conceptual">
<meta name="toc_rel" content="TOC.json">

    
    <meta name="scope" content="Azure">
    
    
      
    <meta name="brand" content="azure">
    
    <link href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance" rel="canonical">
    <title>Tuning data ingestion performance for Elasticsearch on Azure | Microsoft Docs</title>
    <link rel="stylesheet" href="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/e0ce3378843779296d07.conceptual.css">
    <script>
	var msDocs = {
		data:{},
		functions:{}
	};
	</script>


<script>
	msDocs.data.pathToTheme = '../_themes/';
</script>

<link rel="stylesheet" href="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/azureHeader.css">

<script>
function cdnfallback() {
	if (window.location.search.indexOf('cdn=disable') === -1) {
		window.location.href = '?cdn=disable';
	}
}
</script>

<!--[if lt IE 9]>
	<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.12.4.min.js"></script>
	<script src="../_themes/global/js/polyfills/all.js"></script>
	<script src="../_themes/global/js/azureHeader/respond_and_ie8Setup_combine.js"></script>
<![endif]-->
<!--[if gte IE 9]><!-->
	<script src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/jquery-2.2.4.min.js.下载"></script>
<!--<![endif]-->
<script>window.jQuery || document.write('<script src="../_themes/global/js/jquery/jquery-1.12.4.min.js"><\/script>')</script>

  <script src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/global.min.js.下载"></script>
<script src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/header.js.下载"></script>

<script src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/6607840572.js.下载"></script> 



  <script type="text/javascript" charset="utf-8" async="" src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/1.e0ce3378843779296d07.1.js.下载"></script><script type="text/javascript" charset="utf-8" async="" src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/4.e0ce3378843779296d07.4.js.下载"></script><script type="text/javascript" charset="utf-8" async="" src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/2.e0ce3378843779296d07.2.js.下载"></script><meta name="ms.EXP" content="undefined"><meta name="ms.SID" content="9F3D7DC4-C85F-4B29-B56D-BAE1D972ACF6"><meta name="ms.documentid" content="2639841f-8bea-03c2-f12a-81981a994032"><meta name="ms.contentlang" content="en-us"><meta name="ms.publishtime" content="2016-11-14 06:02 PM"><meta name="ms.giturl" content="https://github.com/Microsoft/azure-docs-pr/blob/live/articles/guidance/guidance-elasticsearch-tuning-data-ingestion-performance.md"><meta name="ms.sitename" content="Docs"><meta name="ms.gitcommit" content="https://github.com/Microsoft/azure-docs-pr/blob/63cf1a5476a205da2f804fb2f408f4d35860835f/articles/guidance/guidance-elasticsearch-tuning-data-ingestion-performance.md"><meta name="ms.depotname" content="Azure.azure-documents"><meta name="ms.opspagetype" content="Conceptual"><meta name="ms.locale" content="en-us"><meta name="ms.lang" content="en"><meta name="ms.loc" content="us"><meta name="ms.contentsource" content="OP"><meta name="ms.perf.timing" content=",,0,0,0,3,4,8,16,529,529,649,,,"><script type="text/javascript" charset="utf-8" async="" src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/3.e0ce3378843779296d07.3.js.下载"></script><script type="text/javascript" charset="utf-8" async="" src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/7.e0ce3378843779296d07.7.js.下载"></script><script src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/ai.0.js.下载"></script><style type="text/css">.or-o, .or-so {
    margin: 0;
    padding: 0;
    height: auto;
    width: auto;
    position: relative;
    float: none;
    border: none;
    border-radius: 0;
    outline: none;
    background: none;
    box-sizing: border-box;
    font: 13px 'Segoe UI', Frutiger, 'Frutiger Linotype', 'Dejavu Sans', 'Helvetica Neue', Arial, sans-serif;
    letter-spacing: normal;
    text-transform: none;
    border-spacing: 0;
    border-collapse: collapse;
    transform: none;
    transition: none;
    animation: none;
}
.or-o:before, .or-o:after, .or-so:before, .or-so:after {
    content: none;
}
.or-e-0 {
    transition: none !important;
}
.or-f {
    padding: 1px;
}
.or-f::-moz-focus-inner {
    border: none;
    padding: 0;
}
.or-lw {
    clear: both;
}
h1, h2 {}
h1.or-t, h2.or-t {
    font-weight: lighter;
}
h1.or-t {
    font-size: 40px;
}
h2.or-t {
    font-size: 30px;
}
h3.or-t {
    font-size: 20px;
}
h4.or-t {
    font-size: 17px;
}
.or-b {
    cursor: pointer;
}
.or-b>.or-c {
    display: inline-block;
    padding: 4px 25px;
    width: 100%;
    height: 100%;
}
.or-b:active {
    transform: scale(0.98, 0.95);
}
.or-b[disabled] {
    cursor: default;
}
.or-b[disabled]:active {
    transform: none;
}
.or-g {
    display: inline-block;
    line-height: 0;
}
.or-l {
    cursor: pointer;
    padding: 5px 1px;
    vertical-align: baseline;
}
.or-l>.or-c {
    text-decoration: underline;
}
.or-a {
    cursor: pointer;
}
.or-a>.or-c {
    display: inline-block;
    padding: 8px;
    width: 100%;
    height: 100%;
}
.or-v {
    cursor: pointer;
    padding-bottom: 2px;
    /* For IE :active propagation BUG Fix */
}
.or-v>span {
    display: inline-block;
}
.or-v>input[type=checkbox] {
    -moz-appearance: checkbox-container;
    width: 0;
    height: 0;
    opacity: 0;
}
.or-v>input[type=checkbox]+span, .or-v>input[type=checkbox]+span+span {
    position: absolute;
    width: 20px;
    height: 20px;
    overflow: hidden;
}
.or-v>input[type=checkbox]+span+span {
    opacity: 0;
}
.or-v>input[type=checkbox]:checked+span+span {
    opacity: 1;
}
.or-v>span:last-child {
    margin: 0 0 0 25px;
    line-height: 19px;
}
.or-v:after {
    content: '';
    display: inline-block;
    position: absolute;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    opacity: 0;
}
.or-pc[dir=rtl] .or-v>span:last-child {
    margin: 0 25px 0 0;
}
.or-x {
    resize: none;
    padding: 5px;
}
.or-c-mf {
    padding: 10px;
}
.or-c-mf.or-e-fi {
    transition: opacity 0.1s linear;
}
.or-c-mf.or-e-fo {
    transition: opacity 0.75s linear;
}
.or-c-pf {
    padding: 7px;
    max-height: 100%;
    overflow: auto;
}
.or-c-pf>.or-a {
    padding: 0;
    position: absolute;
    right: 0;
    top: 0;
    line-height: 0;
    width: 20px;
    height: 20px;
}
.or-c-pf>.or-a.or-f.or-k {
    outline: none;
}
.or-c-pf>.or-a>.or-c.or-g {
    padding: 0;
}
.or-c-pf>.or-a>.or-c.or-g>svg {
    stroke-width: 1px;
}
.or-c-pf.or-e-fi, .or-c-pf.or-e-fo {
    transition: opacity 0.1s linear;
}
.or-c-pf>.or-lw {
    overflow: hidden;
    padding: 3px;
}
.or-c-pf>.or-lw.or-e-h.or-e-w.or-e-fi {
    transition: height 0.167s cubic-bezier(0.1, 0.9, 0.2, 1.0),
                    width 0.167s cubic-bezier(0.1, 0.9, 0.2, 1.0),
                    opacity 0.1s linear 0.167s;
}
.or-pc[dir=rtl] .or-c-pf>.or-a {
    left: 0;
    right: initial;
}
.or-c-md {
    position: fixed;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    display: -ms-flexbox;
    display: flex;
    -ms-flex-direction: column;
        flex-direction: column;
    -ms-flex-align: center;
        align-items: center;
    -ms-flex-pack: center;
        justify-content: center;
}
.or-c-md>.or-c {
    overflow: auto;
}
.or-c-md>.or-c.or-e-fi.or-e-t {
    transition: opacity 0.167s linear, transform 0.367s cubic-bezier(0.1, 0.9, 0.2, 1.0);
}
.or-c-md>.or-c.or-e-fo.or-e-t {
    transition: opacity 0.1s linear, transform 0.1s linear;
}
.or-c-v h3.or-t {
    font-size: 13px;
    margin: 0 18px 5px 1px;
}
.or-c-v>table.or-lw {
    table-layout: fixed;
}
.or-c-v>table.or-lw td {
    width: 50%;
}
.or-c-v>table.or-lw td>.or-b {
    width: 100%;
}
.or-c-v>table.or-lw td:first-child {
    padding-right: 1px;
}
.or-c-v>table.or-lw td:last-child {
    padding-left: 1px;
}
.or-pc[dir=rtl] .or-c-v h3.or-t {
    margin: 0 1px 5px 18px;
}
.or-pc[dir=rtl] .or-c-v>table.or-lw td:first-child {
    border: none;
    border-left: 2px transparent solid;
}
.or-c-f {
    width: 235px;
    max-width: 100%;
}
.or-c-f h3.or-t {
    font-size: 13px;
    font-weight: bold;
}
.or-c-f .or-v, .or-c-f .or-x, .or-c-f>.or-b {
    display: block;
}
.or-c-f .or-v {
    margin: 3px 0 0 0;
}
.or-c-f .or-x {
    width: 100%;
    height: 75px;
}
.or-c-f>.or-lw {
    margin: 3px 0 0 0;
}
.or-c-f>.or-lw>.or-t {
    margin: 0 18px 0 0;
}
.or-c-f>.or-lw.or-e-h.or-e-w.or-e-fi {
    transition: height 0.167s cubic-bezier(0.1, 0.9, 0.2, 1.0),
                    width 0.167s cubic-bezier(0.1, 0.9, 0.2, 1.0),
                    opacity 0.167s linear;
}
.or-c-f>h3.or-t {
    margin: 7px 0 5px 1px;
}
.or-c-f>.or-b {
    float: right;
    margin: 4px -1px 0 0;
}
.or-pc[dir=rtl] .or-c-f {}
.or-pc[dir=rtl] .or-c-f>h3.or-t {
    margin: 7px 1px 5px 0;
}
.or-pc[dir=rtl] .or-c-f>.or-lw>.or-t {
    margin: 0 0 0 18px;
}
.or-pc[dir=rtl] .or-c-f>.or-b {
    float: left;
    margin: 4px 0 0 -1px;
}
.or-c-t h3.or-t {
    font-size: 13px;
}
.or-c-pf .or-c-t h3.or-t {
    margin: 3px 18px 0 0;
}
.or-pc[dir=rtl] .or-c-pf .or-c-t h3.or-t {
    margin: 3px 0 0 18px;
}
.or-c-mv svg {
    width: 12px;
    height: 12px;
    stroke-width: 1px;
}
.or-c-mv>.or-c {
    padding: 3px 20px 5px 17px;
}
.or-c-mv>.or-c>span {
    vertical-align: middle;
}
.or-c-mv>.or-c>.or-t {
    color: inherit;
    margin-left: 2px;
}
.or-c-mv.or-e-fi {
    transition: opacity 0.1s linear;
}
.or-pc[dir=rtl] .or-c-mv>.or-c {
    padding: 3px 17px 5px 20px;
}
.or-pc[dir=rtl] .or-c-mv>.or-c>.or-t {
    margin: 0 2px 0 0;
}
.or-t-ml .or-f {}
.or-t-ml .or-f.or-k {
    outline: 2px black solid;
}
.or-t-ml .or-t {
    color: black;
}
.or-t-ml .or-b {}
.or-t-ml .or-b, .or-t-ml .or-b:hover, .or-t-ml .or-b:active {
    background: none;
}
.or-t-ml .or-b>.or-c {
    color: white;
    stroke: white;
    fill: white;
    background: #0078d7;
    border: 2px transparent solid;
}
.or-t-ml .or-b:hover>.or-c {
    border-color: rgba(0, 0, 0, 0.4);
}
.or-t-ml .or-b:active>.or-c {
    color: black;
    stroke: black;
    fill: black;
    background: #999999;
    border-color: transparent;
}
.or-t-ml .or-b[disabled]>.or-c, .or-t-ml .or-b[disabled]:hover>.or-c {
    color: rgba(0, 0, 0, 0.4);
    stroke: rgba(0, 0, 0, 0.4);
    fill: rgba(0, 0, 0, 0.4);
    background: rgba(0, 0, 0, 0.2);
    border-color: transparent;
}
.or-t-ml .or-l {}
.or-t-ml .or-l, .or-t-ml .or-l:hover, .or-t-ml .or-l:active {
    background: none;
}
.or-t-ml .or-l>.or-c {
    color: #0078d7;
}
.or-t-ml .or-l:hover>.or-c {
    color: rgba(0, 0, 0, 0.6);
}
.or-t-ml .or-l:active>.or-c {
    color: rgba(0, 0, 0, 0.4);
}
.or-t-ml .or-a {}
.or-t-ml .or-a, .or-t-ml .or-a:hover, .or-t-ml .or-a:active {
    background: none;
}
.or-t-ml .or-a>.or-c {
    color: black;
    background: transparent;
}
.or-t-ml .or-a:hover>.or-c {
    background: rgba(0, 0, 0, 0.1);
}
.or-t-ml .or-a:active>.or-c {
    background: rgba(0, 0, 0, 0.2);
}
.or-t-ml .or-v {}
.or-t-ml .or-v>input[type=checkbox] {}
.or-t-ml .or-v>input[type=checkbox]+span {
    border: 2px solid rgba(0, 0, 0, 0.4);
    background: none;
}
.or-t-ml .or-v>input[type=checkbox]+span+span>svg {
    stroke: white;
    stroke-width: 1.5px;
    fill: transparent;
}
.or-t-ml .or-v:hover>input[type=checkbox]+span, .or-t-ml .or-v:hover>input[type=checkbox]:checked+span {
    border-color: black;
}
.or-t-ml .or-v:active>input[type=checkbox]+span, .or-t-ml .or-v>input[type=checkbox]:checked+span, .or-t-ml .or-v:active>input[type=checkbox]:checked+span {
    border-color: transparent;
}
.or-t-ml .or-v:active>input[type=checkbox]+span, .or-t-ml .or-v:active>input[type=checkbox]:checked+span {
    background: rgba(0, 0, 0, 0.6);
}
.or-t-ml .or-v>input[type=checkbox]:checked+span {
    background: #0078d7;
}
.or-t-ml .or-x {
    color: black;
    background: rgba(255, 255, 255, 0.4);
    border: 2px rgba(0, 0, 0, 0.4) solid;
}
.or-t-ml .or-x:hover {
    background: rgba(255, 255, 255, 0.6);
    border-color: #171717;
}
.or-t-ml .or-x:active, .or-t-ml .or-x:focus {
    color: black;
    background: white;
    border-color: #0078d7;
}
.or-t-ml .or-x:active::-webkit-input-placeholder, .or-t-ml .or-x:focus::-webkit-input-placeholder {
    color: rgba(0, 0, 0, 0.4);
}
.or-t-ml .or-x:active::-moz-placeholder, .or-t-ml .or-x:focus::-moz-placeholder {
    color: rgba(0, 0, 0, 0.4);
}
.or-t-ml .or-x:active:-ms-input-placeholder, .or-t-ml .or-x:focus:-ms-input-placeholder {
    color: rgba(0, 0, 0, 0.4);
}
.or-t-ml .or-x:active::placeholder, .or-t-ml .or-x:focus::placeholder {
    color: rgba(0, 0, 0, 0.4);
}
.or-t-ml .or-x::-webkit-input-placeholder {
    color: rgba(0, 0, 0, 0.6);
}
.or-t-ml .or-x::-moz-placeholder {
    color: rgba(0, 0, 0, 0.6);
}
.or-t-ml .or-x:-ms-input-placeholder {
    color: rgba(0, 0, 0, 0.6);
}
.or-t-ml .or-x::placeholder {
    color: rgba(0, 0, 0, 0.6);
}
.or-t-ml .or-c-pf, .or-t-ml .or-c-mf {
    border: 1px rgba(133, 133, 133, 0.4) solid;
    background: white;
}
.or-t-ml .or-c-pf {}
.or-t-ml .or-c-pf>.or-a {}
.or-t-ml .or-c-pf>.or-a.or-f.or-k:after {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    border: 2px black solid;
}
.or-t-ml .or-c-pf>.or-a>.or-c.or-g>svg {
    stroke: rgba(0, 0, 0, 0.6);
}
.or-t-ml .or-c-pf>.or-a:hover>.or-c.or-g>svg {
    stroke: #c80000;
}
.or-t-ml .or-c-pf>.or-a:active>.or-c.or-g>svg {
    stroke: #8c0000;
}
.or-t-ml .or-c-md {
    background: rgba(255, 255, 255, 0.6);
}
.or-t-ml .or-c-md>.or-c {
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.05);
}

@media screen and (-ms-high-contrast: active) {
    .or-t-ml .or-b, .or-t-md .or-b {}
    .or-t-ml .or-b>.or-c, .or-t-ml .or-b:active>.or-c, .or-t-md .or-b>.or-c, .or-t-md .or-b:active>.or-c {
        stroke: white;
        fill: white;
    }
    .or-t-ml .or-c-pf>.or-a>.or-c.or-g>svg, .or-t-md .or-c-pf>.or-a>.or-c.or-g>svg {
        stroke: white;
    }
}

@media screen and (-ms-high-contrast: black-on-white) {
    .or-t-ml .or-b, .or-t-md .or-b {}
    .or-t-ml .or-b>.or-c, .or-t-ml .or-b:active>.or-c, .or-t-md .or-b>.or-c, .or-t-md .or-b:active>.or-c {
        stroke: black;
        fill: black;
    }
    .or-t-ml .or-v>input[type=checkbox]+span+span>svg, .or-t-md .or-v>input[type=checkbox]+span+span>svg {
        stroke: black;
    }
    .or-t-ml .or-c-pf>.or-a>.or-c.or-g>svg, .or-t-md .or-c-pf>.or-a>.or-c.or-g>svg {
        stroke: black;
    }
}
</style><style type="text/css">[id='openFeedbackContainer']{ position: fixed; right: 10px; bottom: 10px; }
[id='openFeedbackContainer'][dir='rtl']{ left: 10px; right: initial; }</style><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="/_chrome/commenting/master/open-commenting.ui.v1.0.2-7-g1b78816.master.min.js" src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/open-commenting.ui.v1.0.2-7-g1b78816.master.min.js.下载"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="//cdn.livefyre.com/libs/fyre.conv/v3.0.0/livefyre.min.js" src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/livefyre.min.js.下载"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="//cdn.livefyre.com/libs/sidenotes/v1.5.6/sidenotes.min.js" src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/sidenotes.min.js.下载"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="//cdn.livefyre.com/libs/identity/v1.1.5/simple/javascripts/customprofiles.min.js" src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/customprofiles.min.js.下载"></script><link rel="stylesheet" type="text/css" href="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/livefyre_main.css" media="all"><script type="text/javascript" src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/livefyre_base.js.下载" async="" defer=""></script><script type="text/javascript" src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/livefyre_mod_main.js.下载" async="" defer=""></script><link rel="stylesheet" type="text/css" href="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/sp.css" media="all"><style type="text/css" id="fyre-brand-styles-v2">.fyre-lfep2,
.fyre-lfep2 input,
.fyre-lfep2 textarea {
    font-family: ;
}

.fyre-cp-form-btns .fyre-cp-form-back-btn,
.fyre-cp-form-btns .fyre-cp-form-submit-btn {
    background-color: #e86600;
}

.fyre-cp-link-create {
    color: #e86600;
}

p.fyre-profile-user-comments span,
p.fyre-profile-user-likes span {
    color: #e86600;
}

.fyre-profile-comment-footer a {
    color: #e86600;
}

a.fyre-profile-more-link {
    color: #e86600;
}

.fyre-cp-form .fyre-cp-edit-save-msg {
    color: #e86600
}</style><link rel="stylesheet" type="text/css" href="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/block.css" media="all"><script type="text/javascript" src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/livefyre_mod_editor_main.js.下载" async="" defer=""></script></head>
  <body mycollectionplug="bind">

<div class="az_h default">

    <header data-tag-area="header" data-tag-group="header"> <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" class="skip-nav" title="Skip Navigation">Skip Navigation</a> <div class="row column"> <a href="https://azure.microsoft.com/en-us/" class="logo" title="Microsoft Azure"> <svg x="0px" y="0px" width="165px" height="20px" viewBox="0 0 165 20"> <path fill="#29A5DE" d="M18,19H16V7.1C16,6.2,16,5,16.1,3.7h0c-0.2,0.8-0.4,1.4-0.5,1.7L9.5,19h-1l-6-13.5c-0.2-0.4-0.3-1-0.5-1.8
                    h0C2,4.4,2,5.5,2,7.1V19H0V1.3h2.7l5.4,12.3c0.4,0.9,0.7,1.7,0.8,2.1H9c0.4-1,0.6-1.7,0.9-2.2l5.5-12.3H18V19z"></path> <path fill="#29A5DE" d="M22.8,3.1c-0.4,0-0.7-0.1-0.9-0.4s-0.4-0.6-0.4-0.9s0.1-0.7,0.4-0.9c0.3-0.3,0.6-0.4,0.9-0.4
                    c0.4,0,0.7,0.1,0.9,0.4c0.3,0.3,0.4,0.6,0.4,0.9c0,0.4-0.1,0.7-0.4,0.9C23.5,3,23.2,3.1,22.8,3.1z M23.8,19h-2V6.3h2V19z"></path> <path fill="#29A5DE" d="M35.8,18.4c-1,0.6-2.1,0.9-3.5,0.9c-1.8,0-3.3-0.6-4.4-1.8c-1.1-1.2-1.7-2.7-1.7-4.6c0-2.1,0.6-3.7,1.8-5
                    C29.4,6.7,30.9,6,32.9,6C34,6,35,6.2,35.9,6.7v2.1c-0.9-0.7-1.9-1-3-1c-1.3,0-2.3,0.5-3.2,1.4c-0.8,0.9-1.2,2.1-1.2,3.6
                    c0,1.5,0.4,2.6,1.2,3.5c0.8,0.9,1.8,1.3,3.1,1.3c1.1,0,2.1-0.4,3.1-1.1V18.4z"></path> <path fill="#29A5DE" d="M44.9,8.4C44.5,8.1,44,8,43.3,8c-0.9,0-1.6,0.4-2.2,1.2c-0.6,0.8-0.9,1.9-0.9,3.3V19h-2V6.3h2v2.6h0
                    c0.3-0.9,0.7-1.6,1.3-2.1c0.6-0.5,1.3-0.7,2-0.7c0.5,0,0.9,0.1,1.2,0.2V8.4z"></path> <path fill="#29A5DE" d="M51.4,19.3c-1.9,0-3.4-0.6-4.5-1.8c-1.1-1.2-1.7-2.7-1.7-4.7c0-2.1,0.6-3.8,1.7-5S49.7,6,51.7,6
                    c1.9,0,3.4,0.6,4.4,1.7c1.1,1.2,1.6,2.8,1.6,4.8c0,2-0.6,3.6-1.7,4.8C54.8,18.6,53.3,19.3,51.4,19.3z M51.5,7.7
                    c-1.3,0-2.3,0.4-3.1,1.3c-0.8,0.9-1.1,2.1-1.1,3.7c0,1.5,0.4,2.7,1.1,3.5c0.8,0.9,1.8,1.3,3.1,1.3c1.3,0,2.3-0.4,3-1.3
                    c0.7-0.8,1.1-2,1.1-3.6c0-1.6-0.4-2.8-1.1-3.6C53.8,8.2,52.8,7.7,51.5,7.7z"></path> <path fill="#29A5DE" d="M59.5,18.5v-2.2c1.1,0.8,2.3,1.2,3.6,1.2c1.8,0,2.7-0.6,2.7-1.8c0-0.3-0.1-0.6-0.2-0.9
                    c-0.2-0.2-0.4-0.4-0.6-0.6c-0.3-0.2-0.6-0.3-0.9-0.5c-0.3-0.1-0.7-0.3-1.1-0.4c-0.6-0.2-1-0.4-1.5-0.7c-0.4-0.2-0.8-0.5-1.1-0.8
                    c-0.3-0.3-0.5-0.6-0.6-1c-0.1-0.4-0.2-0.8-0.2-1.3c0-0.6,0.1-1.1,0.4-1.6C60.2,7.7,60.5,7.3,61,7c0.5-0.3,1-0.5,1.5-0.7
                    C63.1,6.1,63.7,6,64.3,6c1.1,0,2.1,0.2,2.9,0.6v2c-0.9-0.6-2-0.9-3.2-0.9c-0.4,0-0.7,0-1,0.1c-0.3,0.1-0.6,0.2-0.8,0.4
                    c-0.2,0.2-0.4,0.3-0.5,0.6c-0.1,0.2-0.2,0.5-0.2,0.7c0,0.3,0.1,0.6,0.2,0.8c0.1,0.2,0.3,0.4,0.5,0.6c0.2,0.2,0.5,0.3,0.8,0.5
                    c0.3,0.1,0.7,0.3,1.1,0.5c0.6,0.2,1.1,0.4,1.5,0.7c0.4,0.2,0.8,0.5,1.1,0.8c0.3,0.3,0.6,0.6,0.7,1c0.2,0.4,0.3,0.8,0.3,1.3
                    c0,0.6-0.1,1.2-0.4,1.6c-0.3,0.5-0.6,0.8-1.1,1.1c-0.5,0.3-1,0.5-1.6,0.7c-0.6,0.1-1.2,0.2-1.9,0.2C61.6,19.3,60.4,19,59.5,18.5z"></path> <path fill="#29A5DE" d="M75.6,19.3c-1.9,0-3.4-0.6-4.5-1.8c-1.1-1.2-1.7-2.7-1.7-4.7c0-2.1,0.6-3.8,1.7-5C72.4,6.6,73.9,6,75.9,6
                    c1.9,0,3.4,0.6,4.4,1.7c1.1,1.2,1.6,2.8,1.6,4.8c0,2-0.6,3.6-1.7,4.8C79,18.6,77.5,19.3,75.6,19.3z M75.7,7.7
                    c-1.3,0-2.3,0.4-3.1,1.3c-0.8,0.9-1.1,2.1-1.1,3.7c0,1.5,0.4,2.7,1.1,3.5c0.8,0.9,1.8,1.3,3.1,1.3c1.3,0,2.3-0.4,3-1.3
                    c0.7-0.8,1.1-2,1.1-3.6c0-1.6-0.4-2.8-1.1-3.6C78.1,8.2,77,7.7,75.7,7.7z"></path> <path fill="#29A5DE" d="M97.6,8.1V6.3h-3.2V2.6l-2,0.7v3.1h-2.6h-1.5h-1.4V4.4c0-1.8,0.7-2.7,2.1-2.7c0.5,0,0.9,0.1,1.3,0.3V0.2
                    C89.9,0.1,89.4,0,88.8,0c-1.1,0-2.1,0.4-2.9,1.2c-0.8,0.8-1.1,1.8-1.1,3.1v2h-2.2v1.7h2.2V19h2V8.1h1.4h1.5h2.6v7.5
                    c0,2.5,1.1,3.7,3.3,3.7c0.8,0,1.4-0.1,1.9-0.4v-1.7c-0.4,0.3-0.8,0.4-1.3,0.4c-0.7,0-1.1-0.2-1.4-0.5c-0.3-0.4-0.4-1-0.4-1.8V8.1
                    H97.6z"></path> <path fill="#29A5DE" d="M119.9,19h-2.3l-1.9-5h-7.5l-1.8,5h-2.3L111,1.3h2.1L119.9,19z M115.1,12.1l-2.8-7.5
                    c-0.1-0.2-0.2-0.6-0.3-1.2h0c-0.1,0.5-0.2,0.9-0.3,1.2l-2.7,7.5H115.1z"></path> <path fill="#29A5DE" d="M130.4,6.9l-7.5,10.3h7.4V19H120v-0.6l7.5-10.3h-6.8V6.3h9.7V6.9z"></path> <path fill="#29A5DE" d="M142.6,19h-2v-2h0c-0.8,1.5-2.1,2.3-3.9,2.3c-3,0-4.5-1.8-4.5-5.4V6.3h2v7.2c0,2.7,1,4,3.1,4
                    c1,0,1.8-0.4,2.4-1.1c0.6-0.7,1-1.7,1-2.9V6.3h2V19z"></path> <path fill="#29A5DE" d="M152.6,8.4c-0.4-0.3-0.9-0.4-1.5-0.4c-0.9,0-1.6,0.4-2.2,1.2c-0.6,0.8-0.9,1.9-0.9,3.3V19h-2V6.3h2v2.6h0
                    c0.3-0.9,0.7-1.6,1.3-2.1c0.6-0.5,1.3-0.7,2-0.7c0.5,0,0.9,0.1,1.2,0.2V8.4z"></path> <path fill="#29A5DE" d="M164,13.1h-8.9c0,1.4,0.4,2.5,1.1,3.3c0.7,0.8,1.7,1.1,3,1.1c1.4,0,2.7-0.5,3.9-1.4V18
                    c-1.1,0.8-2.6,1.2-4.4,1.2c-1.8,0-3.2-0.6-4.2-1.7c-1-1.1-1.5-2.8-1.5-4.8c0-2,0.6-3.6,1.7-4.8c1.1-1.2,2.5-1.9,4.1-1.9
                    s2.9,0.5,3.8,1.6s1.4,2.6,1.4,4.4V13.1z M161.9,11.4c0-1.2-0.3-2.1-0.8-2.7c-0.6-0.6-1.3-1-2.3-1c-1,0-1.8,0.3-2.4,1
                    c-0.7,0.7-1.1,1.6-1.2,2.7H161.9z"></path> </svg> </a> <div class="large-free-trial"> <a data-event="global-clicked-primarycta" class="button button-primary" id="A1" href="https://azure.microsoft.com/en-us/free/" title="Free account">Free account</a> </div> <div class="relative-container"> <ul class="menu-tools" id="old-search"> <li class="sales"> <a href="https://azure.microsoft.com/en-us/overview/sales-number/" data-event="global-clicked-saleslink" title="Sales"> Sales <span data-control="geophone">1-800-867-1389</span> </a> <span class="slider-sales-tooltip"> <span> <p>Questions about Azure? Contact our sales team.</p> <p><span data-control="geocountry" style="text-transform: capitalize;">United States</span>: <span data-control="geophone">1-800-867-1389</span><br> <span data-control="united-states-sales-phone">United States: 1-800-867-1389</span></p> <a href="https://azure.microsoft.com/en-us/overview/sales-number/" class="wa-arrowLink wa-arrowLink-blue">Find a local number or submit query form</a> </span> </span> </li> <li><a href="https://azure.microsoft.com/en-us/account/" data-event="global-clicked-myaccountlink" title="My Account">My Account</a></li> <li><a href="https://portal.azure.com/" data-event="global-clicked-portallink" title="Portal">Portal</a></li> <li class="search az_hUpdated"> <div class="wa-text-light wa-textSearch" data-control="textbox"> <input class="text-input" id="MainSearchBox" placeholder="Search" onkeypress="return checkForEnterKey(event, &#39;MainSearchBox&#39;);"> <button type="button" id="header-search-button" class="search-button" title="Search" onclick="doSearch(&#39;MainSearchBox&#39;); return false;"></button> </div> </li> </ul> </div> <ul class="menu-tools" id="modern-search"> <li class="search az_hUpdated"> <div class="wa-text wa-text-light wa-textSearch" data-control="textbox"> <input class="text-input" id="ModernMainSearchBox" placeholder="Search" onkeypress="return checkForEnterKey(event, &#39;ModernMainSearchBox&#39;);"> <button type="button" id="header-search-button" class="search-button" title="Search" onclick="doSearch(&#39;ModernMainSearchBox&#39;); return false;"></button> <button type="button" id="header-search-button-expand" class="search-button" title="Search" onclick="expandSearch(&#39;ModernMainSearchBox&#39;)"></button> </div> </li> <li class="sales"> <a href="https://azure.microsoft.com/en-us/overview/sales-number/" title="Sales"> Sales <span data-control="geophone">1-800-867-1389</span> </a> <span class="slider-sales-tooltip"> <span> <p>Questions about Azure? Contact our sales team.</p> <p><span data-control="geocountry" style="text-transform: capitalize;">United States</span>: <span data-control="geophone">1-800-867-1389</span><br> <span data-control="united-states-sales-phone">United States: 1-800-867-1389</span></p> <a href="https://azure.microsoft.com/en-us/overview/sales-number/" class="wa-arrowLink wa-arrowLink-blue">Find a local number or submit query form</a> </span> </span> </li> <li><a href="https://azure.microsoft.com/en-us/account/" title="My Account">My Account</a></li> <li><a href="https://portal.azure.com/" title="Portal">Portal</a></li> </ul> <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" class="small-hamburger"> <span class="icon-hamburger"></span> </a> <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" class="small-search"> <span class="icon icon-search"><svg style="display:none; visibility:hidden;"><defs><symbol id="magnifying-glass" viewBox="0 0 16 16"> <path fill="#FFFFFF" d="M1.8,16c-0.5,0-0.9-0.2-1.2-0.5C0.2,15.2,0,14.7,0,14.3c0-0.5,0.2-0.9,0.5-1.2l4.2-4.2C4,7.5,3.8,6,4.2,4.6 C4.8,1.9,7.2,0,10,0c0.5,0,1,0.1,1.4,0.2c1.6,0.4,2.9,1.4,3.7,2.7s1,3,0.7,4.6c-0.6,2.7-3,4.6-5.8,4.6c-0.5,0-1-0.1-1.4-0.2 c-0.5-0.2-1-0.3-1.4-0.6L3,15.4C2.6,15.8,2.2,16,1.8,16 M10,2.2c-1.8,0-3.2,1.2-3.6,2.9c-0.2,1-0.1,2.1,0.6,3c0.2,0.4,0.6,0.7,1,1 c0.4,0.2,0.8,0.5,1.2,0.6C9.5,9.7,9.7,9.7,10,9.7c1.8,0,3.2-1.2,3.6-2.9c0.2-1,0.1-2-0.4-2.8c-0.6-0.8-1.4-1.4-2.3-1.6 C10.6,2.3,10.3,2.2,10,2.2"></path> </symbol> </defs></svg><svg><use xlink:href="#magnifying-glass"></use></svg></span> </a> <ul class="menu"> <li> <a data-event="global-clicked-topnav" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" title="Why Azure">Why Azure</a> <div> <ul class="menu-drop menu-drop-why-azure"> <li> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/overview/what-is-azure/" title="What is Azure" class="label">What is Azure</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/overview/what-is-azure/" title="What is Azure" class="sub">Learn the basics about Microsoft's cloud platform</a> </li> <li> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/support/trust-center/" title="Cloud you can trust" class="label">Cloud you can trust</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/support/trust-center/" title="Cloud you can trust" class="sub">Learn about security, privacy, transparency, and disaster recovery</a> </li> <li> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/support/trust-center/compliance/" title="Compliance and certifications" class="label">Compliance and certifications</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/support/trust-center/compliance/" title="Compliance and certifications" class="sub">Learn about independently verified compliance certifications</a> </li> <li> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/case-studies/" title="Case studies" class="label">Case studies</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/case-studies/" title="Case studies" class="sub">People are doing amazing things with Azure, hear their stories</a> </li> <li> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/overview/azure-vs-aws/" title="Azure vs. AWS" class="label">Azure vs. AWS</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/overview/azure-vs-aws/" title="Azure vs. AWS" class="sub">Which public cloud is right for you?</a> </li> <li> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/overview/business-apps-on-azure/" title="Azure for your business applications" class="label">Azure for your business applications</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/overview/business-apps-on-azure/" title="Azure for your business applications" class="sub">Learn about the benefits of running your business apps on Microsoft’s cloud platform</a> </li> <li> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/overview/webinars/" title="Webinars" class="label">Webinars</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/overview/webinars/" title="Webinars" class="sub">Watch live online presentations about the latest features</a> </li> <li> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/get-started/" title="Get started" class="label">Get started</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/get-started/" title="Get started" class="sub">Learn how to get started quickly with Azure</a> </li> </ul> <div class="free-trial free-trial-why-azure"> <div> <span class="icon icon-size13"><svg style="display:none; visibility:hidden;"><defs><symbol id="azure" viewBox="-1 -1 34 34"> <path d="M19,17.4c-0.8,0-1.5,0.5-1.9,1.2H5.3v0c-2,0-3.6-1.6-3.6-3.6s1.6-3.6,3.6-3.6v0h0h0H7 c0.1-0.4,0.2-0.8,0.4-1.2C7.4,10,7.5,9.8,7.5,9.7c0.8-1.5,2.4-2.4,4.2-2.4c1.6,0,3,0.8,3.9,2c0.5-0.2,1-0.4,1.6-0.5 c-1.1-1.8-3.2-3.1-5.5-3.1c-2.7,0-5,1.7-6,4.1c0,0,0,0,0,0l0,0c0,0,0,0,0,0H5.3C2.4,9.7,0,12.1,0,15c0,2.9,2.4,5.3,5.3,5.3h11.9 c0.3,0.7,1,1.2,1.9,1.2c1.1,0,2-0.9,2-2C21.1,18.3,20.2,17.4,19,17.4z"></path> <path d="M25.6,13.4C24.4,11,21.9,9.3,19,9.3c-3.5,0-6.4,2.4-7.1,5.7c-1.7,0.2-3.2,1.1-4.1,2.4h8.7 c0.6-0.7,1.5-1.2,2.5-1.2c1.8,0,3.2,1.5,3.2,3.2c0,1.8-1.5,3.2-3.2,3.2c-1,0-1.9-0.5-2.5-1.2H6.9c0.4,2.8,2.8,4.9,5.6,4.9 c0,0,0,0,0,0v0h13v0c0,0,0,0,0,0c3.6,0,6.5-2.9,6.5-6.5C32,16.3,29.1,13.4,25.6,13.4z"></path> </symbol> </defs></svg><svg><use xlink:href="#azure"></use></svg></span> <p>Sign up for free and get <span class="price-data " data-amount="{&quot;currencies&quot;:{&quot;USD&quot;:200.0,&quot;ARS&quot;:2800.0,&quot;AUD&quot;:260.0,&quot;BRL&quot;:750.0,&quot;CAD&quot;:250.0,&quot;CHF&quot;:190.0,&quot;DKK&quot;:1300.0,&quot;EUR&quot;:170.0,&quot;GBP&quot;:125.0,&quot;HKD&quot;:1600.0,&quot;IDR&quot;:2940000.0,&quot;INR&quot;:12100.0,&quot;JPY&quot;:20500.0,&quot;KRW&quot;:240000.0,&quot;MXN&quot;:3600.0,&quot;MYR&quot;:900.0,&quot;NOK&quot;:1650.0,&quot;NZD&quot;:300.0,&quot;RUB&quot;:12500.0,&quot;SAR&quot;:750.0,&quot;SEK&quot;:1600.0,&quot;TRY&quot;:610.0,&quot;TWD&quot;:6300.0,&quot;ZAR&quot;:3450.0}}" data-decimals="0">$200</span> to spend on all Azure services</p> <a href="https://azure.microsoft.com/en-us/free/" title="Learn more" class="wa-arrowLink wa-arrowLink-light" data-event="global-clicked-menumessage" data-event-property="Why Azure">Learn more</a> </div> </div> </div> </li> <li><a data-event="global-clicked-topnav" href="https://azure.microsoft.com/en-us/solutions/" title="Solutions">Solutions</a></li> <li> <a data-event="global-clicked-topnav" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" title="Products">Products</a> <div> <ul class="menu-drop menu-drop-features"> <li> <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" title="Compute">Compute</a> <ul class="menu-pop" id="Compute-category"> <li class="title">Compute</li> <li data-product-slug="virtual-machines"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/virtual-machines/" title="Virtual Machines" class="label">Virtual Machines</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/virtual-machines/" title="Virtual Machines" class="sub">Provision Windows and Linux virtual machines in minutes</a> </li> <li data-product-slug="virtual-machine-scale-sets"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/virtual-machine-scale-sets/" title="Virtual Machine Scale Sets" class="label">Virtual Machine Scale Sets</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/virtual-machine-scale-sets/" title="Virtual Machine Scale Sets" class="sub">Manage and scale 10s to 1000s of Linux and Windows VMs</a> </li> <li data-product-slug="app-service"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/app-service/" title="App Service" class="label">App Service</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/app-service/" title="App Service" class="sub">Create web and mobile apps for any platform and any device</a> </li> <li data-product-slug="container-service"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/container-service/" title="Azure Container Service" class="label">Azure Container Service</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/container-service/" title="Azure Container Service" class="sub">Use Docker based tools to deploy and manage containers</a> </li> <li data-product-slug="container-registry"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/container-registry/" title="Azure Container Registry" class="label">Azure Container Registry</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/container-registry/" title="Azure Container Registry" class="sub">Store images for container deployments—Docker Swarm, DC/OS, and more</a> </li> <li data-product-slug="functions"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/functions/" title="Functions" class="label">Functions</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/functions/" title="Functions" class="sub">Process events with serverless code</a> </li> <li data-product-slug="batch"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/batch/" title="Batch" class="label">Batch</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/batch/" title="Batch" class="sub">Run large-scale parallel and batch compute jobs</a> </li> <li data-product-slug="service-fabric"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/service-fabric/" title="Service Fabric" class="label">Service Fabric</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/service-fabric/" title="Service Fabric" class="sub">Build and operate always-on, scalable, distributed applications</a> </li> <li data-product-slug="cloud-services"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/cloud-services/" title="Cloud Services" class="label">Cloud Services</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/cloud-services/" title="Cloud Services" class="sub">Create highly available, infinitely scalable cloud applications and APIs</a> </li> </ul> <div class="free-trial"> <div> <p>Get credits that enable:</p> <p>4 Windows or Linux Virtual Machines</p> <p>24 x 7 for a month</p> <p>And much more...</p> <a href="https://azure.microsoft.com/en-us/free/" title="Learn more" class="wa-arrowLink wa-arrowLink-light" data-event="global-clicked-menumessage" data-event-property="Products (Compute)">Learn more</a> <span class="icon icon-size17"><svg style="display:none; visibility:hidden;"><defs><symbol id="virtual-machines" viewBox="0 0 51 47"> <path fill="#7A7A7A" d="M32.9,36.9h-1.2H19.9h-0.6c1.6,5.7-0.6,6.6-10.2,6.6v3h12.2h8.9h11.5v-3 C32.2,43.5,31.3,42.7,32.9,36.9z"></path> <path fill="#3E3E3E" d="M47.5,0.5H3.2c-1.5,0-2.7,1.3-2.7,2.8v30.8c0,1.5,1.2,2.8,2.7,2.8h44.3c1.5,0,3-1.3,3-2.8V3.3 C50.5,1.8,49,0.5,47.5,0.5z M46.7,4.3v28.7H4.3V4.3l42.4-0.1L46.7,4.3z"></path> <polygon fill="#00BBF1" points="46.6,4.3 46.6,33.1 4.3,33.1 4.3,4.3 46.7,4.3"></polygon> <path fill="#7A7A7A" d="M4.3,33.1L4.3,33.1L4.3,4.3L43,4.3l4.5-3.8c0,0,0,0,0,0H3.2c-1.5,0-2.7,1.3-2.7,2.8v30.8 c0,1.5,1.2,2.8,2.7,2.8h1.1l4.6-3.8H4.3z"></path> <polygon fill="#59B4D9" points="4.3,33.1 4.3,33.1 4.3,4.3 43,4.3 43,4.3 4.3,4.3"></polygon> <rect x="9.2" y="43.5" fill="#B0B0B0" width="32.7" height="3"></rect> <circle fill="#BAC84A" cx="25.3" cy="2.6" r="0.7"></circle> <path opacity="0.9" fill="#FFFFFF" d="M25.5,18.2c0,0-0.1,0-0.1,0l-8.8-5.1c-0.1,0-0.1-0.1-0.1-0.2c0-0.1,0.1-0.2,0.1-0.2l8.7-5 c0.1,0,0.2,0,0.3,0l8.8,5.1c0.1,0,0.1,0.1,0.1,0.2c0,0.1,0,0.2-0.1,0.2l-8.7,5C25.6,18.2,25.5,18.2,25.5,18.2z"></path> <g opacity="0.8"> <path fill="#FFFFFF" d="M24.2,30.5c0,0-0.1,0-0.1,0l-8.8-5c-0.1,0-0.1-0.1-0.1-0.2V15.1c0-0.1,0-0.2,0.1-0.2 c0.1,0,0.2,0,0.3,0l8.8,5c0.1,0,0.1,0.1,0.1,0.2v10.1c0,0.1-0.1,0.2-0.1,0.2C24.3,30.5,24.3,30.5,24.2,30.5z"></path> </g> <path opacity="0.5" fill="#FFFFFF" d="M26.7,30.5c0,0-0.1,0-0.1,0c-0.1,0-0.1-0.1-0.1-0.2V20.2c0-0.1,0.1-0.2,0.1-0.2l8.8-5 c0.1,0,0.2,0,0.3,0c0.1,0,0.1,0.1,0.1,0.2v10.1c0,0.1-0.1,0.2-0.1,0.2l-8.8,5C26.8,30.5,26.7,30.5,26.7,30.5z"></path> </symbol> </defs></svg><svg><use xlink:href="#virtual-machines"></use></svg></span> </div> </div> </li> <li> <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" title="Networking">Networking</a> <ul class="menu-pop" id="Networking-category"> <li class="title">Networking</li> <li data-product-slug="virtual-network"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/virtual-network/" title="Virtual Network" class="label">Virtual Network</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/virtual-network/" title="Virtual Network" class="sub">Provision private networks, optionally connect to on-premises datacenters</a> </li> <li data-product-slug="load-balancer"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/load-balancer/" title="Load Balancer" class="label">Load Balancer</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/load-balancer/" title="Load Balancer" class="sub">Deliver high availability and network performance to your applications</a> </li> <li data-product-slug="application-gateway"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/application-gateway/" title="Application Gateway" class="label">Application Gateway</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/application-gateway/" title="Application Gateway" class="sub">Layer 7 Load Balancer with built-in HTTP load balancing and delivery control</a> </li> <li data-product-slug="vpn-gateway"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/vpn-gateway/" title="VPN Gateway" class="label">VPN Gateway</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/vpn-gateway/" title="VPN Gateway" class="sub">Establish secure, cross-premises connectivity</a> </li> <li data-product-slug="dns"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/dns/" title="Azure DNS" class="label">Azure DNS</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/dns/" title="Azure DNS" class="sub">Host your DNS domain in Azure</a> </li> <li data-product-slug="cdn"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/cdn/" title="CDN" class="label">CDN</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/cdn/" title="CDN" class="sub">Deliver content to end-users through a robust network of global data centers</a> </li> <li data-product-slug="traffic-manager"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/traffic-manager/" title="Traffic Manager" class="label">Traffic Manager</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/traffic-manager/" title="Traffic Manager" class="sub">Route incoming traffic for high performance and availability</a> </li> <li data-product-slug="expressroute"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/expressroute/" title="ExpressRoute" class="label">ExpressRoute</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/expressroute/" title="ExpressRoute" class="sub">Dedicated private network fiber connections to Azure</a> </li> </ul> <div class="free-trial"> <div> <p>Connect Virtual Machines with Virtual Network for free.</p> <a href="https://azure.microsoft.com/en-us/free/" title="Learn more" class="wa-arrowLink wa-arrowLink-light" data-event="global-clicked-menumessage" data-event-property="Products (Networking)">Learn more</a> <span class="icon icon-size17"><svg style="display:none; visibility:hidden;"><defs><symbol id="virtual-network" viewBox="0 0 50 50"> <path fill="#3999C6" d="M49.7,25.7c0.5-0.5,0.4-1.3,0-1.8l-2.4-2.4L36.5,11c-0.5-0.5-1.2-0.5-1.7,0l0,0c-0.5,0.5-0.6,1.3,0,1.8 l11.3,11.1c0.5,0.5,0.5,1.3,0,1.8L34.6,37.2c-0.5,0.5-0.5,1.3,0,1.8l0,0c0.5,0.5,1.3,0.4,1.7,0l10.7-10.6c0,0,0,0,0.1-0.1L49.7,25.7 z"></path> <path fill="#3999C6" d="M0.3,25.7c-0.5-0.5-0.4-1.3,0-1.8l2.4-2.4L13.5,11c0.5-0.5,1.2-0.5,1.7,0l0,0c0.5,0.5,0.6,1.3,0,1.8 L4.1,23.9c-0.5,0.5-0.5,1.3,0,1.8l11.3,11.5c0.5,0.5,0.5,1.3,0,1.8l0,0c-0.5,0.5-1.3,0.4-1.7,0L2.8,28.5c0,0,0,0-0.1-0.1L0.3,25.7z"></path> <path fill="#7FBA00" d="M18.2,24.8c0,1.9-1.6,3.3-3.3,3.3s-3.5-1.6-3.5-3.3s1.4-3.3,3.5-3.3C16.9,21.5,18.2,23.1,18.2,24.8z"></path> <path fill="#7FBA00" d="M28.3,24.8c0,1.9-1.6,3.3-3.3,3.3s-3.5-1.6-3.5-3.3s1.6-3.3,3.5-3.3S28.3,23.1,28.3,24.8z"></path> <circle fill="#7FBA00" cx="35.2" cy="24.8" r="3.3"></circle> </symbol> </defs></svg><svg><use xlink:href="#virtual-network"></use></svg></span> </div> </div> </li> <li> <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" title="Storage">Storage</a> <ul class="menu-pop" id="Storage-category"> <li class="title">Storage</li> <li data-product-slug="storage"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/storage/" title="Storage" class="label">Storage</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/storage/" title="Storage" class="sub">Durable, highly available, and massively scalable cloud storage</a> </li> <li class="indent" data-product-slug="blob-storage"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/storage/blobs/" title="Blob Storage" class="label">Blob Storage</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/storage/blobs/" title="Blob Storage" class="sub">REST-based object storage for unstructured data</a> </li> <li class="indent" data-product-slug="storage\queues"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/storage/queues/" title="Queue Storage" class="label">Queue Storage</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/storage/queues/" title="Queue Storage" class="sub">Effectively scale apps according to traffic</a> </li> <li class="indent" data-product-slug="storage\files"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/storage/files/" title="File Storage" class="label">File Storage</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/storage/files/" title="File Storage" class="sub">File shares that use the standard SMB 3.0 protocol</a> </li> <li class="indent" data-product-slug="premium-storage"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/storage/disks/" title="Disk Storage" class="label">Disk Storage</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/storage/disks/" title="Disk Storage" class="sub">Persistent, secured disk options supporting virtual machines</a> </li> <li data-product-slug="data-lake-store"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/data-lake-store/" title="Data Lake Store" class="label">Data Lake Store</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/data-lake-store/" title="Data Lake Store" class="sub">Hyperscale repository for big data analytics workloads</a> </li> <li data-product-slug="storsimple"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/storsimple/" title="StorSimple" class="label">StorSimple</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/storsimple/" title="StorSimple" class="sub">Hybrid cloud storage for enterprises, reduces costs and improves data security</a> </li> <li data-product-slug="backup"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/backup/" title="Backup" class="label">Backup</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/backup/" title="Backup" class="sub">Simple and reliable server backup to the cloud</a> </li> <li data-product-slug="site-recovery"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/site-recovery/" title="Site Recovery" class="label">Site Recovery</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/site-recovery/" title="Site Recovery" class="sub">Orchestrate protection and recovery of private clouds</a> </li> </ul> <div class="free-trial"> <div> <p>Get credits that enable:</p> <p>8 standard SQL Databases</p> <p>Hadoop instance for a week</p> <p>And much more...</p> <a href="https://azure.microsoft.com/en-us/free/" title="Learn more" class="wa-arrowLink wa-arrowLink-light" data-event="global-clicked-menumessage" data-event-property="Products (Data &amp; Storage)">Learn more</a> <span class="icon icon-size17"><svg style="display:none; visibility:hidden;"><defs><symbol id="storage" viewBox="0 0 50 50"> <path fill="#A0A1A2" d="M0,44.4c0,1,0.7,1.9,1.9,1.9h46.2c1,0,1.9-0.7,1.9-1.9V11.3H0V44.4z"></path> <path fill="#7A7A7A" d="M48.1,3.7H1.9C0.7,3.7,0,4.6,0,5.6v5.7h50V5.6C50,4.6,49.3,3.7,48.1,3.7"></path> <rect x="18.8" y="14.6" fill="#FFFFFF" width="12.6" height="7.6"></rect> <rect x="18.8" y="24.9" fill="#FCD116" width="12.6" height="7.6"></rect> <rect x="33.8" y="24.9" fill="#FCD116" width="12.6" height="7.6"></rect> <rect x="33.8" y="14.6" fill="#FFFFFF" width="12.6" height="7.6"></rect> <rect x="3.8" y="14.6" fill="#FFFFFF" width="12.6" height="7.6"></rect> <rect x="3.8" y="24.9" fill="#FFFFFF" width="12.6" height="7.6"></rect> <rect x="3.8" y="35.1" fill="#FCD116" width="12.6" height="7.6"></rect> <rect x="18.8" y="35.1" fill="#FCD116" width="12.6" height="7.6"></rect> <rect x="33.8" y="35.1" fill="#FCD116" width="12.6" height="7.6"></rect> <path opacity="0.2" fill="#FFFFFF" enable-background="new    " d="M1.9,3.7C1,3.7,0,4.6,0,5.6V13v3.3v28.1c0,1,1,1.9,1.9,1.9H4 	L43.6,3.7H1.9z"></path> </symbol> </defs></svg><svg><use xlink:href="#storage"></use></svg></span> </div> </div> </li> <li> <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" title="Web + Mobile">Web + Mobile</a> <ul class="menu-pop" id="WebMobile-category"> <li class="title">Web + Mobile</li> <li data-product-slug="app-service"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/app-service/" title="App Service" class="label">App Service</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/app-service/" title="App Service" class="sub">Create web and mobile apps for any platform and any device</a> </li> <li class="indent" data-product-slug="app-service\web"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/app-service/web/" title="Web Apps" class="label">Web Apps</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/app-service/web/" title="Web Apps" class="sub">Quickly create and deploy mission critical Web apps at scale</a> </li> <li class="indent" data-product-slug="app-service\mobile"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/app-service/mobile/" title="Mobile Apps" class="label">Mobile Apps</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/app-service/mobile/" title="Mobile Apps" class="sub">Build and host the backend for any mobile app</a> </li> <li class="indent" data-product-slug="logic-apps"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/logic-apps/" title="Logic Apps" class="label">Logic Apps</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/logic-apps/" title="Logic Apps" class="sub">Automate the access and use of data across clouds without writing code</a> </li> <li class="indent" data-product-slug="app-service\api"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/app-service/api/" title="API Apps" class="label">API Apps</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/app-service/api/" title="API Apps" class="sub">Easily build and consume Cloud APIs</a> </li> <li data-product-slug="cdn"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/cdn/" title="CDN" class="label">CDN</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/cdn/" title="CDN" class="sub">Deliver content to end-users through a robust network of global data centers</a> </li> <li data-product-slug="media-services"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/media-services/" title="Media Services" class="label">Media Services</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/media-services/" title="Media Services" class="sub">Encode, store, and stream video and audio at scale</a> </li> <li data-product-slug="search"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/search/" title="Search" class="label">Search</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/search/" title="Search" class="sub">Fully-managed search-as-a-service</a> </li> <li class="link-bottom"> <a class="label" href="https://azure.microsoft.com/en-us/services/?filter=web-mobile">See all web + mobile</a> </li> </ul> <div class="free-trial"> <div> <p>Get credits that enable:</p> <p>Deploy 20 websites</p> <p>over 10M mobile API calls</p> <p>And much more...</p> <a href="https://azure.microsoft.com/en-us/free/" title="Learn more" class="wa-arrowLink wa-arrowLink-light" data-event="global-clicked-menumessage" data-event-property="Products (Web &amp; Mobile)">Learn more</a> <span class="icon icon-size17"><svg style="display:none; visibility:hidden;"><defs><symbol id="app-service" viewBox="0 0 50 50"> <path fill="#A0A1A2" d="M20.1,46.5H3.5V30h3.4c-0.4-1-0.6-2.1-0.6-3.3c0,0,0-0.1,0-0.2H0V50h23.6V36h-3.5V46.5z"></path> <path fill="#A0A1A2" d="M43.5,30h3v16.6H29.9V36.1h-3.5V50H50V26.5h-7.4c0.5,1,0.9,2,0.9,3.3C43.5,29.8,43.5,29.9,43.5,30z"></path> <path fill="#A0A1A2" d="M3.5,20V3.5h16.6v9.6c1-0.8,2.3-1.3,3.5-1.6V0H0v23.5h6.8C7.3,22.3,8,21,9,20.1L3.5,20L3.5,20z"></path> <path fill="#A0A1A2" d="M29.9,11.1V3.5h16.6v16.6h-7.3c0.3,1,0.5,2.2,0.5,3.4c0,0,0,0.1,0,0.1H50V0H26.4v10.9c0.3,0,0.5-0.1,0.8-0.1 C28.1,10.9,29,10.9,29.9,11.1z"></path> <path fill="#59B4D9" d="M40.8,29.7c0-2.1-1.7-3.7-3.7-3.7c-0.2,0-0.3,0-0.5,0c0.2-0.8,0.4-1.7,0.4-2.6c0-5.5-4.4-9.9-9.9-9.9 c-4.3,0-8,2.8-9.3,6.8c-0.7-0.2-1.4-0.4-2.2-0.4c-3.7,0-6.7,3-6.7,6.8c0,3.8,3,6.8,6.7,6.8c0,0,0,0,0,0v0h21.8l0,0 C39.3,33.3,40.8,31.7,40.8,29.7"></path> <path opacity="0.2" fill="#FFFFFF" d="M19.2,33.5c-0.9-0.9-1.5-2-1.8-3.3c-0.8-3.7,1.4-7.3,5.1-8.1c0.8-0.2,1.5-0.2,2.2-0.1 c0.3-3.4,2.4-6.5,5.5-8c-0.9-0.3-1.9-0.5-3-0.5c-4.3,0-8,2.8-9.3,6.8c-0.7-0.2-1.4-0.4-2.2-0.4c-3.7,0-6.7,3-6.7,6.8 c0,3.8,3,6.8,6.7,6.8c0,0,0,0,0,0v0H19.2z"></path> </symbol> </defs></svg><svg><use xlink:href="#app-service"></use></svg></span> </div> </div> </li> <li> <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" title="Databases">Databases</a> <ul class="menu-pop" id="Databases-category"> <li class="title">Databases</li> <li data-product-slug="sql-database"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/sql-database/" title="SQL Database" class="label">SQL Database</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/sql-database/" title="SQL Database" class="sub">Managed relational SQL Database-as-a-service</a> </li> <li data-product-slug="sql-data-warehouse"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/sql-data-warehouse/" title="SQL Data Warehouse" class="label">SQL Data Warehouse</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/sql-data-warehouse/" title="SQL Data Warehouse" class="sub">Elastic data warehouse-as-a-service with enterprise-class features</a> </li> <li data-product-slug="sql-server-stretch-database"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/sql-server-stretch-database/" title="SQL Server Stretch Database" class="label">SQL Server Stretch Database</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/sql-server-stretch-database/" title="SQL Server Stretch Database" class="sub">Dynamically stretch on-premises SQL Server databases to Azure</a> </li> <li data-product-slug="documentdb"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/documentdb/" title="DocumentDB" class="label">DocumentDB</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/documentdb/" title="DocumentDB" class="sub">Managed NoSQL document database-as-a-service</a> </li> <li data-product-slug="storage\tables"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/storage/tables/" title="Table Storage" class="label">Table Storage</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/storage/tables/" title="Table Storage" class="sub">NoSQL key-value store using semi-structured datasets</a> </li> <li data-product-slug="redis-cache"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/cache/" title="Redis Cache" class="label">Redis Cache</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/cache/" title="Redis Cache" class="sub">High throughput, low latency data access to build fast and scalable applications</a> </li> <li data-product-slug="data-factory"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/data-factory/" title="Data Factory" class="label">Data Factory</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/data-factory/" title="Data Factory" class="sub">Orchestrate and manage data transformation and movement</a> </li> </ul> <div class="free-trial"> <div> <p>Get credits that enable:</p> <p>8 standard SQL Databases</p> <p>Hadoop instance for a week</p> <p>And much more...</p> <a href="https://azure.microsoft.com/en-us/free/" title="Learn more" class="wa-arrowLink wa-arrowLink-light" data-event="global-clicked-menumessage" data-event-property="Products (Data &amp; Storage)">Learn more</a> <span class="icon icon-size17"><svg><use xlink:href="#storage"></use></svg></span> </div> </div> </li> <li> <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" title="Intelligence + Analytics">Intelligence + Analytics</a> <ul class="menu-pop" id="IntelligenceAnalytics-category"> <li class="title">Intelligence + Analytics</li> <li data-product-slug="hdinsight"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/hdinsight/" title="HDInsight" class="label">HDInsight</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/hdinsight/" title="HDInsight" class="sub">Provision cloud Hadoop, Spark, R Server, HBase, and Storm clusters</a> </li> <li data-product-slug="machine-learning"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/machine-learning/" title="Machine Learning" class="label">Machine Learning</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/machine-learning/" title="Machine Learning" class="sub">Powerful cloud based predictive analytics tool to enable predictive maintenance</a> </li> <li data-product-slug="stream-analytics"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/stream-analytics/" title="Stream Analytics" class="label">Stream Analytics</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/stream-analytics/" title="Stream Analytics" class="sub">Real-time data stream processing from millions of IoT devices</a> </li> <li data-product-slug="cognitive-services"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/cognitive-services/" title="Cognitive Services" class="label">Cognitive Services</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/cognitive-services/" title="Cognitive Services" class="sub">Add smart API capabilities to enable contextual interactions</a> </li> <li data-product-slug="bot-service"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/bot-service/" title="Azure Bot Service" class="label">Azure Bot Service</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/bot-service/" title="Azure Bot Service" class="sub">Intelligent, serverless bot service that scales on demand</a> </li> <li data-product-slug="data-lake-analytics"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/data-lake-analytics/" title="Data Lake Analytics" class="label">Data Lake Analytics</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/data-lake-analytics/" title="Data Lake Analytics" class="sub">Distributed analytics service that makes big data easy</a> </li> <li data-product-slug="data-lake-store"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/data-lake-store/" title="Data Lake Store" class="label">Data Lake Store</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/data-lake-store/" title="Data Lake Store" class="sub">Hyperscale repository for big data analytics workloads</a> </li> <li data-product-slug="power-bi-embedded"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/power-bi-embedded/" title="Power BI Embedded" class="label">Power BI Embedded</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/power-bi-embedded/" title="Power BI Embedded" class="sub">Embed fully interactive, stunning data visualizations in your applications</a> </li> <li class="link-bottom"> <a class="label" href="https://azure.microsoft.com/en-us/services/?filter=intelligence-analytics">See all intelligence + analytics</a> </li> </ul> <div class="free-trial"> <div> <p>Cortana Intelligence</p> <p>Learn how to transform your business with big data and advanced analytics</p> <a href="https://azure.microsoft.com/en-us/suites/cortana-intelligence-suite/" title="Learn more" class="wa-arrowLink wa-arrowLink-light" data-event="global-clicked-menumessage" data-event-property="Products (Intelligence + Analytics)">Learn more</a> <span class="icon icon-size17"><svg><use xlink:href="#storage"></use></svg></span> </div> </div> </li> <li> <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" title="Internet of Things">Internet of Things</a> <ul class="menu-pop" id="InternetOfThings-category"> <li class="title">Internet of Things</li> <li data-product-slug="iot-hub"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/iot-hub/" title="Azure IoT Hub" class="label">Azure IoT Hub</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/iot-hub/" title="Azure IoT Hub" class="sub">Connect, monitor, and control billions of IoT assets</a> </li> <li data-product-slug="event-hubs"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/event-hubs/" title="Event Hubs" class="label">Event Hubs</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/event-hubs/" title="Event Hubs" class="sub">Receive telemetry from millions of devices</a> </li> <li data-product-slug="stream-analytics"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/stream-analytics/" title="Stream Analytics" class="label">Stream Analytics</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/stream-analytics/" title="Stream Analytics" class="sub">Real-time data stream processing from millions of IoT devices</a> </li> <li data-product-slug="machine-learning"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/machine-learning/" title="Machine Learning" class="label">Machine Learning</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/machine-learning/" title="Machine Learning" class="sub">Powerful cloud based predictive analytics tool to enable predictive maintenance</a> </li> <li data-product-slug="notification-hubs"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/notification-hubs/" title="Notification Hubs" class="label">Notification Hubs</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/notification-hubs/" title="Notification Hubs" class="sub">A scalable, push notification engine for quickly sending millions of messages</a> </li> </ul> <div class="free-trial"> <div> <p>Azure IoT Suite</p> <p>Capture and analyze untapped data to improve business results</p> <a href="https://azure.microsoft.com/en-us/suites/iot-suite/" title="Learn more" class="wa-arrowLink wa-arrowLink-light" data-event="global-clicked-menumessage" data-event-property="Products (IoT)">Learn more</a> <span class="icon icon-size17"><svg style="display:none; visibility:hidden;"><defs><symbol id="machine-learning" viewBox="0 0 50 50"> <path fill="#59B4D9" d="M48.288,44.623L32.72,17.659V6.743h0.281c1.862,0,3.372-1.51,3.372-3.372S34.863,0,33.001,0H16.016 c-1.862,0-3.372,1.51-3.372,3.372s1.51,3.372,3.372,3.372h0.281v10.915L0.729,44.623C-0.979,47.58,0.418,50,3.833,50h41.351 C48.598,50,49.995,47.58,48.288,44.623z"></path> <polygon fill="#B8D432" points="13.551,33.017 7.127,44.143 41.889,44.143 35.466,33.017 "></polygon> <path fill="#7FBA00" d="M25.334,37.532c1.735,0,3.141-1.406,3.141-3.141c0-0.493-0.117-0.958-0.32-1.374h-5.643 c-0.203,0.415-0.32,0.88-0.32,1.374C22.193,36.126,23.599,37.532,25.334,37.532z"></path> <circle fill="#7FBA00" cx="29.232" cy="39.956" r="1.541"></circle> <path opacity="0.25" fill="#FFFFFF" d="M0.729,44.623l15.568-26.965V6.743h-0.281c-1.862,0-3.372-1.51-3.372-3.372 S14.153,0,16.016,0l7.319,0v17.572L15.13,50H3.833C0.418,50-0.979,47.58,0.729,44.623z"></path> </symbol> </defs></svg><svg><use xlink:href="#machine-learning"></use></svg></span> </div> </div> </li> <li> <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" title="Enterprise Integration">Enterprise Integration</a> <ul class="menu-pop" id="EnterpriseIntegration-category"> <li class="title">Enterprise Integration</li> <li data-product-slug="logic-apps"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/logic-apps/" title="Logic Apps" class="label">Logic Apps</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/logic-apps/" title="Logic Apps" class="sub">Automate the access and use of data across clouds without writing code</a> </li> <li data-product-slug="biztalk-services"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/biztalk-services/" title="BizTalk Services" class="label">BizTalk Services</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/biztalk-services/" title="BizTalk Services" class="sub">Seamlessly integrate the enterprise and the cloud</a> </li> <li data-product-slug="service-bus"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/service-bus/" title="Service Bus" class="label">Service Bus</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/service-bus/" title="Service Bus" class="sub">Connect across private and public cloud environments</a> </li> <li data-product-slug="api-management"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/api-management/" title="API Management" class="label">API Management</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/api-management/" title="API Management" class="sub">Publish APIs to developers, partners and employees securely and at scale</a> </li> <li data-product-slug="storsimple"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/storsimple/" title="StorSimple" class="label">StorSimple</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/storsimple/" title="StorSimple" class="sub">Hybrid cloud storage for enterprises, reduces costs and improves data security</a> </li> <li data-product-slug="sql-server-stretch-database"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/sql-server-stretch-database/" title="SQL Server Stretch Database" class="label">SQL Server Stretch Database</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/sql-server-stretch-database/" title="SQL Server Stretch Database" class="sub">Dynamically stretch on-premises SQL Server databases to Azure</a> </li> <li data-product-slug="data-factory"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/data-factory/" title="Data Factory" class="label">Data Factory</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/data-factory/" title="Data Factory" class="sub">Orchestrate and manage data transformation and movement</a> </li> </ul> <div class="free-trial"> <div> <p>Get credits that enable:</p> <p>Send 200 million messages</p> <p>And much more...</p> <a href="https://azure.microsoft.com/en-us/free/" title="Learn more" class="wa-arrowLink wa-arrowLink-light" data-event="global-clicked-menumessage" data-event-property="Products (Enterprise Integration)">Learn more</a> <span class="icon icon-size17"><svg style="display:none; visibility:hidden;"><defs><symbol id="app-service-logic" viewBox="0 0 50 38.8"> <path d="M26,21.3v-5H23.5v5c0,.9-.8,1.7-2.1,2.1l-3.4.7c-2.3.7-3.9,2.5-3.9,4.5v5.7h2.5V28.6c0-.9.8-1.7,2.1-2.1l3.4-.8A4.833,4.833,0,0,0,26,21.3Z" transform="translate(0 -5.6)" fill="#59b4d9"></path> <path d="M19.6,36.9V32.3a2.006,2.006,0,0,0-2-2H13a2.006,2.006,0,0,0-2,2v4.6a2.006,2.006,0,0,0,2,2h4.6A2.006,2.006,0,0,0,19.6,36.9Z" transform="translate(0 -5.6)" fill="#7fba00"></path> <path d="M23.2,21.3v-5h2.5v5c0,.9.8,1.7,2.1,2.1l4.2.9c2.3.7,3.9,2.5,3.9,4.5v5.7H33.4V28.8c0-.9-.8-1.7-2.1-2.1l-4.2-.9C24.8,25.1,23.2,23.3,23.2,21.3Z" transform="translate(0 -5.6)" fill="#59b4d9"></path> <path d="M30.4,37.1V32.5a2.006,2.006,0,0,1,2-2H37a2.006,2.006,0,0,1,2,2v4.6a2.006,2.006,0,0,1-2,2H32.4A2.006,2.006,0,0,1,30.4,37.1Z" transform="translate(0 -5.6)" fill="#7fba00"></path> <rect x="23.2" y="10.7" width="2.8" height="4.8" fill="#59b4d9"></rect> <path d="M26.5,11.7v3.7H22.8V11.7h3.7m.8-2.8H22a2.006,2.006,0,0,0-2,2v5.3a2.006,2.006,0,0,0,2,2h5.3a2.006,2.006,0,0,0,2-2V10.9a2.006,2.006,0,0,0-2-2Z" transform="translate(0 -5.6)" fill="#0072c6"></path> <path d="M7.9,44.4a7.41,7.41,0,0,1-4.5-1.1c-.9-.8-1.3-2.1-1.3-4V28.9c0-1.7-.7-2.6-2.1-2.6V23.7q2.1,0,2.1-2.7V10.8c0-1.9.4-3.3,1.3-4.1S5.8,5.6,7.9,5.6V8.2c-1.5,0-2.3.8-2.3,2.5v10c0,2.3-.7,3.7-2.2,4.3h0c1.4.6,2.2,2,2.2,4.3v9.9a3.439,3.439,0,0,0,.5,2,2.2,2.2,0,0,0,1.7.6l.1,2.6Z" transform="translate(0 -5.6)" fill="#59b4d9"></path> <path d="M42.1,5.6a7.41,7.41,0,0,1,4.5,1.1c.9.8,1.3,2.1,1.3,4V21.1c0,1.7.7,2.6,2.1,2.6v2.6q-2.1,0-2.1,2.7V39.1c0,1.9-.4,3.3-1.3,4.1s-2.4,1.2-4.5,1.2V41.8c1.5,0,2.3-.8,2.3-2.5v-10c0-2.3.7-3.7,2.2-4.3h0c-1.4-.6-2.2-2-2.2-4.3V10.8a3.439,3.439,0,0,0-.5-2,2.2,2.2,0,0,0-1.7-.6l-.1-2.6Z" transform="translate(0 -5.6)" fill="#59b4d9"></path> </symbol></defs></svg><svg><use xlink:href="#app-service-logic"></use></svg></span> </div> </div> </li> <li> <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" title="Security + Identity">Security + Identity</a> <ul class="menu-pop" id="SecurityIdentity-category"> <li class="title">Security + Identity</li> <li data-product-slug="security-center"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/security-center/" title="Security Center" class="label">Security Center</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/security-center/" title="Security Center" class="sub">Prevent, detect, and respond to threats with increased visibility</a> </li> <li data-product-slug="microsoft-identity"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/develop/identity/" title="Identity for developers" class="label">Identity for developers</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/develop/identity/" title="Identity for developers" class="sub">Enable one-click sign in for hundreds of millions of users</a> </li> <li data-product-slug="key-vault"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/key-vault/" title="Key Vault" class="label">Key Vault</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/key-vault/" title="Key Vault" class="sub">Safeguard and maintain control of keys and other secrets</a> </li> <li data-product-slug="active-directory"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/active-directory/" title="Azure Active Directory" class="label">Azure Active Directory</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/active-directory/" title="Azure Active Directory" class="sub">Synchronize on-premises directories and enable single sign-on</a> </li> <li data-product-slug="active-directory-b2c"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/active-directory-b2c/" title="Azure Active Directory B2C" class="label">Azure Active Directory B2C</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/active-directory-b2c/" title="Azure Active Directory B2C" class="sub">Consumer identity and access management in the cloud</a> </li> <li data-product-slug="active-directory-ds"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/active-directory-ds/" title="Azure Active Directory Domain Services" class="label">Azure Active Directory Domain Services</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/active-directory-ds/" title="Azure Active Directory Domain Services" class="sub">Join Azure virtual machines to a domain without domain controllers</a> </li> <li data-product-slug="multi-factor-authentication"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/multi-factor-authentication/" title="Multi-Factor Authentication" class="label">Multi-Factor Authentication</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/multi-factor-authentication/" title="Multi-Factor Authentication" class="sub">Safeguard access to your data and apps with an extra level of authentication</a> </li> </ul> <div class="free-trial"> <div> <p>Get credits that enable:</p> <p>Store 500,000 objects in Active Directory</p> <p>Multi-factor auth with 100 users</p> <p>And much more...</p> <a href="https://azure.microsoft.com/en-us/free/" title="Learn more" class="wa-arrowLink wa-arrowLink-light" data-event="global-clicked-menumessage" data-event-property="Products (Identity &amp; Access Management)">Learn more</a> <span class="icon icon-size17"><svg style="display:none; visibility:hidden;"><defs><symbol id="active-directory" viewBox="0 0 50 50"> <path fill="#59B4D9" d="M25.001,50.001c-1.232,0-2.392-0.48-3.261-1.352L1.351,28.261C0.492,27.402,0,26.215,0,25 c0-1.214,0.492-2.402,1.351-3.26L21.74,1.352C22.611,0.48,23.769,0,25.001,0c1.231,0,2.39,0.48,3.261,1.352L48.648,21.74 C49.521,22.608,50,23.767,50,25c0,1.233-0.479,2.392-1.353,3.263L28.262,48.649C27.392,49.521,26.232,50.001,25.001,50.001"></path> <path fill="#FFFFFF" d="M38.614,21.093c-2.16,0-3.91,1.75-3.91,3.909c0,0.792,0.239,1.527,0.645,2.143l-7.744,7.744 c-0.206-0.144-0.427-0.264-0.656-0.373V14.759c1.167-0.676,1.961-1.924,1.961-3.37C28.91,9.23,27.16,7.48,25,7.48 c-2.158,0-3.908,1.75-3.908,3.909c0,1.446,0.794,2.694,1.96,3.37v19.756c-0.219,0.104-0.434,0.216-0.632,0.353l-7.753-7.753 c0.394-0.61,0.628-1.333,0.628-2.113c0-2.159-1.75-3.909-3.908-3.909c-2.16,0-3.91,1.75-3.91,3.909s1.75,3.909,3.91,3.909 c0.448,0,0.872-0.091,1.274-0.23l8.15,8.15c-0.234,0.548-0.364,1.15-0.364,1.783c0,2.513,2.038,4.551,4.551,4.551 c2.514,0,4.551-2.038,4.551-4.551c0-0.621-0.126-1.212-0.351-1.751l8.173-8.172c0.392,0.132,0.804,0.22,1.241,0.22 c2.158,0,3.908-1.75,3.908-3.909S40.771,21.093,38.614,21.093z"></path> <rect x="31.006" y="8.226" transform="matrix(-0.707 0.7072 -0.7072 -0.707 68.2099 8.8718)" opacity="0.5" fill="#FFFFFF" width="2.523" height="20.676"></rect> <rect x="16.487" y="8.242" transform="matrix(0.7071 0.7071 -0.7071 0.7071 18.3355 -7.1088)" opacity="0.5" fill="#FFFFFF" width="2.524" height="20.677"></rect> <path fill="#B8D432" d="M27.665,38.614c0,1.496-1.214,2.709-2.71,2.709c-1.497,0-2.709-1.213-2.709-2.709 c0-1.496,1.212-2.709,2.709-2.709C26.45,35.905,27.665,37.118,27.665,38.614"></path> <path fill="#B8D432" d="M27.174,11.389c0,1.201-0.973,2.174-2.174,2.174c-1.201,0-2.174-0.973-2.174-2.174 c0-1.201,0.973-2.174,2.174-2.174C26.201,9.215,27.174,10.188,27.174,11.389"></path> <path fill="#B8D432" d="M13.563,25.001c0,1.201-0.975,2.174-2.174,2.174c-1.201,0-2.174-0.973-2.174-2.174 c0-1.201,0.973-2.174,2.174-2.174C12.588,22.827,13.563,23.8,13.563,25.001"></path> <path fill="#B8D432" d="M40.788,25.001c0,1.201-0.975,2.174-2.175,2.174c-1.2,0-2.174-0.973-2.174-2.174 c0-1.201,0.974-2.174,2.174-2.174C39.813,22.827,40.788,23.8,40.788,25.001"></path> <path opacity="0.1" fill="#FFFFFF" d="M28.262,1.352C27.391,0.48,26.233,0,25.001,0c-1.231,0-2.389,0.48-3.26,1.352L1.352,21.74 C0.492,22.598,0,23.786,0,25c0,1.215,0.492,2.403,1.352,3.261l11.543,11.544L34.61,7.699L28.262,1.352z"></path> </symbol> </defs></svg><svg><use xlink:href="#active-directory"></use></svg></span> </div> </div> </li> <li> <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" title="Developer Tools">Developer Tools</a> <ul class="menu-pop" id="DeveloperTools-category"> <li class="title">Developer Tools</li> <li data-product-slug="visual-studio-team-services"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/visual-studio-team-services/" title="Visual Studio Team Services" class="label">Visual Studio Team Services</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/visual-studio-team-services/" title="Visual Studio Team Services" class="sub">Services for teams to share code, track work, and ship software</a> </li> <li data-product-slug="devtest-lab"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/devtest-lab/" title="Azure DevTest Labs" class="label">Azure DevTest Labs</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/devtest-lab/" title="Azure DevTest Labs" class="sub">Quickly create environments using reusable templates and artifacts</a> </li> <li data-product-slug="application-insights"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/application-insights/" title="Application Insights" class="label">Application Insights</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/application-insights/" title="Application Insights" class="sub">Detect, triage, and diagnose issues in your web apps and services</a> </li> <li data-product-slug="api-management"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/api-management/" title="API Management" class="label">API Management</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/api-management/" title="API Management" class="sub">Publish APIs to developers, partners and employees securely and at scale</a> </li> <li data-product-slug="hockeyapp"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/hockeyapp/" title="HockeyApp" class="label">HockeyApp</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/hockeyapp/" title="HockeyApp" class="sub">Deploy mobile apps, collect feedback and crash reports, and monitor usage</a> </li> <li data-product-slug="tools"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/tools/" title="Developer Tools and SDKs" class="label">Developer Tools and SDKs</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/tools/" title="Developer Tools and SDKs" class="sub">Build, deploy, diagnose, and manage multi-platform, scalable apps and services</a> </li> <li data-product-slug="xamarin"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/features/xamarin/" title="Xamarin" class="label">Xamarin</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/features/xamarin/" title="Xamarin" class="sub">Create cloud-powered mobile apps faster</a> </li> <li data-product-slug="storage-explorer"> <a data-event="global-clicked-mainmenu" href="http://storageexplorer.com/" title="Storage Explorer" class="label">Storage Explorer</a> <a data-event="global-clicked-mainmenu" href="http://storageexplorer.com/" title="Storage Explorer" class="sub">View and interact with Azure Storage resources</a> </li> </ul> <div class="free-trial"> <div> <p>Each free account includes:</p> <p>Five free users</p> <p>Unlimited private code repos</p> <p>And more!</p> <a href="https://azure.microsoft.com/en-us/free/" title="Learn more" class="wa-arrowLink wa-arrowLink-light" data-event="global-clicked-menumessage" data-event-property="Products (Developer Tools)">Learn more</a> <span class="icon icon-size17"><svg style="display:none; visibility:hidden;"><defs><symbol id="visual-studio-team-services" viewBox="0 0 21 21"> <path fill="#7A4D87" d="M9.7,10L15,5.9v8.2L9.7,10z M2,13V7l3,3L2,13z M15,0L7.1,7.9L2,4L0,5v10l2,1l5.1-3.9L15,20l5-2V2L15,0z"></path> </symbol> </defs></svg><svg><use xlink:href="#visual-studio-team-services"></use></svg></span> </div> </div> </li> <li> <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" title="Monitoring + Management">Monitoring + Management</a> <ul class="menu-pop" id="MonitoringManagement-category"> <li class="title">Monitoring + Management</li> <li data-product-slug="azure-portal"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/features/azure-portal/" title="Microsoft Azure portal" class="label">Microsoft Azure portal</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/features/azure-portal/" title="Microsoft Azure portal" class="sub">Build, manage, and monitor all Azure products in a single, unified console</a> </li> <li data-product-slug="azure-resource-manager"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/features/resource-manager/" title="Azure Resource Manager" class="label">Azure Resource Manager</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/features/resource-manager/" title="Azure Resource Manager" class="sub">Simplify how you manage your app resources</a> </li> <li data-product-slug="application-insights"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/application-insights/" title="Application Insights" class="label">Application Insights</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/application-insights/" title="Application Insights" class="sub">Detect, triage, and diagnose issues in your web apps and services</a> </li> <li data-product-slug="log-analytics"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/log-analytics/" title="Log Analytics" class="label">Log Analytics</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/log-analytics/" title="Log Analytics" class="sub">Collect, search and visualize machine data from on-premises and cloud</a> </li> <li data-product-slug="automation"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/automation/" title="Automation" class="label">Automation</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/automation/" title="Automation" class="sub">Simplify cloud management with process automation</a> </li> <li data-product-slug="backup"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/backup/" title="Backup" class="label">Backup</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/backup/" title="Backup" class="sub">Simple and reliable server backup to the cloud</a> </li> <li data-product-slug="site-recovery"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/site-recovery/" title="Site Recovery" class="label">Site Recovery</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/site-recovery/" title="Site Recovery" class="sub">Orchestrate protection and recovery of private clouds</a> </li> <li data-product-slug="scheduler"> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/scheduler/" title="Scheduler" class="label">Scheduler</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/services/scheduler/" title="Scheduler" class="sub">Run your jobs on simple or complex recurring schedules</a> </li> <li class="link-bottom"> <a class="label" href="https://azure.microsoft.com/en-us/services/?filter=monitoring-management">See all monitoring + management</a> </li> </ul> <div class="free-trial"> <div> <p>Operations Management Suite</p> <p>Manage and protect your cloud and on-premises infrastructure</p> <a href="https://azure.microsoft.com/en-us/suites/operations-management-suite/" title="Learn more" class="wa-arrowLink wa-arrowLink-light" data-event="global-clicked-menumessage" data-event-property="Products (Monitoring + Management)">Learn more</a> <span class="icon icon-size17"><svg style="display:none; visibility:hidden;"><defs><symbol id="automation" viewBox="0 0 50 50"> <path fill="#A0A1A2" d="M46.281,23.344c0-0.375-0.031-0.734-0.063-1.109L50,20.141c-0.203-1.25-0.531-2.469-0.969-3.625 l-4.313,0.078c-0.328-0.672-0.688-1.328-1.094-1.938l2.219-3.703c-0.797-0.969-1.688-1.859-2.641-2.641l-2.188,1.297l-0.922,1.375 l-1.984,2.922c2.813,2.188,4.625,5.594,4.625,9.438c0,6.594-5.328,11.938-11.922,11.938c-6.578,0-11.922-5.344-11.922-11.938 c0-5.906,4.281-10.781,9.906-11.75l0.906-3.672l-2.094-3.781C26.359,4.344,25.156,4.672,24,5.109l0.063,4.328 c-0.656,0.313-1.313,0.672-1.922,1.094l-3.703-2.219c-0.969,0.781-1.844,1.672-2.641,2.641l2.219,3.703 c-0.422,0.609-0.766,1.266-1.094,1.938l-4.328-0.078c-0.422,1.156-0.75,2.375-0.953,3.625l3.766,2.094 c-0.031,0.375-0.047,0.734-0.047,1.109s0.016,0.734,0.047,1.109l-3.766,2.094c0.203,1.25,0.531,2.469,0.969,3.625l4.313-0.078 c0.328,0.672,0.672,1.328,1.094,1.938l-2.219,3.703c0.797,0.969,1.672,1.859,2.641,2.656l3.703-2.234 c0.609,0.422,1.266,0.781,1.922,1.109L24,41.578c1.156,0.438,2.359,0.766,3.609,0.969l2.109-3.781 c0.359,0.031,0.719,0.063,1.094,0.063s0.75-0.031,1.109-0.063l2.094,3.781c1.25-0.203,2.469-0.531,3.625-0.969l-0.078-4.313 c0.672-0.328,1.313-0.688,1.938-1.109l3.703,2.234c0.953-0.797,1.844-1.688,2.641-2.656l-2.219-3.703 c0.406-0.609,0.766-1.266,1.094-1.938l4.313,0.078c0.438-1.156,0.766-2.375,0.969-3.625l-3.781-2.094 C46.25,24.078,46.281,23.719,46.281,23.344z"></path> <path fill="#7A7A7A" d="M16,39.719v-1.859l-0.102-0.094l-1.902-0.641l-0.49-1.281l0.942-1.953l0.104-0.219l-0.589-0.594 l-0.716-0.719l-0.249,0.125l-1.859,0.953l-1.281-0.359L9.047,31H7.203l-0.094,0.094l-0.641,1.898L5.172,33.48l-2.156-1.037 l-1.313,1.302l0.125,0.245l0.953,1.857l-0.531,1.28L0,37.938v1.859l0.266,0.078l1.984,0.656l0.531,1.281l-1.016,2.156l1.313,1.328 l0.25-0.125l1.859-0.953l1.281,0.531L7.281,47h1.859l0.078-0.266l0.656-1.984l1.266-0.531l2.172,1.016l1.313-1.313l-0.125-0.25 l-0.953-1.859l0.367-1.297L16,39.719z M8.172,41.438c-1.438,0-2.609-1.172-2.609-2.609s1.172-2.609,2.609-2.609 s2.594,1.172,2.594,2.609S9.609,41.438,8.172,41.438z"></path> <path fill="#FCD116" d="M33.297,1.688l-0.719,2.266l-1.234,3.938L30.75,9.781l-0.516,1.656l-3.594,11.422 c-0.078,0.219,0.031,0.391,0.281,0.391h3.313c0.109,0,0.188,0.031,0.234,0.094c0.078,0.078,0.094,0.188,0.047,0.313l-3.422,8.297 c-0.094,0.219-0.031,0.266,0.125,0.078L38.047,19.75c0.156-0.188,0.094-0.328-0.141-0.328l-3.547,0.016l-0.656,0.016 c-0.234,0-0.344-0.172-0.219-0.375l3.375-6.016l0.797-1.438l0.922-1.656l1.969-3.484l1.125-2.031 C39.156,3,36.328,2.031,33.297,1.688z"></path> <path opacity="0.3" fill="#FF8C00" d="M39.505,3.367l-7.844,16.07h1.953c-0.174-0.037-0.249-0.183-0.14-0.359l3.375-6.016 l0.797-1.438l0.922-1.656l1.969-3.484l1.125-2.031C40.966,4.052,40.245,3.692,39.505,3.367z"></path> <path opacity="0.3" fill="#FF8C00" d="M37.92,19.422l-2.189,0.01l-8.093,12.14L38.061,19.75 C38.217,19.563,38.155,19.422,37.92,19.422z"></path> </symbol> </defs></svg><svg><use xlink:href="#automation"></use></svg></span> </div> </div> </li> <li> <a href="https://azure.microsoft.com/en-us/overview/azure-stack/">Microsoft Azure Stack</a> </li> <li class="link-bottom"> <a href="https://azure.microsoft.com/en-us/services/" data-event="global-clicked-productmenuseealllink">See all products</a> </li> </ul> </div> </li> <li id="main-nav-documentation"><a data-event="global-clicked-topnav" href="https://docs.microsoft.com/azure" title="Documentation">Documentation</a></li> <li><a data-event="global-clicked-topnav" href="https://azure.microsoft.com/en-us/pricing/" title="Pricing">Pricing</a></li> <li><a data-event="global-clicked-topnav" href="https://azure.microsoft.com/en-us/partners/" title="Partners">Partners</a></li> <li><a data-event="global-clicked-topnav" href="https://azure.microsoft.com/en-us/blog/" title="Blog">Blog</a></li> <li> <a data-event="global-clicked-topnav" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" title="Resources">Resources</a> <div> <ul class="menu-drop menu-drop-resources"> <li> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/downloads/" title="Downloads" class="label">Downloads</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/downloads/" title="Downloads" class="sub">Get the SDKs and command-line tools you need</a> </li> <li> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/resources/samples/" title="Samples" class="label">Samples</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/resources/samples/" title="Samples" class="sub">Learn how to interact with Azure services through code</a> </li> <li> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/resources/" title="Whitepapers and Analysts Reports" class="label">Whitepapers and Analysts Reports</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/resources/" title="Whitepapers and Analysts Reports" class="sub">View popular whitepapers, analyst reports and sign up for the newsletter</a> </li> <li> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/community/events/" title="Events" class="label">Events</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/community/events/" title="Events" class="sub">Find an in-person event or webinar</a> </li> <li> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/community/training/" title="Training" class="label">Training</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/community/training/" title="Training" class="sub">Discover training and certification programs</a> </li> <li> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/resources/templates/" title="Templates" class="label">Templates</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/resources/templates/" title="Templates" class="sub">Deploy Azure resources through the Azure Resource Manager with community contributed templates</a> </li> <li> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/updates/" title="Service Updates" class="label">Service Updates</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/updates/" title="Service Updates" class="sub">Learn about updates to Azure products</a> </li> </ul> <div class="free-trial free-trial-why-azure"> <div> <span class="icon icon-size13"><svg><use xlink:href="#azure"></use></svg></span> <p>Sign up for free and get <span class="price-data " data-amount="{&quot;currencies&quot;:{&quot;USD&quot;:200.0,&quot;ARS&quot;:2800.0,&quot;AUD&quot;:260.0,&quot;BRL&quot;:750.0,&quot;CAD&quot;:250.0,&quot;CHF&quot;:190.0,&quot;DKK&quot;:1300.0,&quot;EUR&quot;:170.0,&quot;GBP&quot;:125.0,&quot;HKD&quot;:1600.0,&quot;IDR&quot;:2940000.0,&quot;INR&quot;:12100.0,&quot;JPY&quot;:20500.0,&quot;KRW&quot;:240000.0,&quot;MXN&quot;:3600.0,&quot;MYR&quot;:900.0,&quot;NOK&quot;:1650.0,&quot;NZD&quot;:300.0,&quot;RUB&quot;:12500.0,&quot;SAR&quot;:750.0,&quot;SEK&quot;:1600.0,&quot;TRY&quot;:610.0,&quot;TWD&quot;:6300.0,&quot;ZAR&quot;:3450.0}}" data-decimals="0">$200</span> to spend on all Azure services</p> <a href="https://azure.microsoft.com/en-us/free/" title="Learn more" class="wa-arrowLink wa-arrowLink-light" data-event="global-clicked-menumessage" data-event-property="Resources">Learn more</a> </div> </div> </div> </li> <li> <a data-event="global-clicked-topnav" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" title="Support">Support</a> <div> <ul class="menu-drop menu-drop-support"> <li> <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" title="Support Overview">Support Overview</a> <ul class="menu-pop"> <li class="title">Support Overview</li> <li> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/support/options/" title="Azure Support" class="label">Azure Support</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/support/options/" title="Azure Support" class="sub">Find the support options you need</a> </li> <li> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/support/plans/" title="Compare Support Plans" class="label">Compare Support Plans</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/support/plans/" title="Compare Support Plans" class="sub">Explore and purchase technical support</a> </li> <li> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/support/forums/" title="Forums" class="label">Forums</a> <a data-event="global-clicked-mainmenu" href="https://azure.microsoft.com/en-us/support/forums/" title="Forums" class="sub">Get answers from Microsoft and community experts</a> </li> </ul> <div class="free-trial"> <div> <p>Sign up for free and get <span class="price-data " data-amount="{&quot;currencies&quot;:{&quot;USD&quot;:200.0,&quot;ARS&quot;:2800.0,&quot;AUD&quot;:260.0,&quot;BRL&quot;:750.0,&quot;CAD&quot;:250.0,&quot;CHF&quot;:190.0,&quot;DKK&quot;:1300.0,&quot;EUR&quot;:170.0,&quot;GBP&quot;:125.0,&quot;HKD&quot;:1600.0,&quot;IDR&quot;:2940000.0,&quot;INR&quot;:12100.0,&quot;JPY&quot;:20500.0,&quot;KRW&quot;:240000.0,&quot;MXN&quot;:3600.0,&quot;MYR&quot;:900.0,&quot;NOK&quot;:1650.0,&quot;NZD&quot;:300.0,&quot;RUB&quot;:12500.0,&quot;SAR&quot;:750.0,&quot;SEK&quot;:1600.0,&quot;TRY&quot;:610.0,&quot;TWD&quot;:6300.0,&quot;ZAR&quot;:3450.0}}" data-decimals="0">$200</span> to spend on all Azure services</p> <a href="https://docs.microsoft.com/en-us/free/" title="Learn more" class="wa-arrowLink wa-arrowLink-light" data-event="global-clicked-menumessage" data-event-property="Support (Overview)">Learn more</a> <span class="icon icon-size13" style="fill: #fff"><svg><use xlink:href="#azure"></use></svg></span> </div> </div> </li> <li><a href="https://azure.microsoft.com/en-us/support/trust-center/" title="Trust Center">Trust Center</a></li> <li> <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" title="Legal">Legal</a> <ul class="menu-pop"> <li class="title">Legal</li> <li> <a href="https://docs.microsoft.com/en-us/support/legal/" title="Overview" class="label"> Overview </a> </li> <li> <a href="https://docs.microsoft.com/en-us/support/legal/subscription-agreement/" title="Subscription Agreement" class="label"> Subscription Agreement </a> </li> <li> <a href="http://www.microsoftvolumelicensing.com/DocumentSearch.aspx?Mode=3&amp;DocumentTypeId=31" title="Services Terms" class="label"> Services Terms </a> </li> <li> <a href="https://docs.microsoft.com/en-us/support/legal/offer-details/" title="Offer Details" class="label"> Offer Details </a> </li> <li> <a href="https://www.microsoft.com/en-us/privacystatement/OnlineServices/Default.aspx" title="Privacy Statement" class="label"> Privacy Statement </a> </li> <li> <a href="https://docs.microsoft.com/en-us/support/legal/sla/" title="Service Level Agreements" class="label"> Service Level Agreements </a> </li> <li> <a href="https://docs.microsoft.com/en-us/support/legal/preview-supplemental-terms/" title="Preview Supplemental Terms" class="label"> Preview Supplemental Terms </a> </li> <li> <a href="https://docs.microsoft.com/en-us/support/legal/marketplace-terms/" title="Marketplace Terms" class="label"> Marketplace Terms </a> </li> <li> <a href="https://docs.microsoft.com/en-us/support/legal/website-terms-of-use/" title="Website Terms Of Use" class="label"> Website Terms Of Use </a> </li> </ul> <div class="free-trial"> <div> <p>Sign up for free and get <span class="price-data " data-amount="{&quot;currencies&quot;:{&quot;USD&quot;:200.0,&quot;ARS&quot;:2800.0,&quot;AUD&quot;:260.0,&quot;BRL&quot;:750.0,&quot;CAD&quot;:250.0,&quot;CHF&quot;:190.0,&quot;DKK&quot;:1300.0,&quot;EUR&quot;:170.0,&quot;GBP&quot;:125.0,&quot;HKD&quot;:1600.0,&quot;IDR&quot;:2940000.0,&quot;INR&quot;:12100.0,&quot;JPY&quot;:20500.0,&quot;KRW&quot;:240000.0,&quot;MXN&quot;:3600.0,&quot;MYR&quot;:900.0,&quot;NOK&quot;:1650.0,&quot;NZD&quot;:300.0,&quot;RUB&quot;:12500.0,&quot;SAR&quot;:750.0,&quot;SEK&quot;:1600.0,&quot;TRY&quot;:610.0,&quot;TWD&quot;:6300.0,&quot;ZAR&quot;:3450.0}}" data-decimals="0">$200</span> to spend on all Azure services</p> <a href="https://docs.microsoft.com/en-us/free/" title="Learn more" class="wa-arrowLink wa-arrowLink-light" data-event="global-clicked-menumessage" data-event-property="Support (Legal)">Learn more</a> <span class="icon icon-size13" style="fill: #fff"><svg><use xlink:href="#azure"></use></svg></span> </div> </div> </li> <li><a href="https://azure.microsoft.com/en-us/status/" title="Azure Status Dashboard">Azure Status Dashboard</a></li> </ul> </div> </li> <li class="mobile-free-trial az_hUpdated"> <a data-event="global-clicked-primarycta" href="https://azure.microsoft.com/en-us/free/" class="button button-primary" title="Free account">Free account</a> <a href="tel:" title="Sales">Sales: <span data-control="geophone">1-800-867-1389</span></a> </li> </ul> </div> <div class="nav-end"></div> </header> 


    <div id="lca-cookie-notification" class="shell-notification" style="display:none;">
        <div class="shell-notification-grid-row shell-notification-clearfix">
            <span id="cookie.consent.europe" class="notification-txt">By using this site you agree to the use of cookies for analytics, personalized content and ads.</span>
            <span class="notification-action">
            <a id="privacystatement-link" tabindex="1" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" title="Privacy Statement">Learn more</a>
            <a id="close" tabindex="2" title="close">
                <i class="shell-icon-close"></i>
            </a>
            </span>
        </div>
    </div>
    <div id="msdn-redirection-notification" class="shell-notification" style="display:none;">
        <div class="shell-notification-grid-row shell-notification-clearfix">
            <span id="msdn.redirection.text" class="notification-txt">You were redirected to this page from MSDN.  We are in the process of migrating all technical content to docs.microsoft.com.</span>
            <span class="notification-action">
            <a id="redirect-notification-close" tabindex="1" title="close">
                <i class="shell-icon-close"></i>
            </a>
            </span>
        </div>
    </div>

    <div id="sub-header" class="container" ms.cmpgrp="breadcrumb" role="navigation" aria-label="breadcrumb">    
        <div id="sub-header-content">
            <div class="content">
                <ul class="breadcrumbs"><li><a href="https://docs.microsoft.com/en-us/azure/index">Azure</a></li><li><a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-resiliency-overview">Guidance</a></li></ul>
            </div>
        </div>
    </div>
</div>

    <main>
      <div class="container" ms.pgarea="body">      
        <div id="page-actions" ms.cmpgrp="social" role="complementary">
          <div id="page-actions-content" class="fixed pinned-actions" style="top: 18px; width: 302px; max-height: 937px;">
          
            <ol class="action-list">
              
              <li>
                <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#comments-container" class="button is-primary is-small" id="comments-link">
                  <i class="icon icon-comments"></i>Comments
                </a>
              </li>
              
              
              <li id="contenteditbtn">
                <a href="https://github.com/Microsoft/azure-docs/blob/master/articles/guidance/guidance-elasticsearch-tuning-data-ingestion-performance.md" title="Edit This Document" class="button is-primary is-small">
                  <i class="icon icon-editor"></i>Edit
                </a>
              </li>
              
              <li>
                <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" class="button is-primary is-small sharebutton" title="Share This Document"><i class="icon icon-share"></i>Share</a>
                <div class="share-container">
                  
                    <div><a href="https://twitter.com/intent/tweet?original_referer=https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance&amp;text=Tuning%20data%20ingestion%20performance%20for%20Elasticsearch%20on%20Azure%20%7C%20Microsoft%20Docs&amp;tw_p=tweetbutton&amp;url=https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance" class="share-twitter"><i class="icon icon-twitter"></i>Twitter</a></div>
                    <div><a href="https://www.facebook.com/sharer/sharer.php?u=https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance" class="share-facebook"><i class="icon icon-facebook"></i>Facebook</a></div>
                  

                  

                  
                </div>
              </li>
              
              
              <li class="menu">
                <div class="dropdown-container">
                  <div class="dropdown">
                    <label for="theme-selector">Theme</label>
                    <select id="theme-selector">
                      <option value="">Light
                      </option><option value="theme_night">Dark
                    </option></select>
                  </div>
                </div>
              </li>
            </ol>

            <div id="menu-expand">
              <h4><span id="menu-expand-icon">+ </span>Options</h4>
            </div>

            <nav id="side-doc-outline" class="doc-outline" ms.cmpgrp="intopic toc" role="navigation" aria-label="On page navigation">
              <h3 style="display: block;">In this article</h3>
            <ul><li class=""><a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#overview">Overview</a></li><li class=""><a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#node-and-index-design">Node and index design</a></li><li class="selected"><a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#scaling-up-nodes-to-support-large-scale-data-ingestion">Scaling up nodes to support large-scale data ingestion</a></li><li><a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#scaling-out-clusters-to-support-large-scale-data-ingestion">Scaling out clusters to support large-scale data ingestion</a></li><li><a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#tuning-large-scale-data-ingestion">Tuning large-scale data ingestion</a></li><li><a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#best-practices-for-clients-sending-data-to-elasticsearch">Best practices for clients sending data to Elasticsearch</a></li><li><a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#general-guidelines-for-conducting-data-ingestion-performance-testing-with-elasticsearch">General guidelines for conducting data ingestion performance testing with Elasticsearch</a></li><li><a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#summary">Summary</a></li><li><a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#appendix-the-bulk-load-data-ingestion-performance-test">Appendix: the bulk load data ingestion performance test</a></li></ul></nav>

          </div>
        </div>

        <div id="sidebar" ms.cmpgrp="left toc" role="navigation" aria-label="main navigation">
          <div id="sidebarContent" class="fixed" style="top: 18px; width: 288px;">
            <div class="filterHolder"><form class="tocFilter"><input placeholder="Filter" aria-label="Filter" type="search"><a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#" title="clear filter" class="clearInput"></a></form><div class="emptyFilterMessage">No results</div></div>
            <nav class="toc" role="application" style="max-height: 877px;"><ul aria-treegrid="true" class="noSibs"><li aria-expanded="true" aria-treeitem="true"><span data-text="architecture">Architecture</span><ul aria-treegrid="true"><li aria-expanded="false" tabindex="0" aria-treeitem="true"><span data-text="cloud fundamentals">Cloud Fundamentals</span><ul aria-treegrid="true"><li aria-expanded="false" tabindex="0" aria-treeitem="true" class="noSubs"><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-resiliency-overview" data-text="design resilient applications">Design resilient applications</a><ul aria-treegrid="true"><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-resiliency-checklist" data-text="resiliency checklist">Resiliency checklist</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-resiliency-failure-mode-analysis" data-text="failure mode analysis">Failure mode analysis</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/resiliency/resiliency-disaster-recovery-azure-applications" data-text="disaster recovery">Disaster recovery</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/resiliency/resiliency-disaster-recovery-high-availability-azure-applications" data-text="disaster recovery and high availability">Disaster recovery and high availability</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/resiliency/resiliency-high-availability-azure-applications" data-text="high availability">High availability</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/resiliency/resiliency-high-availability-checklist" data-text="high availability checklist">High availability checklist</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/resiliency/resiliency-service-guidance-index" data-text="azure service-specific resiliency guidance">Azure service-specific resiliency guidance</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/resiliency/resiliency-technical-guidance-recovery-data-corruption" data-text="recovery from data corruption or accidental deletion">Recovery from data corruption or accidental deletion</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/resiliency/resiliency-technical-guidance-recovery-local-failures" data-text="recovery from local failures">Recovery from local failures</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/resiliency/resiliency-technical-guidance-recovery-loss-azure-region" data-text="recovery from a region-wide service disruption">Recovery from a region-wide service disruption</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/resiliency/resiliency-technical-guidance-recovery-on-premises-azure" data-text="recovery from on-premises to azure">Recovery from on-premises to Azure</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/resiliency/resiliency-technical-guidance" data-text="azure resiliency technical guidance">Azure resiliency technical guidance</a></li></ul></li></ul></li><li aria-expanded="false" tabindex="0" aria-treeitem="true"><span data-text="reference architectures">Reference Architectures</span><ul aria-treegrid="true"><li aria-expanded="false" tabindex="0" aria-treeitem="true" class="noSubs"><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-ra-compute" data-text="run vm workloads in azure">Run VM workloads in Azure</a><ul aria-treegrid="true"><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-compute-single-vm-linux" data-text="run a linux vm on azure">Run a Linux VM on Azure</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-compute-single-vm" data-text="run a windows vm on azure">Run a Windows VM on Azure</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-compute-multi-vm" data-text="run multiple vms on azure for scalability and availability">Run multiple VMs on Azure for scalability and availability</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-compute-n-tier-vm-linux" data-text="run linux vms for an n-tier architecture">Run Linux VMs for an N-tier architecture</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-compute-n-tier-vm" data-text="run windows vms for an n-tier architecture">Run Windows VMs for an N-tier architecture</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-compute-multiple-datacenters-linux" data-text="run linux vms in multiple regions for high availability">Run Linux VMs in multiple regions for high availability</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-compute-multiple-datacenters" data-text="run windows vms in multiple regions for high availability">Run Windows VMs in multiple regions for high availability</a></li></ul></li><li aria-expanded="false" tabindex="0" aria-treeitem="true" class="noSubs"><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-ra-hybrid-networking" data-text="connect your on-premises network to azure">Connect your on-premises network to Azure</a><ul aria-treegrid="true"><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-hybrid-network-expressroute" data-text="hybrid network architecture with azure expressroute">Hybrid network architecture with Azure ExpressRoute</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-hybrid-network-vpn" data-text="hybrid network architecture with azure and on-premises vpn">Hybrid network architecture with Azure and On-premises VPN</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-hybrid-network-expressroute-vpn-failover" data-text="highly available hybrid network architecture">Highly available hybrid network architecture</a></li></ul></li><li aria-expanded="false" tabindex="0" aria-treeitem="true" class="noSubs"><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-ra-network-security" data-text="protect the cloud boundary in azure">Protect the Cloud Boundary in Azure</a><ul aria-treegrid="true"><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-iaas-ra-secure-vnet-hybrid" data-text="secure hybrid network architecture in azure">Secure hybrid network architecture in Azure</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-iaas-ra-secure-vnet-dmz" data-text="dmz between azure and the internet">DMZ between Azure and the Internet</a></li></ul></li><li aria-expanded="false" tabindex="0" aria-treeitem="true" class="noSubs"><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-ra-identity" data-text="manage identity in azure">Manage identity in Azure</a><ul aria-treegrid="true"><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-identity-aad" data-text="implement azure active directory">Implement Azure Active Directory</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-identity-adds-extend-domain" data-text="extend adds to azure">Extend ADDS to Azure</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-identity-adds-resource-forest" data-text="create an adds resource forest in azure">Create an ADDS resource forest in Azure</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-identity-adfs" data-text="implement adfs in azure">Implement ADFS in Azure</a></li></ul></li><li aria-expanded="false" tabindex="0" aria-treeitem="true" class="noSubs"><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-ra-app-service" data-text="web application architectures for azure app service">Web application architectures for Azure App Service</a><ul aria-treegrid="true"><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-web-apps-basic" data-text="basic web application">Basic web application</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-web-apps-multi-region" data-text="web application with high availability">Web application with high availability</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-web-apps-scalability" data-text="improve scalability in a web application">Improve scalability in a web application</a></li></ul></li></ul></li><li aria-expanded="false" tabindex="0" aria-treeitem="true" class="noSubs"><span data-text="best practices for cloud applications">Best Practices for Cloud Applications</span><ul aria-treegrid="true"><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/best-practices-api-design" data-text="api design guidance">API design guidance</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/best-practices-api-implementation" data-text="api implementation guidance">API implementation guidance</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/best-practices-auto-scaling" data-text="autoscaling guidance">Autoscaling guidance</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/best-practices-availability-checklist" data-text="availability checklist">Availability checklist</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/best-practices-background-jobs" data-text="background jobs guidance">Background jobs guidance</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/best-practices-availability-paired-regions" data-text="azure paired regions">Azure Paired Regions</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/best-practices-caching" data-text="caching guidance">Caching guidance</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/best-practices-cdn" data-text="content delivery network guidance">Content Delivery Network guidance</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/best-practices-data-partitioning" data-text="data partitioning guidance">Data partitioning guidance</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/best-practices-monitoring" data-text="monitoring and diagnostics guidance">Monitoring and diagnostics guidance</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/best-practices-network-security" data-text="microsoft cloud services and network security">Microsoft cloud services and network security</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/best-practices-resource-manager-design-templates" data-text="patterns for designing azure resource manager templates">Patterns for designing Azure Resource Manager templates</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-naming-conventions" data-text="recommended naming conventions for azure resources">Recommended naming conventions for Azure resources</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/best-practices-resource-manager-security" data-text="security considerations for azure resource manager">Security considerations for Azure Resource Manager</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/best-practices-resource-manager-state" data-text="sharing state in azure resource manager templates">Sharing state in Azure Resource Manager templates</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/best-practices-retry-general" data-text="retry general guidance">Retry general guidance</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/best-practices-retry-service-specific" data-text="retry service specific guidance">Retry service specific guidance</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/best-practices-scalability-checklist" data-text="scalability checklist">Scalability checklist</a></li></ul></li><li aria-expanded="true" tabindex="0" aria-treeitem="true"><span data-text="scenario guides">Scenario Guides</span><ul aria-treegrid="true"><li aria-expanded="true" tabindex="0" aria-treeitem="true" class="noSubs"><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch" data-text="elasticsearch on azure guidance">Elasticsearch on Azure Guidance</a><ul aria-treegrid="true"><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-running-on-azure" data-text="run elasticsearch on azure">Run Elasticsearch on Azure</a></li><li class="selectedHolder"><a tabindex="0" class="selected" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance" data-text="tune data ingestion performance">Tune data ingestion performance</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-aggregation-and-query-performance" data-text="tune data aggregation and query performance">Tune data aggregation and query performance</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-configuring-resilience-and-recovery" data-text="configure resilience and recovery">Configure resilience and recovery</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-creating-performance-testing-environment" data-text="create a performance testing environment">Create a performance testing environment</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-implementing-jmeter-test-plan" data-text="implement a jmeter test plan">Implement a JMeter test plan</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-deploying-jmeter-junit-sampler" data-text="deploy a jmeter junit sampler">Deploy a JMeter JUnit sampler</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-running-automated-resilience-tests" data-text="run the automated resiliency tests">Run the automated resiliency tests</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-running-automated-performance-tests" data-text="run the automated performance tests">Run the automated performance tests</a></li></ul></li><li aria-expanded="false" tabindex="0" aria-treeitem="true" class="noSubs"><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-multitenant-identity" data-text="identity management for multitenant applications">Identity management for multitenant applications</a><ul aria-treegrid="true"><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-multitenant-identity-intro" data-text="overview">Overview</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-multitenant-identity-tailspin" data-text="tailspin surveys application">Tailspin Surveys application</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-multitenant-identity-authenticate" data-text="authentication using azure ad and openid connect">Authentication using Azure AD and OpenID Connect</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-multitenant-identity-claims" data-text="claims-based identities">Claims-based identities</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-multitenant-identity-signup" data-text="sign-up and tenant onboarding">Sign-up and tenant onboarding</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-multitenant-identity-app-roles" data-text="application roles">Application roles</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-multitenant-identity-authorize" data-text="role-based and resource-based authorization">Role-based and resource-based authorization</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-multitenant-identity-web-api" data-text="secure a backend web api">Secure a backend web API</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-multitenant-identity-token-cache" data-text="cache access tokens">Cache access tokens</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-multitenant-identity-adfs" data-text="federation with a customer&amp;#39;s ad fs">Federation with a customer's AD FS</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-multitenant-identity-client-assertion" data-text="use client assertion to get access tokens">Use client assertion to get access tokens</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-multitenant-identity-keyvault" data-text="use azure key vault to protect application secrets">Use Azure Key Vault to protect application secrets</a></li><li><a tabindex="0" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-nva-ha" data-text="deploying virtual appliances in high availability">Deploying virtual appliances in high availability</a></li></ul></li></ul></li></ul></li></ul></nav>          
            <div class="pdfDownloadHolder"></div>
          </div>
        </div>

        <div id="menu-nav" class="dropdown-container">
          <div class="dropdown dropdown-full mobilenavi">
            <select><option class="noLink">Architecture</option><option class="noLink">&nbsp;&nbsp;&nbsp;Cloud Fundamentals</option><option value="/en-us/azure/guidance/guidance-resiliency-overview">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Design resilient applications</option><option value="/en-us/azure/guidance/guidance-resiliency-checklist">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Resiliency checklist</option><option value="/en-us/azure/guidance/guidance-resiliency-failure-mode-analysis">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Failure mode analysis</option><option value="/en-us/azure/resiliency/resiliency-disaster-recovery-azure-applications">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Disaster recovery</option><option value="/en-us/azure/resiliency/resiliency-disaster-recovery-high-availability-azure-applications">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Disaster recovery and high availability</option><option value="/en-us/azure/resiliency/resiliency-high-availability-azure-applications">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;High availability</option><option value="/en-us/azure/resiliency/resiliency-high-availability-checklist">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;High availability checklist</option><option value="/en-us/azure/resiliency/resiliency-service-guidance-index">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Azure service-specific resiliency guidance</option><option value="/en-us/azure/resiliency/resiliency-technical-guidance-recovery-data-corruption">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Recovery from data corruption or accidental deletion</option><option value="/en-us/azure/resiliency/resiliency-technical-guidance-recovery-local-failures">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Recovery from local failures</option><option value="/en-us/azure/resiliency/resiliency-technical-guidance-recovery-loss-azure-region">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Recovery from a region-wide service disruption</option><option value="/en-us/azure/resiliency/resiliency-technical-guidance-recovery-on-premises-azure">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Recovery from on-premises to Azure</option><option value="/en-us/azure/resiliency/resiliency-technical-guidance">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Azure resiliency technical guidance</option><option class="noLink">&nbsp;&nbsp;&nbsp;Reference Architectures</option><option value="/en-us/azure/guidance/guidance-ra-compute">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run VM workloads in Azure</option><option value="/en-us/azure/guidance/guidance-compute-single-vm-linux">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run a Linux VM on Azure</option><option value="/en-us/azure/guidance/guidance-compute-single-vm">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run a Windows VM on Azure</option><option value="/en-us/azure/guidance/guidance-compute-multi-vm">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run multiple VMs on Azure for scalability and availability</option><option value="/en-us/azure/guidance/guidance-compute-n-tier-vm-linux">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run Linux VMs for an N-tier architecture</option><option value="/en-us/azure/guidance/guidance-compute-n-tier-vm">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run Windows VMs for an N-tier architecture</option><option value="/en-us/azure/guidance/guidance-compute-multiple-datacenters-linux">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run Linux VMs in multiple regions for high availability</option><option value="/en-us/azure/guidance/guidance-compute-multiple-datacenters">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run Windows VMs in multiple regions for high availability</option><option value="/en-us/azure/guidance/guidance-ra-hybrid-networking">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Connect your on-premises network to Azure</option><option value="/en-us/azure/guidance/guidance-hybrid-network-expressroute">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hybrid network architecture with Azure ExpressRoute</option><option value="/en-us/azure/guidance/guidance-hybrid-network-vpn">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hybrid network architecture with Azure and On-premises VPN</option><option value="/en-us/azure/guidance/guidance-hybrid-network-expressroute-vpn-failover">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Highly available hybrid network architecture</option><option value="/en-us/azure/guidance/guidance-ra-network-security">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Protect the Cloud Boundary in Azure</option><option value="/en-us/azure/guidance/guidance-iaas-ra-secure-vnet-hybrid">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Secure hybrid network architecture in Azure</option><option value="/en-us/azure/guidance/guidance-iaas-ra-secure-vnet-dmz">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DMZ between Azure and the Internet</option><option value="/en-us/azure/guidance/guidance-ra-identity">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Manage identity in Azure</option><option value="/en-us/azure/guidance/guidance-identity-aad">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Implement Azure Active Directory</option><option value="/en-us/azure/guidance/guidance-identity-adds-extend-domain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Extend ADDS to Azure</option><option value="/en-us/azure/guidance/guidance-identity-adds-resource-forest">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create an ADDS resource forest in Azure</option><option value="/en-us/azure/guidance/guidance-identity-adfs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Implement ADFS in Azure</option><option value="/en-us/azure/guidance/guidance-ra-app-service">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Web application architectures for Azure App Service</option><option value="/en-us/azure/guidance/guidance-web-apps-basic">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Basic web application</option><option value="/en-us/azure/guidance/guidance-web-apps-multi-region">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Web application with high availability</option><option value="/en-us/azure/guidance/guidance-web-apps-scalability">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Improve scalability in a web application</option><option class="noLink">&nbsp;&nbsp;&nbsp;Best Practices for Cloud Applications</option><option value="/en-us/azure/best-practices-api-design">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;API design guidance</option><option value="/en-us/azure/best-practices-api-implementation">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;API implementation guidance</option><option value="/en-us/azure/best-practices-auto-scaling">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Autoscaling guidance</option><option value="/en-us/azure/best-practices-availability-checklist">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Availability checklist</option><option value="/en-us/azure/best-practices-background-jobs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Background jobs guidance</option><option value="/en-us/azure/best-practices-availability-paired-regions">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Azure Paired Regions</option><option value="/en-us/azure/best-practices-caching">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Caching guidance</option><option value="/en-us/azure/best-practices-cdn">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Content Delivery Network guidance</option><option value="/en-us/azure/best-practices-data-partitioning">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Data partitioning guidance</option><option value="/en-us/azure/best-practices-monitoring">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Monitoring and diagnostics guidance</option><option value="/en-us/azure/best-practices-network-security">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Microsoft cloud services and network security</option><option value="/en-us/azure/best-practices-resource-manager-design-templates">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Patterns for designing Azure Resource Manager templates</option><option value="/en-us/azure/guidance/guidance-naming-conventions">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Recommended naming conventions for Azure resources</option><option value="/en-us/azure/best-practices-resource-manager-security">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Security considerations for Azure Resource Manager</option><option value="/en-us/azure/best-practices-resource-manager-state">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sharing state in Azure Resource Manager templates</option><option value="/en-us/azure/best-practices-retry-general">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retry general guidance</option><option value="/en-us/azure/best-practices-retry-service-specific">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retry service specific guidance</option><option value="/en-us/azure/best-practices-scalability-checklist">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Scalability checklist</option><option class="noLink">&nbsp;&nbsp;&nbsp;Scenario Guides</option><option value="/en-us/azure/guidance/guidance-elasticsearch">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Elasticsearch on Azure Guidance</option><option value="/en-us/azure/guidance/guidance-elasticsearch-running-on-azure">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run Elasticsearch on Azure</option><option value="/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance" selected="selected">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tune data ingestion performance</option><option value="/en-us/azure/guidance/guidance-elasticsearch-tuning-data-aggregation-and-query-performance">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tune data aggregation and query performance</option><option value="/en-us/azure/guidance/guidance-elasticsearch-configuring-resilience-and-recovery">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Configure resilience and recovery</option><option value="/en-us/azure/guidance/guidance-elasticsearch-creating-performance-testing-environment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create a performance testing environment</option><option value="/en-us/azure/guidance/guidance-elasticsearch-implementing-jmeter-test-plan">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Implement a JMeter test plan</option><option value="/en-us/azure/guidance/guidance-elasticsearch-deploying-jmeter-junit-sampler">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Deploy a JMeter JUnit sampler</option><option value="/en-us/azure/guidance/guidance-elasticsearch-running-automated-resilience-tests">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run the automated resiliency tests</option><option value="/en-us/azure/guidance/guidance-elasticsearch-running-automated-performance-tests">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run the automated performance tests</option><option value="/en-us/azure/guidance/guidance-multitenant-identity">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Identity management for multitenant applications</option><option value="/en-us/azure/guidance/guidance-multitenant-identity-intro">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Overview</option><option value="/en-us/azure/guidance/guidance-multitenant-identity-tailspin">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tailspin Surveys application</option><option value="/en-us/azure/guidance/guidance-multitenant-identity-authenticate">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Authentication using Azure AD and OpenID Connect</option><option value="/en-us/azure/guidance/guidance-multitenant-identity-claims">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Claims-based identities</option><option value="/en-us/azure/guidance/guidance-multitenant-identity-signup">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sign-up and tenant onboarding</option><option value="/en-us/azure/guidance/guidance-multitenant-identity-app-roles">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Application roles</option><option value="/en-us/azure/guidance/guidance-multitenant-identity-authorize">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Role-based and resource-based authorization</option><option value="/en-us/azure/guidance/guidance-multitenant-identity-web-api">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Secure a backend web API</option><option value="/en-us/azure/guidance/guidance-multitenant-identity-token-cache">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cache access tokens</option><option value="/en-us/azure/guidance/guidance-multitenant-identity-adfs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Federation with a customer's AD FS</option><option value="/en-us/azure/guidance/guidance-multitenant-identity-client-assertion">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Use client assertion to get access tokens</option><option value="/en-us/azure/guidance/guidance-multitenant-identity-keyvault">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Use Azure Key Vault to protect application secrets</option><option value="/en-us/azure/guidance/guidance-nva-ha">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Deploying virtual appliances in high availability</option></select>
          </div>
        </div>

        <div id="main" role="main">
          <div id="langDisclaimer" class="disclaimer" style="display:none;"><span class="icon icon-disclaimer"></span><span class="disclaimertext">This content is not available in your language but here is the English version.</span></div>
                    

          
            <h1 id="tuning-data-ingestion-performance-for-elasticsearch-on-azure" sourcefile="articles/guidance/guidance-elasticsearch-tuning-data-ingestion-performance.md" sourcestartlinenumber="21" sourceendlinenumber="21">Tuning data ingestion performance for Elasticsearch on Azure</h1>
            <div id="metadata" ms.cmpgrp="page info">
              <div class="info">
                <div class="meta">
                  
                  <time class="date" datetime="9/22/2016 12:00:00 AM">2016/9/22</time>
                  
                  <span class="reading-time">62 min to read</span>
                  
                  <span class="contributors-text">Contributors</span>
                  <ul class="contributors">
                    
                      
                      
                        <li><a href="https://github.com/dragon119" title="Masashi Narumoto"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/dragon119.png" alt="Masashi Narumoto"></a></li>
                      
                      
                      
                        <li><a href="https://github.com/squillace" title="Ralph Squillace"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/squillace.png" alt="Ralph Squillace"></a></li>
                      
                      
                      
                        <li><a href="https://github.com/bennage" title="Christopher Bennage"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/bennage.png" alt="Christopher Bennage"></a></li>
                      
                      
                      
                        <li><a href="https://github.com/cfarre" title="Carlos Farre"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/cfarre.png" alt="Carlos Farre"></a></li>
                      
                      
                                                            
                  </ul>
                  
                </div>
                
              </div>
            </div>

            <nav id="center-doc-outline" class="doc-outline" ms.cmpgrp="intopic toc" role="navigation" aria-label="On page navigation">
              <h3 style="display: block;">In this article</h3>
            <ul class="lf-text-block lf-block" data-lf-anchor-id="8ff57b284d3de8f180c510e7c96046f4:0"><li><a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#overview">Overview</a></li><li><a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#node-and-index-design">Node and index design</a></li><li><a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#scaling-up-nodes-to-support-large-scale-data-ingestion">Scaling up nodes to support large-scale data ingestion</a></li><li><a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#scaling-out-clusters-to-support-large-scale-data-ingestion">Scaling out clusters to support large-scale data ingestion</a></li><li><a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#tuning-large-scale-data-ingestion">Tuning large-scale data ingestion</a></li><li><a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#best-practices-for-clients-sending-data-to-elasticsearch">Best practices for clients sending data to Elasticsearch</a></li><li><a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#general-guidelines-for-conducting-data-ingestion-performance-testing-with-elasticsearch">General guidelines for conducting data ingestion performance testing with Elasticsearch</a></li><li><a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#summary">Summary</a></li><li><a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#appendix-the-bulk-load-data-ingestion-performance-test">Appendix: the bulk load data ingestion performance test</a></li><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8ff57b284d3de8f180c510e7c96046f4:0">+
</a>
</span></ul></nav>
          

          <div><div class="content">
<!-- BEGIN INCLUDE: Include content from &quot;includes/guidance-pnp-header-include.md&quot; --><p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:0"><a href="http://aka.ms/mspnp"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/pnp-logo.png" alt="patterns &amp; practices"></a><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:0">+
</a>
</span></p>
<!--END INCLUDE --><p class="lf-text-block lf-block" data-lf-anchor-id="9ee1158b41e096227404ece6e37f2ce0:0">This article is <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch">part of a series</a>. <span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="9ee1158b41e096227404ece6e37f2ce0:0">+
</a>
</span></p>
<h2 id="overview">Overview</h2>
<p class="lf-text-block lf-block" data-lf-anchor-id="07e42c6d5d9e6099316da8076f234376:0">An important aspect when creating any search database is to determine the best way to structure the system to ingest searchable data quickly and efficiently. The considerations surrounding this requirement
concern not only the choice of infrastructure on which you implement the system, but also the various
optimizations that you can use to help ensure that the system can keep up with the expected levels of
data influx. <span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="07e42c6d5d9e6099316da8076f234376:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8fd07d0bdfb94c9a3189e8466b044655:0">This document describes the deployment and configuration options that you should consider
for implementing an Elasticsearch cluster that expects a high rate of data ingestion. To provide solid
data for illustrative purposes, this document also shows the results of benchmarking various
configurations using a simple high-volume data ingestion workload. The details of the workload are
described in the <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#appendix-the-bulk-load-data-ingestion-performance-test">Appendix</a> at the end of this
document.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8fd07d0bdfb94c9a3189e8466b044655:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="85556d0bcdba207729cbb9de7f654a79:0">The purpose of the benchmarks was not to generate absolute performance figures for running Elasticsearch
or even to recommend a particular topology, but rather to illustrate methods that you can use for
assessing performance, sizing data nodes, and implementing clusters that can meet your own performance
requirements. <span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="85556d0bcdba207729cbb9de7f654a79:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="4795ae09839b41b326cb9ed6d5297979:0">When sizing your own systems, it is important to test performance thoroughly based on your
own workloads. Gather telemetry that enables you to obtain information about the optimal hardware
configuration to use, and the horizontal scaling factors that you should consider. In particular, you
should:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="4795ae09839b41b326cb9ed6d5297979:0">+
</a>
</span></p>
<ul class="lf-text-block lf-block" data-lf-anchor-id="91bd1c237faea4a93dc9cc474f020e55:0">
<li>Consider the overall size of the payload sent and not just the number of items in each bulk insert
request. A smaller number of large bulk items in each request could be more optimal than a larger number,
depending on the resource available to process each request.</li>
<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="91bd1c237faea4a93dc9cc474f020e55:0">+
</a>
</span></ul>
<p class="lf-text-block lf-block" data-lf-anchor-id="0dd509575c09e4e93b65a94779305743:0">You can monitor the effects of varying the bulk insert request by using <a href="https://www.elastic.co/products/marvel">Marvel</a>, using the
<em>readbytes</em>/<em>writebytes</em> I/O counters with <a href="https://jmeter.apache.org/">JMeter</a>, and operating system tools such as <em>iostat</em> and
<em>vmstat</em> on Ubuntu. <span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="0dd509575c09e4e93b65a94779305743:0">+
</a>
</span></p>
<ul class="lf-text-block lf-block" data-lf-anchor-id="8fdcad6f57bc22b93be9f94743246a55:0">
<li>Conduct performance testing and gather telemetry to measure CPU processing and I/O wait times, disk
latency, throughput, and response times. This information can help to identify potential bottlenecks and
assess the costs and benefits of using premium storage. Bear in mind that CPU and disk utilization might
not be even across all nodes depending on the way in which shards and replicas are distributed across the
cluster (some nodes can contain more shards than others).</li>
<li>Consider how the number of concurrent requests for your workload will be distributed across the cluster
and assess the impact of using different numbers of nodes to handle this workload.</li>
<li>Consider how workloads might grow as the business expands. Assess the impact of this growth on the
costs of the VMs and storage used by the nodes.</li>
<li>Recognize that using a cluster with a larger number of nodes with regular disks might be more
economical if your scenario requires a high number of requests and the disk infrastructure maintains
throughput that satisfies your service level agreements (SLAS). However, increasing the number of nodes can introduce overhead in
the form of additional inter-node communications and synchronization.</li>
<li>Understand that a higher number of cores per node may generate more disk traffic as more documents can
be processed. In this case, measure disk utilization to assess whether the I/O subsystem might become a
bottleneck and determine the benefits of using premium storage.</li>
<li>Test and analyze the trade-offs with a higher number of nodes with fewer cores versus fewer nodes with
more cores. Keep in mind that the increasing the number of replicas escalates the demands on the cluster
and may require you to add nodes.</li>
<li>Consider that using ephemeral disks might require that indexes have to be recovered more frequently.</li>
<li>Measure storage volume usage to assess capacity and under utilization of storage. For example, in our
scenario we stored 1.5 billion documents using 350GB storage.</li>
<li>Measure the transfer rates for your workloads and consider how close you are likely to get to the total
I/O rate transfer limit for any given storage account in which you have created virtual disks.</li>
<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8fdcad6f57bc22b93be9f94743246a55:0">+
</a>
</span></ul>
<h2 id="node-and-index-design">Node and index design</h2>
<p class="lf-text-block lf-block" data-lf-anchor-id="07d53d68c43f2eb0f0c9b46249480255:0">In a system that must support large-scale data ingestion, you ask the following questions:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="07d53d68c43f2eb0f0c9b46249480255:0">+
</a>
</span></p>
<ul class="lf-text-block lf-block" data-lf-anchor-id="8fd46d2b4dbe2cf8214988d7432166f5:0">
<li><strong>Is the data fast-moving or relatively static?</strong> The more dynamic the data, the greater the
maintenance overhead for Elasticsearch. If the data is replicated, each replica is maintained
synchronously. Fast-moving data that has only a limited lifespan or that can easily be reconstructed
might benefit from disabling replication altogether. This option is discussed in the section
<a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#tuning-large-scale-data-ingestion">Tuning large-scale data ingestion.</a></li>
<li><p><strong>How up-to-date do you require the data discovered by searching to be?</strong> To maintain performance,
Elasticsearch buffers as much data in memory as it can. This means that not all changes are immediately
available for search requests. The process Elasticsearch uses to persist changes and make them visible
is described in <a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/translog.html#translog">Making Changes Persistent</a>. </p>
<p>  The rate data becomes visible is governed by the <em>refresh_interval</em> setting of the relevant
index. By default, this interval is set at 1 second. However, not every situation requires refreshes to
occur this quickly. For example, indexes recording log data might need to cope with a rapid and continual
influx of information which needs to be ingested quickly, but does not require the information to be
immediately available for querying. In this case, consider reducing the frequency of refreshes. This
feature is also described in the section <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#tuning-large-scale-data-ingestion">Tuning large-scale data ingestion.</a></p>
</li>
<li><p><strong>How quickly is the data likely to grow?</strong> Index capacity is determined by the number of shards
specified when the index is created. To allow for growth, specify an adequate number of shards (the
default is five). If the index is initially created on a single node, all five shards will be located on
that node, but as the volume of data grows additional nodes can be added and Elasticsearch will
dynamically distribute shards across nodes. However, each shard has an overhead. All searches in an index
will query all shards, so creating a large number of shards for a small amount of data can slow data
retrievals (avoid the <a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/kagillion-shards.html">Kagillion shards</a> scenario).</p>
<p>  Some workloads (such as logging) might create a new index each day, and if you observe that the number of
shards is insufficient for the volume of data, you should change it prior to creating the next index
(existing indexes will be unaffected). If you must distribute existing data across more shards, then one
option is to reindex the information. Create a new index with the appropriate configuration and copy the
data into it. This process can be made transparent to applications by using <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-aliases.html">index aliases</a>.</p>
</li>
<li><strong>Does data need to be partitioned between users in a multitenancy scenario?</strong> You can create separate
indexes for each user, but this can be expensive if each user only has a moderate amount of data. Instead,
consider creating <a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/shared-index.html">shared indexes</a> and use <a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/faking-it.html">aliases based on filters</a> to direct requests 
to the per-user data. To keep the data for a user together in the same shard, override the default
routing configuration for the index and route data based on some identifying attribute of the user.</li>
<li><strong>Is data long or short-lived?</strong> If you are using a set of Azure VMs to implement an Elasticsearch
cluster, you can store ephemeral data on a local resource system disk rather than an attached drive.
Using a VM SKU that utilizes an SSD for the resource disk can improve I/O performance. However, any
information held on the resource disk is temporary and may be lost if the VM restarts (see the section
When Will the Data on a Temporary Drive Be Lost in <a href="http://blogs.msdn.com/b/mast/archive/2013/12/07/understanding-the-temporary-drive-on-windows-azure-virtual-machines.aspx">Understanding the temporary drive on Microsoft Azure Virtual Machines</a> for more details). If you need to retain data between restarts, create data disks to hold this information and attach them to the VM.</li>
<li><p><strong>How active is the data?</strong> Azure VHDs are subject to throttling if the amount of read/write activity
exceeds specified parameters (currently 500 input/output operations per second (IOPS) for a disk attached to a Standard Tier VM, and 5000 IOPS
for a Premium Storage disk). </p>
<p>  To reduce the chances of throttling and increase I/O performance, consider creating multiple data disks
for each VM and configure Elasticsearch to stripe data across these disks as described in the <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-running-on-azure#disk-and-file-system-requirements">Disk and file system requirements</a>.</p>
<p>  You should select a hardware configuration that helps to minimize the number of disk I/O
read operations by ensuring that sufficient memory is available to cache frequently accessed data. This
is described in the <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-running-on-azure#memory-requirements">Memory requirements</a> section of  Running Elasticsearch on Azure.</p>
</li>
<li><p><strong>What type of workload will each node need to support?</strong> Elasticsearch benefits from having memory
available to cache data in (in the form of the file system cache) and for the JVM heap as described
in the <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-running-on-azure#memory-requirements">Memory requirements</a> section of Running Elasticsearch on Azure. </p>
<p>  The amount of memory, number of CPU cores, and quantity of available disks are set by the
SKU of the virtual machine. For more information, see <a href="http://azure.microsoft.com/pricing/details/virtual-machines/">Virtual Machines Pricing</a> on the Azure website.</p>
</li>
<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8fd46d2b4dbe2cf8214988d7432166f5:0">+
</a>
</span></ul>
<h3 id="virtual-machine-options">Virtual machine options</h3>
<p class="lf-text-block lf-block" data-lf-anchor-id="89a4a8ebcf9641b81182bdd64f654fb9:0">You can provision VMs in Azure using a number of different SKUs. The resources available to an Azure VM
depend on SKU selected. Each SKU offers a different mix of cores, memory, and storage. You need to select
an appropriate size of VM that will handle the expected workload but that will also prove cost-effective.
Start with a configuration that will meet your current requirements (perform benchmarking to test, as
described later in this document). You can scale a cluster later by adding more VMs running Elasticsearch
nodes.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="89a4a8ebcf9641b81182bdd64f654fb9:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="d7c46ca1fd9ac4f92bcbc8ce450344b1:0"><a href="https://docs.microsoft.com/en-us/azure/virtual-machines/virtual-machines-linux-sizes?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json">Sizes for Virtual Machines</a> on the Azure website documents the
various options and SKUs available for VMs.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d7c46ca1fd9ac4f92bcbc8ce450344b1:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="6dc40c09ce994e9b2a81a953e5214f75:0">You should match the size and resources of a VM to the role that nodes running on the VM will perform.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="6dc40c09ce994e9b2a81a953e5214f75:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="044471280418968000c19116402206c8:0">For a data node:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="044471280418968000c19116402206c8:0">+
</a>
</span></p>
<ul class="lf-text-block lf-block" data-lf-anchor-id="8dc46c6f5fbb6e982dc9b9c743034e55:0">
<li><p>Allocate up to 30 GB or 50% of the available RAM memory to the Java heap, whichever is the lower. Leave
the remainder to the operating system to use for caching files. If you are using Linux, you can specify
the amount of memory to allocate to the Java heap by setting the ES_HEAP_SIZE environment variable
before running Elasticsearch. Alternatively, if you are using Windows or Linux, you can stipulate memory
size with the <em>Xmx</em> and <em>Xms</em> parameters when you start Elasticsearch.</p>
<p>  Depending on the workload, fewer large VMs may not be as effective for performance as using a larger
number of moderately sized VMs. You should conduct tests that can measure the tradeoffs between the
additional network traffic and maintenance involved versus the costs of increasing the number of cores
available and the reduced disk contention on each node.</p>
</li>
<li>Use premium storage for storing Elasticsearch data. This is discussed in more detail in the <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#storage-options">Storage options</a> section.</li>
<li>Use multiple disks of the same size and stripe data across these disks. The SKU of your VMs will dictate the maximum number of data disks that you can attach. For more information, see <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-running-on-azure#disk-and-file-system-requirements">Disk and file system requirements</a>.</li>
<li>Use a multi-core CPU SKU with at least 2 cores, preferably 4 or more. </li>
<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8dc46c6f5fbb6e982dc9b9c743034e55:0">+
</a>
</span></ul>
<p class="lf-text-block lf-block" data-lf-anchor-id="0440410884c296852cc1911646030461:0">For a client node:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="0440410884c296852cc1911646030461:0">+
</a>
</span></p>
<ul class="lf-text-block lf-block" data-lf-anchor-id="8fd4ed2d479a36bd3dcd89c75f216271:0">
<li>Do not allocate disk storage for Elasticsearch data, dedicated clients do not store data on disk.</li>
<li>Ensure that adequate memory is available to handle workloads. Bulk insert requests are read into memory
prior to the data being sent to the various data nodes, and the results of aggregations and queries are
accumulated in memory before being returned to the client application. Benchmark your own workloads and
monitor memory use by using a tool such as Marvel or the <a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/_monitoring_individual_nodes.html#_jvm_section">JVM information</a> returned by using the <em>node/stats</em> API (<code>GET _nodes/stats</code>) to assess the optimal requirements.  In particular, monitor the <em>heap_used_percent</em> metric for each node and aim to keep the
heap size below 75% of the space available.</li>
<li><p>Ensure that sufficient CPU cores are available to receive and process the expected volume of requests.
Requests are queued as they are received prior to processing, and the volume of items that can be queued
is a function of the number of CPU cores on each node. You can monitor the queue lengths by using the
data in the <a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/_monitoring_individual_nodes.html#_threadpool_section">Threadpool information</a> returned by using the node/stats API. </p>
<p>  If the <em>rejected</em> count for a queue indicates that requests are being refused, this indicates
  that the cluster is starting to bottleneck. This may be due to CPU bandwidth, but may also be due to
  other factors such as lack of memory or slow I/O performance, so use this information in conjunction
  with other statistics to help determine the root cause.</p>
<p>  Client nodes may or may not be necessary, depending on your workloads. Data ingestion workloads tend
  not to benefit from using dedicated clients, whereas some searches and aggregations can run more
  quickly. Be prepared to benchmark your own scenarios.</p>
<p>  Client nodes are primarily useful for applications that use the Transport Client API to connect to
  the cluster. You can also use the Node Client API, which dynamically creates a dedicated client for
  the application, using the resources of the application host environment. If your applications use
  the Node Client API, then it may not be necessary for your cluster to contain preconfigured dedicated
  client nodes. </p>
<p>  However, be aware that a node created using the Client Node API is a first-class member
  of the cluster and as such participates in the network chatter with other nodes. Frequently starting
  and stopping client nodes can create unnecessary noise across the entire cluster.</p>
</li>
<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8fd4ed2d479a36bd3dcd89c75f216271:0">+
</a>
</span></ul>
<p class="lf-text-block lf-block" data-lf-anchor-id="044051018642049124c1910242060640:0">For a master node:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="044051018642049124c1910242060640:0">+
</a>
</span></p>
<ul class="lf-text-block lf-block" data-lf-anchor-id="8d74dd0f5b9ecdc82c09a8c743217215:0">
<li>Do not allocate disk storage for Elasticsearch data, dedicated master nodes do not store data on disk.</li>
<li>CPU requirements should be minimal.</li>
<li>Memory requirements depend on the size of the cluster. Information about the state of the cluster is 
retained in memory. For small clusters the amount of memory required is minimal, but for a large, highly
active cluster where indexes are being created frequently and shards moving around, the amount of state
information can grow significantly. Monitor the JVM heap size to determine whether you need to add more
memory.</li>
<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8d74dd0f5b9ecdc82c09a8c743217215:0">+
</a>
</span></ul>
<div class="NOTE alert"><h5>Note</h5><p class="lf-text-block lf-block" data-lf-anchor-id="8b9574a39fbea8f838cbad6657116a50:0">For cluster reliability, always create multiple master nodes to and configure the
remaining nodes to avoid the possibility of a split brain occurring. Ideally, there should be an
odd number of master nodes. This topic is described in more detail in <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-configuring-resilience-and-recovery">Configuring resilience and recovery on Elasticsearch on Azure</a>.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8b9574a39fbea8f838cbad6657116a50:0">+
</a>
</span></p>
</div>
<h3 id="storage-options">Storage options</h3>
<p class="lf-text-block lf-block" data-lf-anchor-id="e0dde5ab75a320b937e339e695c54e7d:0">There are a number of storage options available on Azure VMs with different trade-offs affecting cost, performance, availability, and recovery that you need to consider carefully.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="e0dde5ab75a320b937e339e695c54e7d:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="85d41d4b4e1eeca9f8ed3d3e69264e71:0">Note that you should store Elasticsearch data on dedicated data disks.  This will help to reduce
contention with the operating system and ensure that large volumes of Elasticsearch I/O do not compete
with operating system functions for I/O resources.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="85d41d4b4e1eeca9f8ed3d3e69264e71:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="03d86c0947b414be26a919df7f005f31:0">Azure disks are subject to performance constraints. If you find that a cluster undergoes periodic bursts
of activity then I/O requests may be throttled. To help prevent this, tune your design to balance the
document size in Elasticsearch against the volume of requests likely to be received by each disk.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="03d86c0947b414be26a919df7f005f31:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="c72c690029ab452b2847b9d7c1114de4:0">Disks based on standard storage support a maximum request rate of 500 IOPS whereas disks based on premium
storage can operate at up to 5,000 IOPS, depending on the size of the data disks. Premium storage disks are only available for the DS and GS
series of VMs. To find the maximum disk IOPS by VM size, see <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/virtual-machines-linux-sizes?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json">Sizes for virtual machines in Azure</a>. Performance on premium storage is determined by the VM size together with disk size allocation. For more information, see <a href="https://docs.microsoft.com/en-us/azure/storage/storage-premium-storage">Premium Storage: High-Performance Storage for Azure Virtual Machine Workloads</a>.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="c72c690029ab452b2847b9d7c1114de4:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="87763e38f97fbb62819d2ed770346fd0:0"><strong>Persistent data disks</strong><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="87763e38f97fbb62819d2ed770346fd0:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="e14c28ce43bb43b4804cadd753317d51:0">Persistent data disks are VHDs that are backed by Azure Storage. If the VM needs to be recreated after a
major failure, existing VHDs can be easily attached to the new VM. VHDs can be created based on standard
storage (spinning media) or premium storage (SSDs). If you wish to use SSDs you must create VMs using the
DS series or better. DS machines cost the same as the equivalent D-series VMs, but you are charged extra
for using premium storage.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="e14c28ce43bb43b4804cadd753317d51:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="cfdc4c624d6e23e2e00d1ed4d1f2e6cb:0">In cases where the maximum transfer rate per disk is insufficient to support the expected workload,
consider either creating multiple data disks and allow Elasticsearch to <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-running-on-azure#disk-and-file-system-requirements">stripe data across these disks</a>, or implement system level <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/virtual-machines-linux-configure-raid?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json">RAID 0 striping using virtual disks</a>.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="cfdc4c624d6e23e2e00d1ed4d1f2e6cb:0">+
</a>
</span></p>
<div class="NOTE alert"><h5>Note</h5><p class="lf-text-block lf-block" data-lf-anchor-id="83c02c443198a0233784cbcfc325c851:0">Experience within Microsoft has shown that using RAID 0 is particularly beneficial for
smoothing out the I/O effects of <em>spiky</em> workloads that generate frequent bursts of activity.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="83c02c443198a0233784cbcfc325c851:0">+
</a>
</span></p>
</div>
<p class="lf-text-block lf-block" data-lf-anchor-id="dccc6d560d9a15a02e8db9475223a453:0">Use premium locally redundant (or locally redundant for low-end or QA workloads) storage for the 
storage account holding the disks; replicating across geographies and zones is not required for
Elasticsearch high availability. <span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="dccc6d560d9a15a02e8db9475223a453:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="92228010886420128084180080045803:0"><strong>Ephemeral disks</strong><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="92228010886420128084180080045803:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8f4ce44179fd3a7ab101f9c7e9057f70:0">Using persistent disks based on SSDs requires creating VMs that support premium storage. This has a price
implication. Using the local ephemeral disk to hold Elasticsearch data can be a cost effective solution
for moderately sized nodes requiring up to approximately 800GB of storage. On the Standard-D series of
VMs, ephemeral disks are implemented using SSDs which provide far greater performance and much lower
latency than ordinary disks<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8f4ce44179fd3a7ab101f9c7e9057f70:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="bdcc6c485f8b62fafb40f14767154f64:0">When using Elasticsearch, the performance can be equivalent to using premium storage without incurring
the cost – see the section <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#addressing-disk-latency-issues">Addressing disk latency issues</a> for more
information.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="bdcc6c485f8b62fafb40f14767154f64:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8be42429bf9142da2f08f86541022b77:0">The size of the VM limits the amount of space available in ephemeral storage as described in the blog post
<a href="https://azure.microsoft.com/blog/d-series-performance-expectations/">D-Series Performance Expectations</a>.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8be42429bf9142da2f08f86541022b77:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="886d849a85b128bea8249967822f6f24:0">For example, a Standard_D1 VM provides 50GB of ephemeral storage, a Standard_D2 VM has 100GB of ephemeral storage, and a Standard_D14 VM provides 800GB of ephemeral space. For clusters where nodes only require this amount of space, using a D-series VM with ephemeral storage can be cost effective.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="886d849a85b128bea8249967822f6f24:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8dc46d29c5b9c4b0314989c745016673:0">You must balance the increased throughput available with ephemeral storage against the time and costs
involved in recovering this data after a machine restart. The contents of the ephemeral disk are lost if
the VM is moved to a different host server, if the host is updated, or if the host experiences a hardware
failure. If the data itself has a limited lifespan then this data loss might be tolerable. For
longer-lived data, it may be possible to rebuild an index or recover the missing information from a
backup. It is possible to minimize the potential for loss by using replicas held on other VMs.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8dc46d29c5b9c4b0314989c745016673:0">+
</a>
</span></p>
<div class="NOTE alert"><h5>Note</h5><p class="lf-text-block lf-block" data-lf-anchor-id="ad457d285d9aae893dcd1cf74d23a6e0:0">Do not use a <strong>single</strong> VM to hold critical production data. If the node fails,
all of the data is unavailable. For critical information, ensure that data is replicated on at least
one other node.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="ad457d285d9aae893dcd1cf74d23a6e0:0">+
</a>
</span></p>
</div>
<p class="lf-text-block lf-block" data-lf-anchor-id="4500202832a40448000240d00443c581:0"><strong>Azure files</strong><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="4500202832a40448000240d00443c581:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8d41ea2a3fd762d66069388617c04994:0">The <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx">Azure File Service</a> provides shared file access using Azure Storage. You can create file shares that you can then mount on Azure VMs. Multiple VMs can mount the same file share, enabling them to access the same data.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8d41ea2a3fd762d66069388617c04994:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8d357d02473e38bf32cd859e1b0c0efb:0">For performance reasons, it is not recommended that you use file shares for holding Elasticsearch data that does not need to be shared across nodes, regular data disks are more suited to this purpose. File shares can be used for creating Elasticsearch <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-shadow-replicas.html">shadow replica indexes</a>. However, this feature is currently experimental and should not be implemented in a production environment at this time. For this reason, shadow indexes are not considered further in this guidance.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8d357d02473e38bf32cd859e1b0c0efb:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="91c02480b800040805186a4004608404:0"><strong>Network options</strong><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="91c02480b800040805186a4004608404:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="a7846c0bed3a2e5a25cb2d635723c9e5:0">Azure implements a shared networking scheme. VMs utilizing the same hardware racks compete for network resources. Therefore available network bandwidth can vary according to the time of day and the daily cycle of work running on VMs sharing the same physical network infrastructure. You have little control over these factors. It is important to understand that network performance is likely to fluctuate over time, so set user expectations accordingly.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="a7846c0bed3a2e5a25cb2d635723c9e5:0">+
</a>
</span></p>
<h2 id="scaling-up-nodes-to-support-large-scale-data-ingestion">Scaling up nodes to support large-scale data ingestion</h2>
<p class="lf-text-block lf-block" data-lf-anchor-id="ae9c6fef6fffe030b8473de7d9617fb5:0">You can build Elasticsearch clusters using reasonably moderate hardware, and then scale up or scale out
as the volume of data grows and the number of requests increases. With Azure, you scale-up by running on
bigger and more expensive VMs, or you can scale-out by using additional smaller and cheaper VMs. <span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="ae9c6fef6fffe030b8473de7d9617fb5:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="9183e5a345b2a4b80fc399964363f669:0">You might also perform a combination of both strategies. There is no one-size-fits-all solution for all
scenarios, so to assess the best approach for any given situation you need to be prepared to undertake a
series performance tests.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="9183e5a345b2a4b80fc399964363f669:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8bc43dafcf9b86f93301a843e10f6a75:0">This section is concerned with the scale-up approach, scaling out is discussed in the section
<a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#scaling-out-conclusions">Scaling out: conclusions</a>.
This section describes the results of a series of benchmarks that were performed against a set of
Elasticsearch clusters containing VMs of varying sizes. The clusters were designated as small, medium,
and large. The following table summarizes the resources allocated to the VMs in each cluster.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8bc43dafcf9b86f93301a843e10f6a75:0">+
</a>
</span></p>
<table>
<thead>
<tr>
<th>Cluster</th>
<th>VM SKU</th>
<th>Number of cores</th>
<th>Number of data disks</th>
<th>RAM</th>
</tr>
</thead>
<tbody>
<tr>
<td>Small</td>
<td>Standard D2</td>
<td>2</td>
<td>4</td>
<td>7GB</td>
</tr>
<tr>
<td>Medium</td>
<td>Standard D3</td>
<td>4</td>
<td>8</td>
<td>14GB</td>
</tr>
<tr>
<td>Large</td>
<td>Standard D4</td>
<td>8</td>
<td>16</td>
<td>28GB</td>
</tr>
</tbody>
</table>
<p class="lf-text-block lf-block" data-lf-anchor-id="8f74ed19df1ebadaa94da9d779047398:0">Each Elasticsearch cluster contained 3 data nodes. These data nodes handled client requests as well as
handling data processing. Separate client nodes were not used because they offered little benefit to the
data ingestion scenario used by the tests. The cluster also contained three master nodes, one of which
was elected by Elasticsearch to coordinate the cluster.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8f74ed19df1ebadaa94da9d779047398:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8f442c4def9966d22b21ce4369070257:0">The tests were performed using Elasticsearch 1.7.3. The tests were initially performed on clusters
running Ubuntu Linux 14.0.4, and then repeated using Windows Server 2012. The details of the workload
performed by the tests are described in the <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#appendix-the-bulk-load-data-ingestion-performance-test">Appendix</a>.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8f442c4def9966d22b21ce4369070257:0">+
</a>
</span></p>
<h3 id="data-ingestion-performance--ubuntu-linux-1404">Data ingestion performance – Ubuntu Linux 14.0.4</h3>
<p class="lf-text-block lf-block" data-lf-anchor-id="97d46d457f9a04d32a49f843e5024267:0">The following table summarizes the overall results of running the tests for two hours for each configuration:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="97d46d457f9a04d32a49f843e5024267:0">+
</a>
</span></p>
<table>
<thead>
<tr>
<th>Configuration</th>
<th>Sample count</th>
<th>Average response time (ms)</th>
<th>Throughput (operations/s)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Small</td>
<td>67057</td>
<td>636</td>
<td>9.3</td>
</tr>
<tr>
<td>Medium</td>
<td>123482</td>
<td>692</td>
<td>17.2</td>
</tr>
<tr>
<td>Large</td>
<td>197085</td>
<td>839</td>
<td>27.4</td>
</tr>
</tbody>
</table>
<p class="lf-text-block lf-block" data-lf-anchor-id="8fd42d09473d28bb39c9b84b770456f3:0">The throughput and number of samples processed for the three configurations are in the approximate ratio
1:2:3. However, the resources available in terms of memory, CPU cores, and disks have the ratio 1:2:4. It
was felt to be worth investigating the low-level performance details of the nodes in the cluster to
assess why this might be the case. This information can help to determine whether there are limits to
scaling up and when it may be better to consider scaling out. <span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8fd42d09473d28bb39c9b84b770456f3:0">+
</a>
</span></p>
<h3 id="determining-limiting-factors-network-utilization">Determining limiting factors: network utilization</h3>
<p class="lf-text-block lf-block" data-lf-anchor-id="8bf42c6bdf9a2ed72d09e84745014355:0">Elasticsearch is dependent on having sufficient network bandwidth to support the influx of client
requests as well as the synchronization information that flows between nodes in the cluster. As
highlighted earlier, you have limited control over the bandwidth availability, which depends on many
variables such as the datacenter in use, and the current network load of other VMs sharing the same
network infrastructure. However, it is still worth examining the network activity for each cluster to verify that the volume of traffic is not excessive. The graph below shows a comparison of the
network traffic received by node 2 in each of the clusters (the volumes for the other nodes in each
cluster was very similar).<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8bf42c6bdf9a2ed72d09e84745014355:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:1"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/data-ingestion-image1.png" alt=""><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:1">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8b34626d5f1e36d78f4171476402029b:0">The average bytes received per second for node 2 in each cluster configuration over the two hour period
were as follows:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8b34626d5f1e36d78f4171476402029b:0">+
</a>
</span></p>
<table>
<thead>
<tr>
<th>Configuration</th>
<th>Average number of bytes received/sec</th>
</tr>
</thead>
<tbody>
<tr>
<td>Small</td>
<td>3993640.3</td>
</tr>
<tr>
<td>Medium</td>
<td>7311689.9</td>
</tr>
<tr>
<td>Large</td>
<td>11893874.2</td>
</tr>
</tbody>
</table>
<p class="lf-text-block lf-block" data-lf-anchor-id="8f113d6d7fac5c981a49ec4755412f57:0">The tests were conducted while the system was running in <strong>steady state</strong>. In situations where index
rebalancing or node recovering is occurring, data transmissions between nodes holding primary and replica
shards can generate significant network traffic. The effects of this process are described more in the
document <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-configuring-resilience-and-recovery">Configuring resilience and recovery on Elasticsearch on Azure</a>.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8f113d6d7fac5c981a49ec4755412f57:0">+
</a>
</span></p>
<h3 id="determining-limiting-factors-cpu-utilization">Determining limiting factors: CPU utilization</h3>
<p class="lf-text-block lf-block" data-lf-anchor-id="81ddc5254fc210bab9c0c9c76732bde1:0">The rate at which requests are handled is at least partially governed by the available processing
capacity. Elasticsearch accepts bulk insert requests on the bulk insert queue. Each node has a set of
bulk insert queues determined by the number of available processors. By default, there is one queue for
each processor and each queue can hold up to 50 outstanding requests before they will start to be
rejected. <span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="81ddc5254fc210bab9c0c9c76732bde1:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="1f9dad2947991edb284f89c64712fe41:0">Applications should send requests at a rate that does not cause the queues to overspill. The
number of items in each queue at any one time is going to be a function of the rate at which requests are
sent by client applications and the rate at which these same requests are retrieved and processed by
Elasticsearch. For this reason, one important statistic captured concerns the error rate summarized in
the following table.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="1f9dad2947991edb284f89c64712fe41:0">+
</a>
</span></p>
<table>
<thead>
<tr>
<th>Configuration</th>
<th>Total samples</th>
<th>Error count</th>
<th>Error rate</th>
</tr>
</thead>
<tbody>
<tr>
<td>Small</td>
<td>67057</td>
<td>0</td>
<td>0.00%</td>
</tr>
<tr>
<td>Medium</td>
<td>123483</td>
<td>1</td>
<td>0.0008%</td>
</tr>
<tr>
<td>Large</td>
<td>200702</td>
<td>3617</td>
<td>1.8 %</td>
</tr>
</tbody>
</table>
<p class="lf-text-block lf-block" data-lf-anchor-id="877d2d2df4132c12a80ccdcba3d3cac1:0">Each of these errors was caused by the following Java exception:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="877d2d2df4132c12a80ccdcba3d3cac1:0">+
</a>
</span></p>
<div class="codeHeader "><div class="copyBtn">Copy</div><div class="labelHolder">&nbsp;</div></div><pre><code>org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$PrimaryPhase$1@75a30c1b]; ]
[219]: index [systembase], type [logs], id [AVEAioKb2TRSNcPa_8YG], message [RemoteTransportException[[esdatavm2][inet[/10.0.1.5:9300]][indices:data/write/bulk[s]]]; nested: EsRejectedExecutionException[rejected execution (queue capacity 50)
</code></pre><p class="lf-text-block lf-block" data-lf-anchor-id="8f608d296fd12c993ba2a04767266e61:0">Increasing the number of queues and/or the length of each queue might reduce the number of errors, but
this approach can only cope with bursts of short duration. Doing this while running a sustained series of
data ingestion tasks will simply delay the point at which errors start occurring. Furthermore, this
change will not improve the throughput and will likely harm the response time of client applications as
requests will be queued for longer before being processed.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8f608d296fd12c993ba2a04767266e61:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="0784b569c7980e9429c9f55f66450e5d:0">The default index structure of 5 shards with 1 replica (10 shards in all), results in a modest imbalance
in load between the nodes in a cluster, two nodes will contain three shards while the other node will contain four. The busiest node is most likely to be the item that restricts throughput the most, that's why
this node has been selected in each case. <span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="0784b569c7980e9429c9f55f66450e5d:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8df46c6ddf5a269b3d00b84341230b5d:0">The following set of graphs illustrate the CPU utilization for the busiest node in each cluster.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8df46c6ddf5a269b3d00b84341230b5d:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:2"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/data-ingestion-image2.png" alt=""><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:2">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:3"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/data-ingestion-image3.png" alt=""><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:3">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:4"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/data-ingestion-image4.png" alt=""><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:4">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="ef5d6c2dc78824bb3fc1a85741065275:0">For the small, medium, and large clusters, the average CPU utilization for these nodes was 75.01%,
64.93%., and 64.64%. Rarely does utilization actually hit 100%, and utilization drops as the size of the
nodes and the available CPU power available increases. CPU power is therefore unlikely to be a factor
limiting the performance of the large cluster.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="ef5d6c2dc78824bb3fc1a85741065275:0">+
</a>
</span></p>
<h3 id="determining-limiting-factors-memory">Determining limiting factors: memory</h3>
<p class="lf-text-block lf-block" data-lf-anchor-id="8fc82d8dff988cd9aac1f843e50762df:0">Memory use is another important aspect that can influence performance. For the tests, Elasticsearch was allocated 50% of the available memory. This is in line with <a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/heap-sizing.html#_give_half_your_memory_to_lucene">documented recommendations</a>. While the tests were running, the JVM was monitored for excess garbage collection activity (an indication of lack of heap memory). In all cases, the heap size was stable and the JVM exhibited low garbage collection activity. The screenshot below shows a snapshot of Marvel, highlighting the key JVM statistics for a short period while the test was running on the large cluster.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8fc82d8dff988cd9aac1f843e50762df:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:5"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/data-ingestion-image5.png" alt=""><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:5">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="cde85c01590ccc88380181c351014250:0"><strong><em>JVM memory and garbage collection activity on the large cluster.</em></strong><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="cde85c01590ccc88380181c351014250:0">+
</a>
</span></p>
<h3 id="determining-limiting-factors-disk-io-rrates">Determining limiting factors: disk I/O rRates</h3>
<p class="lf-text-block lf-block" data-lf-anchor-id="8fc42c29ff9924cf2b29e04767154b55:0">The remaining physical feature on the server side that might constrain performance is the performance of the disk I/O subsystem. The graph below compares the disk activity in terms of bytes written for the busiest nodes in each cluster.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8fc42c29ff9924cf2b29e04767154b55:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:6"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/data-ingestion-image6.png" alt=""> <span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:6">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8bb4784d9b1a26d39d89714360024a51:0">The following table shows the average bytes written per second for node 2 in each cluster configuration over the two hour period:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8bb4784d9b1a26d39d89714360024a51:0">+
</a>
</span></p>
<table>
<thead>
<tr>
<th>Configuration</th>
<th>Average number of bytes written/sec</th>
</tr>
</thead>
<tbody>
<tr>
<td>Small</td>
<td>25502361.94</td>
</tr>
<tr>
<td>Medium</td>
<td>48856124.5</td>
</tr>
<tr>
<td>Large</td>
<td>88137675.46</td>
</tr>
</tbody>
</table>
<p class="lf-text-block lf-block" data-lf-anchor-id="8fc4ed4f779966fa2809e9c767236fe5:0">The volume of data written increases with the number of requests being processed by a cluster, but the I/O rates are within the limits of Azure storage (disks created by using Azure storage can support a sustained rates 10s to 100s of MB/s, depending on whether Standard or Premium storage is used). Examining the amount of time spent waiting for disk I/O helps to explain why the disk throughput is well below the theoretical maximum. The graphs and table below show these statistics for the same three nodes:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8fc4ed4f779966fa2809e9c767236fe5:0">+
</a>
</span></p>
<div class="NOTE alert"><h5>Note</h5><p class="lf-text-block lf-block" data-lf-anchor-id="8954690b4bba8e96f145f8976b3b4421:0">The disk wait time is measured by monitoring the percentage of CPU time during which 
processors are blocked waiting for I/O operations to complete.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8954690b4bba8e96f145f8976b3b4421:0">+
</a>
</span></p>
</div>
<p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:7"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/data-ingestion-image7.png" alt=""><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:7">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:8"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/data-ingestion-image8.png" alt=""><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:8">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:9"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/data-ingestion-image9.png" alt=""><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:9">+
</a>
</span></p>
<table>
<thead>
<tr>
<th>Configuration</th>
<th>Average disk wait CPU time (%)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Small</td>
<td>21.04</td>
</tr>
<tr>
<td>Medium</td>
<td>14.48</td>
</tr>
<tr>
<td>Large</td>
<td>15.84</td>
</tr>
</tbody>
</table>
<p class="lf-text-block lf-block" data-lf-anchor-id="8d547d2349bc9cf826a589de4d244679:0">This data indicates that a significant proportion of CPU time (between nearly 16% and 21%) is spent waiting for disk I/O to complete. This is restricting the ability of Elasticsearch to process requests and store data.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8d547d2349bc9cf826a589de4d244679:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="afe52dc85bb90098b309e843570782b3:0">During the test run, the large cluster inserted in excess of <strong>five hundred million documents</strong>. Allowing the test to continue showed that wait times increased significantly when the database contained over six hundred million documents. The reasons for this behavior were not fully investigated, but may be due to disk fragmentation causing increased disk latency. <span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="afe52dc85bb90098b309e843570782b3:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8dc46da943b936383b09815349650e31:0">Increasing the size of the cluster over more nodes might help to alleviate the effects of this behavior. In extreme cases it may be necessary to defragment a disk that is showing excessive I/O times. However, defragmenting a large disk might take a considerable time (possibly more than 48 hours for a 2TB VHD drive), and simply reformatting the drive and allowing Elasticsearch to recover the missing data from replica shards could be a more cost-effective approach.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8dc46da943b936383b09815349650e31:0">+
</a>
</span></p>
<h3 id="addressing-disk-latency-issues">Addressing disk latency issues</h3>
<p class="lf-text-block lf-block" data-lf-anchor-id="b4412d3471bc37f02165c847f93647c1:0">The tests were initially performed using VMs configured with standard disks. A standard disk is based on spinning media and as a result is subject to rotational latency and other bottlenecks that can constrain I/O rates. Azure provides also premium storage in which disks are created using SSD devices. These devices have no rotational latency and as a result should provide improved I/O speeds. <span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="b4412d3471bc37f02165c847f93647c1:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="87ec2c6d5f986ffa3809ec4361024b55:0">The table below compares the results of replacing standard disks with premium disks in the large cluster (the Standard D4 VMs in the large cluster were replaced with Standard DS4 VMs; the number of cores, memory and disks was the same in both cases, the only difference being that the DS4 VMs used SSDs).<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="87ec2c6d5f986ffa3809ec4361024b55:0">+
</a>
</span></p>
<table>
<thead>
<tr>
<th>Configuration</th>
<th>Sample count</th>
<th>Average response time (ms)</th>
<th>Throughput (operations/s)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Large - Standard</td>
<td>197085</td>
<td>839</td>
<td>27.4</td>
</tr>
<tr>
<td>Large - Premium</td>
<td>255985</td>
<td>581</td>
<td>35.6</td>
</tr>
</tbody>
</table>
<p class="lf-text-block lf-block" data-lf-anchor-id="85b44ca9619826b4194880436a154af9:0">Response times were noticeably better, resulting in an average throughput much closer to 4x that of the small cluster. This is more in line with the resources available on a Standard DS4 VM. Average CPU utilization on the busiest node in the cluster (node 1 in this case) increased as it spent less time waiting for I/O to complete:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="85b44ca9619826b4194880436a154af9:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:10"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/data-ingestion-image10.png" alt=""><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:10">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="07b4682939bb249fadad90d7632346d9:0">The reduction in disk wait time becomes apparent when you consider the following graph, which shows that for the busiest node this statistic dropped to around 1% on average:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="07b4682939bb249fadad90d7632346d9:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:11"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/data-ingestion-image11.png" alt=""><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:11">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8590ec0347f882bab9c98847c3220261:0">There is a price to pay for this improvement, however. The number of ingestion errors increased by a factor of 10 to 35797 (12.3%). Again, most of these errors were the result of the bulk insert queue overflowing. Given that the hardware now appears to be running close to capacity, it may be necessary to either add more nodes or throttle back the rate of bulk inserts to reduce the volume of errors. These issues are discussed later in this document.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8590ec0347f882bab9c98847c3220261:0">+
</a>
</span></p>
<h3 id="testing-with-ephemeral-storage">Testing with ephemeral storage</h3>
<p class="lf-text-block lf-block" data-lf-anchor-id="8d446c433ddb6ef60923a947c5036b75:0">The same tests were repeated on a cluster of D4 VMs using ephemeral storage. On D4 VMs, ephemeral storage is implemented as a single 400GB SSD. The number of samples processed, response time, and throughput were all very similar to the figures reported for the cluster based on DS14 VMs with premium storage.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8d446c433ddb6ef60923a947c5036b75:0">+
</a>
</span></p>
<table>
<thead>
<tr>
<th>Configuration</th>
<th>Sample count</th>
<th>Average response time (ms)</th>
<th>Throughput (operations/s)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Large - Premium</td>
<td>255985</td>
<td>581</td>
<td>35.6</td>
</tr>
<tr>
<td>Large – Standard (Ephemeral disk)</td>
<td>255626</td>
<td>585</td>
<td>35.5</td>
</tr>
</tbody>
</table>
<p class="lf-text-block lf-block" data-lf-anchor-id="879cb54bcfda2a7b4f8fdc13ca625a4b:0">The error rate was also similar (33862 failures out of 289488 requests in total – 11.7%).<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="879cb54bcfda2a7b4f8fdc13ca625a4b:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8fd46a699b9826bb392980034181425f:0">The following graphs show the CPU utilization and disk wait statistics for the busiest node in the cluster (node 2 this time):<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8fd46a699b9826bb392980034181425f:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:12"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/data-ingestion-image12.png" alt=""><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:12">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="afb13df85d6c78fce85e13ef4f1432c0:0">![](media/guidance-elasticsearch/data-ingestion-image13.png<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="afb13df85d6c78fce85e13ef4f1432c0:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="dd047bf061ab3b261b84d3a52a152e27:0">In this case, in performance terms alone, using ephemeral storage could be considered a more cost-effective solution than using premium storage.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="dd047bf061ab3b261b84d3a52a152e27:0">+
</a>
</span></p>
<h3 id="data-ingestion-performance--windows-server-2012">Data ingestion performance – Windows Server 2012</h3>
<p class="lf-text-block lf-block" data-lf-anchor-id="8d082ced9dd0ae1a2be18c4347054be6:0">The same tests were repeated using a set of Elasticsearch clusters with nodes running Windows Server 2012. The purpose of these tests was to establish what effects, if any, the choice of operating system might have on cluster performance.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8d082ced9dd0ae1a2be18c4347054be6:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="add46d2d34983c332b299847e9021a59:0">To illustrate the scalability of Elasticsearch on Windows, the following table shows the throughput and response times achieved for the small, medium, and large cluster configurations. Note that these tests were all performed with Elasticsearch configured to use SSD ephemeral storage, as the tests with Ubuntu had shown that disk latency was likely to be a critical factor in achieving maximum performance:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="add46d2d34983c332b299847e9021a59:0">+
</a>
</span></p>
<table>
<thead>
<tr>
<th>Configuration</th>
<th>Sample count</th>
<th>Average response time (ms)</th>
<th>Throughput (operations/s)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Small</td>
<td>90295</td>
<td>476</td>
<td>12.5</td>
</tr>
<tr>
<td>Medium</td>
<td>169243</td>
<td>508</td>
<td>23.5</td>
</tr>
<tr>
<td>Large</td>
<td>257115</td>
<td>613</td>
<td>35.6</td>
</tr>
</tbody>
</table>
<p class="lf-text-block lf-block" data-lf-anchor-id="3da948a7740a0cb3832009a601554d08:0">These results indicate how Elasticsearch scales with VM size and available resources on Windows.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="3da948a7740a0cb3832009a601554d08:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8f406c2d9d18e4b32a01a94341024351:0">The following tables compares the results for the large cluster on Ubuntu and Windows:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8f406c2d9d18e4b32a01a94341024351:0">+
</a>
</span></p>
<table>
<thead>
<tr>
<th>Operating system</th>
<th>Sample count</th>
<th>Average response time (ms)</th>
<th>Throughput (operations/s)</th>
<th>Error rate (%)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ubuntu</td>
<td>255626</td>
<td>585</td>
<td>35.5</td>
<td>11.7</td>
</tr>
<tr>
<td>Windows</td>
<td>257115</td>
<td>613</td>
<td>35.6</td>
<td>7.2</td>
</tr>
</tbody>
</table>
<p class="lf-text-block lf-block" data-lf-anchor-id="85442c0a079e12b63b11e90b612d5a8b:0">The throughput was consistent with that for the large Ubuntu clusters, although the response time was slightly higher. This may be accounted for by the lower error rate (errors are reported more quickly than successful operations, so have a lower response time).<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="85442c0a079e12b63b11e90b612d5a8b:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="c9752c292f9eaa93b848a81f672d4ac9:0">The CPU utilization reported by the Windows monitoring tools was marginally higher than that of Ubuntu. However, you should treat direct comparisons of measurements such as these across operating systems with extreme caution due to the way different operating systems report these statistics. Additionally, information on disk latency in terms of CPU time spent waiting for I/O is not available in the same way as it is for Ubuntu. The important point is that CPU utilization was high, indicating that time spent waiting for I/O was low:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="c9752c292f9eaa93b848a81f672d4ac9:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:13"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/data-ingestion-image14.png" alt=""><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:13">+
</a>
</span></p>
<h3 id="scaling-up-conclusions">Scaling up: conclusions</h3>
<p class="lf-text-block lf-block" data-lf-anchor-id="84197d234d3a26ef2ac3918e4b715e78:0">Elasticsearch performance for a well-tuned cluster is likely to be equivalent on Windows and Ubuntu, and that it scales-up in a similar pattern on both operating systems. For best performance, <strong>use premium storage for holding Elasticsearch data</strong>.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="84197d234d3a26ef2ac3918e4b715e78:0">+
</a>
</span></p>
<h2 id="scaling-out-clusters-to-support-large-scale-data-ingestion">Scaling out clusters to support large-scale data ingestion</h2>
<p class="lf-text-block lf-block" data-lf-anchor-id="83d1ed2bcfb0a0b829c9b9c777263f6d:0">Scaling out is the complimentary approach to scaling up investigated in the previous section. An important feature of Elasticsearch is the inherent horizontal scalability built into the software. Increasing the size of a cluster is simply a matter of adding more nodes. You do not need to perform any manual operations to redistribute indexes or shards as these tasks are handled automatically, although there are a number of configuration options available that you can use to influence this process. <span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="83d1ed2bcfb0a0b829c9b9c777263f6d:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="875dec0b57aeb81e15c92df393005d39:0">Adding more nodes helps to improve performance by spreading the load across more machinery. As you add more nodes, you may also need to consider reindexing data to increase the number of shards available. You can preempt this process to some extent by creating indexes that have more shards than there are available nodes initially. When further nodes are added, the shards can be distributed.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="875dec0b57aeb81e15c92df393005d39:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="20496d675428b63836cf314757665e79:0">Besides taking advantage of the horizontal scalability of Elasticsearch, there are other reasons for implementing indexes that have more shards than nodes. Each shard is implemented as a separate data structure (a <a href="https://lucene.apache.org/">Lucene</a> index), and has its own internal mechanisms for maintaining consistency and handling concurrency. Creating multiple shards helps to increase parallelism within a node and can improve performance. <span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="20496d675428b63836cf314757665e79:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8fc44c25d78924fb3a4be94775036775:0">However, maintaining performance while scaling is a balancing act. The more nodes and shards a cluster contains, the more effort is required to synchronize the work performed by the cluster, which can decrease throughput. For any given workload, there is an optimal configuration that maximizes ingestion performance while minimizing the maintenance overhead. This configuration is heavily dependent on the nature of the workload and the cluster; specifically, the volume, size, and content of the documents, the rate at which ingestion occurs, and the hardware on which the system runs.  <span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8fc44c25d78924fb3a4be94775036775:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="83542d4fdfb965bfaaedac57e1266b33:0">This section summarizes the results of investigations into sizing clusters intended to support the workload used by the performance tests described previously. The same test was performed on clusters with VMs based on the large VM size (Standard D4 with 8 CPU cores, 16 data disks, and 28GB of RAM) running Ubuntu Linux 14.0.4, but configured with different numbers of nodes and shards. The results are not intended to be definitive as they apply only to one specific scenario, but they can act as a good starting point to help you to analyze the horizontal scalability of your clusters, and generate numbers for the optimal ratio of shards to nodes that best meet your own requirements.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="83542d4fdfb965bfaaedac57e1266b33:0">+
</a>
</span></p>
<h3 id="baseline-results--3-nodes">Baseline results – 3 nodes</h3>
<p class="lf-text-block lf-block" data-lf-anchor-id="8fd52dcd5f980efb3b49e94767272651:0">To obtain a baseline figure, the data ingestion performance test was run against a 3 node cluster with 5 shards and 1 replica. This is the default configuration for an Elasticsearch index. In this configuration, Elasticsearch distributes 2 primary shards to 2 of the nodes, and the remaining primary shard is stored on the third node. The table below summarizes the throughput in terms of bulk ingestion operations per second, and the number of documents that were successfully stored by the test.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8fd52dcd5f980efb3b49e94767272651:0">+
</a>
</span></p>
<div class="NOTE alert"><h5>Note</h5><p class="lf-text-block lf-block" data-lf-anchor-id="87d4216d5f880edb2749b94bc623a677:0">In the tables that follow in this section, the distribution of the primary shards is presented as a number for each node separated by dashes. For example, the 5-shard 3-node layout is described as 2-2-1. The layout of replica shards is not included. They will follow a similar scheme to the primary shards.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="87d4216d5f880edb2749b94bc623a677:0">+
</a>
</span></p>
</div>
<table>
<thead>
<tr>
<th>Configuration</th>
<th>Document count</th>
<th>Throughput (operations/s)</th>
<th>Shard layout</th>
</tr>
</thead>
<tbody>
<tr>
<td>5 shards</td>
<td>200560412</td>
<td>27.86</td>
<td>2-2-1</td>
</tr>
</tbody>
</table>
<h3 id="6-node-results">6-node results</h3>
<p class="lf-text-block lf-block" data-lf-anchor-id="8dcc45299e08a6392b8188c141074258:0">The test was repeated on a 6 node cluster. The purpose of these tests was to try and ascertain more precisely the effects of storing more than one shard on a node.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8dcc45299e08a6392b8188c141074258:0">+
</a>
</span></p>
<table>
<thead>
<tr>
<th>Configuration</th>
<th>Document count</th>
<th>Throughput (operations/s)</th>
<th>Shard layout</th>
</tr>
</thead>
<tbody>
<tr>
<td>4 shards</td>
<td>227360412</td>
<td>31.58</td>
<td>1-1-0-1-1-0</td>
</tr>
<tr>
<td>7 shards</td>
<td>268013252</td>
<td>37.22</td>
<td>2-1-1-1-1-1</td>
</tr>
<tr>
<td>10 shards</td>
<td>258065854</td>
<td>35.84</td>
<td>1-2-2-2-1-2</td>
</tr>
<tr>
<td>11 shards</td>
<td>279788157</td>
<td>38.86</td>
<td>2-2-2-1-2-2</td>
</tr>
<tr>
<td>12 shards</td>
<td>257628504</td>
<td>35.78</td>
<td>2-2-2-2-2-2</td>
</tr>
<tr>
<td>13 shards</td>
<td>300126822</td>
<td>41.68</td>
<td>2-2-2-2-2-3</td>
</tr>
</tbody>
</table>
<p class="lf-text-block lf-block" data-lf-anchor-id="1de64e24b081a491c1883d430700c141:0">These results appear to indicate the following trends:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="1de64e24b081a491c1883d430700c141:0">+
</a>
</span></p>
<ul class="lf-text-block lf-block" data-lf-anchor-id="87dc4d8887aa869f0f899157e70706d9:0">
<li>More shards per node improves throughput. With the small number of shards per node created for these tests, this phenomenon was expected, for reasons described earlier.</li>
<li>An odd number of shards gives better performance than an even number. The reasons for this are less clear, but it <em>may</em> be that the routing algorithm that Elasticsearch uses is better able to distribute the data across shards in this case, leading to a more even load per node.</li>
<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="87dc4d8887aa869f0f899157e70706d9:0">+
</a>
</span></ul>
<p class="lf-text-block lf-block" data-lf-anchor-id="8ddc25c96fa88ab10faa9d4fce2645d9:0">To test these hypotheses, several further tests were performed with larger numbers of shards. On advice from Elasticsearch, it was decided to use a prime number of shards for each test as these give a reasonable distribution of odd numbers for the range in question.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8ddc25c96fa88ab10faa9d4fce2645d9:0">+
</a>
</span></p>
<table>
<thead>
<tr>
<th>Configuration</th>
<th>Document count</th>
<th>Throughput (operations/s)</th>
<th>Shard layout</th>
</tr>
</thead>
<tbody>
<tr>
<td>23 shards</td>
<td>312844185</td>
<td>43.45</td>
<td>4-4-4-3-4-4</td>
</tr>
<tr>
<td>31 shards</td>
<td>309930777</td>
<td>43.05</td>
<td>5-5-5-5-6-5</td>
</tr>
<tr>
<td>43 shards</td>
<td>316357076</td>
<td>43.94</td>
<td>8-7-7-7-7-7</td>
</tr>
<tr>
<td>61 shards</td>
<td>305072556</td>
<td>42.37</td>
<td>10-11-10-10-10-10</td>
</tr>
<tr>
<td>91 shards</td>
<td>291073519</td>
<td>40.43</td>
<td>15-15-16-15-15-15</td>
</tr>
<tr>
<td>119 shards</td>
<td>273596325</td>
<td>38.00</td>
<td>20-20-20-20-20-19</td>
</tr>
</tbody>
</table>
<p class="lf-text-block lf-block" data-lf-anchor-id="23cc3528878108dd3fa9d14e67052ac9:0">These results suggested that a tipping point was reached at around 23 shards. After this point, increasing the number of shards caused a small degradation in performance (the throughput for 43 shards is possibly an anomaly).<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="23cc3528878108dd3fa9d14e67052ac9:0">+
</a>
</span></p>
<h3 id="9-node-results">9-node results</h3>
<p class="lf-text-block lf-block" data-lf-anchor-id="0bc865c9ffe1ba1839a9bd41434635e7:0">The tests were repeated using a cluster of 9 nodes, again using a prime number of shards.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="0bc865c9ffe1ba1839a9bd41434635e7:0">+
</a>
</span></p>
<table>
<thead>
<tr>
<th>Configuration</th>
<th>Document count</th>
<th>Throughput (operations/s)</th>
<th>Shard layout</th>
</tr>
</thead>
<tbody>
<tr>
<td>17 shards</td>
<td>325165364</td>
<td>45.16</td>
<td>2-2-2-2-2-2-2-2-1</td>
</tr>
<tr>
<td>19 shards</td>
<td>331272619</td>
<td>46.01</td>
<td>2-2-2-2-2-2-2-2-3</td>
</tr>
<tr>
<td>29 shards</td>
<td>349682551</td>
<td>48.57</td>
<td>3-3-3-4-3-3-3-4-3</td>
</tr>
<tr>
<td>37 shards</td>
<td>352764546</td>
<td>49.00</td>
<td>4-4-4-4-4-4-4-4-5</td>
</tr>
<tr>
<td>47 shards</td>
<td>343684074</td>
<td>47.73</td>
<td>5-5-5-6-5-5-5-6-5</td>
</tr>
<tr>
<td>89 shards</td>
<td>336248667</td>
<td>46.70</td>
<td>10-10-10-10-10-10-10-10-9</td>
</tr>
<tr>
<td>181 shards</td>
<td>297919131</td>
<td>41.38</td>
<td>20-20-20-20-20-20-20-20-21</td>
</tr>
</tbody>
</table>
<p class="lf-text-block lf-block" data-lf-anchor-id="25ef51b96641bcef97a9dd47217d8509:0">These results showed a similar pattern, with a tipping point around 37 shards.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="25ef51b96641bcef97a9dd47217d8509:0">+
</a>
</span></p>
<h3 id="scaling-out-conclusions">Scaling out: conclusions</h3>
<p class="lf-text-block lf-block" data-lf-anchor-id="8bdc652adfb8009b3fe9d847672763f5:0">Using a crude extrapolation, the results of the 6-node and 9-node tests indicated that, for this specific scenario, the ideal number of shards to maximize performance was 4n+/-1, where n is the number of nodes. This <em>may</em> be a function of the number of bulk insert threads available, which in turn is dependent on the number of CPU cores, the rationale being as follows (see <a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/distrib-multi-doc.html#distrib-multi-doc">Multidocument Patterns</a> for details):<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8bdc652adfb8009b3fe9d847672763f5:0">+
</a>
</span></p>
<ul class="lf-text-block lf-block" data-lf-anchor-id="91d57b275d8a34c32dc9cd464e2346d1:0">
<li>Each bulk insert request sent by the client application is received by a single data node.</li>
<li>The data node builds a new bulk insert request for each primary shard affected by the original request and forwards them to the other nodes, in parallel.</li>
<li>As each primary shard is written, another request is sent to each replica for that shard. The primary shard waits for the request sent to the replica to complete before finishing.</li>
<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="91d57b275d8a34c32dc9cd464e2346d1:0">+
</a>
</span></ul>
<p class="lf-text-block lf-block" data-lf-anchor-id="a95c7c6d47daa2a911c189df630636f4:0">By default, Elasticsearch creates one bulk insert thread for each available CPU core in a VM. In the case of the D4 VMs used by this test, each CPU contained 8 cores, so 8 bulk insert threads were created. The index used spanned 4 (in one case 5) primary shards on each node, but there were also 4 (5) replicas on each node. Inserting data into these shards and replicas could consume up to 8 threads on each node per request, matching the number available. Increasing or reducing the number of shards might cause threading inefficiencies as threads are possibly left unoccupied or requests are queued. However, without further experimentation this is just a theory and it is not possible to be definitive.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="a95c7c6d47daa2a911c189df630636f4:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="af8c7d6d4fdb32b31b09a94747066bb1:0">The tests also illustrated one other important point. In this scenario, increasing the number of nodes can improve data ingestion throughput, but the results do not necessarily scale linearly. Conducting further tests with 12 and 15 node clusters could show the point at which scale out brings little additional benefit. If this number of nodes provides insufficient storage space, it may be necessary to return to the scale up strategy and start using more or bigger disks based on premium storage.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="af8c7d6d4fdb32b31b09a94747066bb1:0">+
</a>
</span></p>
<div class="IMPORTANT alert"><h5>Important</h5><p class="lf-text-block lf-block" data-lf-anchor-id="85402c2c419c10bb3bc9a9c343270a7b:0">Do not take the ratio 4n+/-1 as a magic formula that will always work for every cluster. If you have fewer or more CPU cores available, the optimal shard configuration could be different. The findings were based on a specific workload that only did data ingestion. For workloads that also include a mix of queries and aggregations the results could be very diverse.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="85402c2c419c10bb3bc9a9c343270a7b:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8dc54dbb5fbe3ce095c90c4f7b0006df:0">Furthermore, the data ingestion workload utilized a single index. In many situations, the data is likely to be spread across multiple indexes leading to different patterns or resource use.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8dc54dbb5fbe3ce095c90c4f7b0006df:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="33a40102038b44930ceddeded7255979:0">The important point of this exercise is to understand the method used rather than the results obtained. You should be prepared to perform your own scalability assessment based on your own workloads to obtain information that is most applicable to your own scenario.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="33a40102038b44930ceddeded7255979:0">+
</a>
</span></p>
</div>
<h2 id="tuning-large-scale-data-ingestion">Tuning large-scale data ingestion</h2>
<p class="lf-text-block lf-block" data-lf-anchor-id="09956d2b54bf62b332cd994e5b244c79:0">Elasticsearch is highly configurable, with many switches and settings that you can use to optimize the performance for specific use cases and scenarios. This section describes some common examples. Be aware that the flexibility that Elasticsearch provides in this respect comes with a warning, it is very easy to detune Elasticsearch and make performance worse. When tuning, only make one change at a time, and always measure the effects of any changes to ensure that they are not detrimental to your system.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="09956d2b54bf62b332cd994e5b244c79:0">+
</a>
</span></p>
<h3 id="optimizing-resources-for-indexing-operations">Optimizing resources for indexing operations</h3>
<p class="lf-text-block lf-block" data-lf-anchor-id="8f81ddcd5d9fadfa6869b9df45015f55:0">The following list describes some points you should consider when tuning an Elasticsearch cluster to support large-scale data ingestion. The first two items are most likely to have an immediately obvious effect on performance while the remainder are more marginal, depending on the workload:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8f81ddcd5d9fadfa6869b9df45015f55:0">+
</a>
</span></p>
<ul class="lf-text-block lf-block" data-lf-anchor-id="8fd02d2b4fb86eba394999c747254e79:0">
<li><p>New documents added to an index only become visible to searches when the index is refreshed. Refreshing an index is an expensive operation, so it is only performed periodically rather than as each document is created. The default refresh interval is 1 second. If you are performing bulk operations, you should consider temporarily disabling index refreshes. Set the index <em>refresh_interval</em> to -1.</p>
<div class="codeHeader lang-http"><div class="copyBtn">Copy</div><div class="labelHolder">http</div></div><pre><code class="lang-http"> <span class="hljs-attribute">PUT /my_busy_index
 {
     "settings" </span>: {
         "<span class="hljs-attribute">refresh_interval"</span>: -1
     }
 }
</code></pre><p> Trigger a refresh manually by using the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-refresh.html"><em>_refresh</em></a> API at the end of the operation to make the data visible. See <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-update-settings.html#bulk">Bulk Indexing Usage</a> for more information. Further details on the <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#the-impact-of-changing-the-index-refresh-interval-on-data-ingestion-performance">impact of changing the refresh interval on data ingestion</a> are described later.</p>
</li>
<li><p>If an index is replicated, each indexing operation (document create, update, or delete) is repeated on the replica shards as they occur in the primary shard. Consider disabling replication during bulk import operations and then reenable it when the import is complete:</p>
<div class="codeHeader lang-http"><div class="copyBtn">Copy</div><div class="labelHolder">http</div></div><pre><code class="lang-http">  <span class="hljs-attribute">PUT /my_busy_index
  {
      "settings" </span>: {
          "<span class="hljs-attribute">number_of_replicas"</span>: 0
      }
  }
</code></pre><p>  When you reenable replication, Elasticsearch performs a byte-for-byte network transfer of data from the index to each replica. This is more efficient than repeating the indexing process document by document on each node. The risk is that data can be lost of the primary node fails while performing the bulk import, but recovery may simply be a matter of starting the import again. The <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#the-impact-of-replicas-on-data-ingestion-performance">impact of replication on data ingestion performance</a> is described in more detail later.</p>
</li>
<li><p>Elasticsearch attempts to balance the resources available between those required for querying and those required for ingesting data. As a result, it may throttle data ingestion performance (throttling events are recorded in the Elasticsearch log). This restriction is intended to prevent a large number of index segments from being created concurrently that require merging and saving to disk, a process that can monopolize resources. If your system is not currently performing queries, you can disable data ingestion throttling. This should allow indexing to maximize performance. You can disable throttling for an entire cluster as follows:</p>
<div class="codeHeader lang-http"><div class="copyBtn">Copy</div><div class="labelHolder">http</div></div><pre><code class="lang-http">  <span class="hljs-attribute">PUT /_cluster/settings
  {
      "transient" </span>: {
          "<span class="hljs-attribute">indices.store.throttle.type"</span>: "none"
      }
  }
</code></pre><p>  Set the throttle type of the cluster back to <em>"merge"</em> when ingestion has completed. Also note that disabling throttling may lead to instability in the cluster, so ensure that you have procedures in place that can recover the cluster if necessary.</p>
</li>
<li><p>Elasticsearch reserves a proportion of the heap memory for indexing operations, the remainder is mostly used by queries and searches. The purpose of these buffers is to reduce the number of disk I/O operations, with the aim of performing fewer, larger writes than more, smaller writes. The default proportion of heap memory allocated is 10%. If you are indexing a large volume of data then this value might be insufficient. For systems that support high-volume data ingestion, you should allow up to 512MB of memory for each active shard in the node. For example, if you are running Elasticsearch on D4 VMs (28GB RAM) and have allocated 50% of the available memory to the JVM (14GB), then 1.4GB will be available for use by indexing operations. If a node contains 3 active shards, then this configuration is probably sufficient. However, if a node contains more shards than this, consider increasing the value of the <em>indices.memory.index_buffer_size</em> parameter in the elasticsearch.yml configuration file. For more information, see <a href="https://www.elastic.co/blog/performance-considerations-elasticsearch-indexing">Performance Considerations for Elasticsearch Indexing</a>.</p>
<p>  Allocating more than 512MB per active shard will most likely not improve indexing performance and may actually be detrimental as less memory is available for performing other tasks. Also be aware that allocating more heap space for index buffers removes memory for other operations such as searching and aggregating data, and can slow the performance of query operations.</p>
</li>
<li><p>Elasticsearch restricts the number of threads (the default value is 8) that can concurrently perform indexing operations in a shard. If a node only contains a small number of shards, then consider increasing the <em>index_concurrency</em> setting for an index that is subject to a large volume of indexing operations, or is the target of a bulk insert, as follows:</p>
<div class="codeHeader lang-http"><div class="copyBtn">Copy</div><div class="labelHolder">http</div></div><pre><code class="lang-http">  <span class="hljs-attribute">PUT /my_busy_index
  {
      "settings" </span>: {
          "<span class="hljs-attribute">index_concurrency"</span>: 20
      }
  }
</code></pre></li>
<li>If you are performing a large number of indexing and bulk operations for a short period of time, you can increase the number of <em>index</em> and <em>bulk</em> threads available in the thread pool and extend the size of the <em>bulk insert</em> queue for each data node. This will allow more requests to be queued rather than being discarded. For more information, see <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-threadpool.html">Thread Pool</a>. If you are performing sustained high levels of data ingestion, then increasing the number of bulk threads is not recommended. Instead create additional nodes and use sharding to distribute the indexing load across these nodes. Alternatively, consider sending bulk insert batches serially rather than in parallel as this will act as a natural throttling mechanism that can reduce the chances of the errors due to a bulk insert queue overflowing.</li>
<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8fd02d2b4fb86eba394999c747254e79:0">+
</a>
</span></ul>
<h3 id="the-impact-of-changing-the-index-refresh-interval-on-data-ingestion-performance">The impact of changing the index refresh interval on data ingestion performance</h3>
<p class="lf-text-block lf-block" data-lf-anchor-id="87c5ad2b55be60fb59c9cdcf4721463b:0">The refresh interval governs the rate at which ingested data becomes visible to queries and aggregations, but frequent refreshes can impact the performance of data ingestion operations. The default refresh interval is 1 second. You can disable refreshing completely, but this might not be appropriate to your workload. You can experiment by trying different intervals and establishing the sweet spot that balances ingestion performance against the need to present up to date information.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="87c5ad2b55be60fb59c9cdcf4721463b:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8d556d49dd3cfaaa8a6df8d76d077674:0">As an example of the impact, the data ingestion performance test was repeated on an Elasticsearch cluster consisting of 7 shards spread across 3 data nodes. The index had a single replica. Each data node was based on a D4 VM (28GB RAM, 8 processor cores) using SSD-backed ephemeral storage to hold the data. Each test ran for 1 hour.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8d556d49dd3cfaaa8a6df8d76d077674:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="87b62c0bc6b990ff7bc9ccc3632656d3:0">In this test, the refresh rate was set to the default value of 1 second. The following table shows the throughput and response times for this test compared to a separate run where the refresh rate was reduced to once every 30 seconds.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="87b62c0bc6b990ff7bc9ccc3632656d3:0">+
</a>
</span></p>
<table>
<thead>
<tr>
<th>Refresh rate</th>
<th>Sample count</th>
<th>Average response time – successful operations (ms)</th>
<th>Throughput – successful operations (operations/s)</th>
</tr>
</thead>
<tbody>
<tr>
<td>1 second</td>
<td>93755</td>
<td>460</td>
<td>26.0</td>
</tr>
<tr>
<td>30 seconds</td>
<td>117758</td>
<td>365</td>
<td>32.7</td>
</tr>
</tbody>
</table>
<p class="lf-text-block lf-block" data-lf-anchor-id="0dd46c6d5fbc66f71b89c84369224a53:0">In this test, dropping the refresh rate resulted in an 18% improvement in throughput, and a 21% reduction in average response time. The following graphs generated using Marvel illustrate the primary reason for this difference. The figures below show the index merge activity that occurred with the refresh interval set to 1 second and 30 seconds. <span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="0dd46c6d5fbc66f71b89c84369224a53:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="89b865194b7f36e854efd08741340e57:0">Index merges are performed to prevent the number of in-memory index segments from becoming too numerous. A 1 second refresh interval generates a large number of small segments which have to be merged frequently, whereas a 30 second refresh interval generates fewer large segments which can be merged more optimally.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="89b865194b7f36e854efd08741340e57:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:14"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/data-ingestion-image15.png" alt=""><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:14">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="699065122bf40ca65d8f58c563255ec3:0"><strong><em>Index merge activity for an index refresh rate of 1 second</em></strong><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="699065122bf40ca65d8f58c563255ec3:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:15"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/data-ingestion-image16.png" alt=""><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:15">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="69962d03afe498e45fafd88573255e47:0"><strong><em>Index merge activity for an index refresh rate of 30 seconds</em></strong><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="69962d03afe498e45fafd88573255e47:0">+
</a>
</span></p>
<h3 id="the-impact-of-replicas-on-data-ingestion-performance">The impact of replicas on data ingestion performance</h3>
<p class="lf-text-block lf-block" data-lf-anchor-id="9b546d2847bd1fc828c98d465377e6e4:0">Replicas are an essential feature of any resilient cluster, and without using them you risk losing information if a node fails. However, replicas increase the amount of disk and network I/O being performed and can be detrimental to the rate at which data is ingested. For reasons described earlier, it may be beneficial to temporarily disable replicas for the duration of large-scale data upload operations.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="9b546d2847bd1fc828c98d465377e6e4:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="a5576d103d3cba12e9618e474b04342f:0">Data ingestion performance tests were repeated using three configurations:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="a5576d103d3cba12e9618e474b04342f:0">+
</a>
</span></p>
<ul class="lf-text-block lf-block" data-lf-anchor-id="28c1e4b95041bea2a160c5c260754fad:0">
<li>Using a cluster with no replicas.</li>
<li>Using a cluster with 1 replica.</li>
<li>Using a cluster with 2 replicas.</li>
<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="28c1e4b95041bea2a160c5c260754fad:0">+
</a>
</span></ul>
<p class="lf-text-block lf-block" data-lf-anchor-id="8f842c7ddbbce6de1b89ecc751652a53:0">In all cases, the cluster contained 7 shards spread across 3 nodes and ran on VMs configured as described in the previous set of tests. The test index used a refresh interval of 30 seconds.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8f842c7ddbbce6de1b89ecc751652a53:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="bffdcc6e76b924f02a892847454752f7:0">The following table summarizes the response times and throughput of each test for comparison purposes:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="bffdcc6e76b924f02a892847454752f7:0">+
</a>
</span></p>
<table>
<thead>
<tr>
<th>Configuration</th>
<th>Sample count</th>
<th>Average response time – successful operations (ms)</th>
<th>Throughput – successful operations (operations/s)</th>
<th>Data Ingestion errors</th>
</tr>
</thead>
<tbody>
<tr>
<td>0 replicas</td>
<td>215451</td>
<td>200</td>
<td>59.8</td>
<td>0</td>
</tr>
<tr>
<td>1 replica</td>
<td>117758</td>
<td>365</td>
<td>32.7</td>
<td>0</td>
</tr>
<tr>
<td>2 replicas</td>
<td>94218</td>
<td>453</td>
<td>26.1</td>
<td>194262</td>
</tr>
</tbody>
</table>
<p class="lf-text-block lf-block" data-lf-anchor-id="87d42c2955984afa2d89c8474700c255:0">The decline in performance as the number of replicas increases is clear, but you should also notice the large volume of data ingestion errors in the third test. The messages generated by these errors indicated that they were due to the bulk insert queue overflowing causing requests to be rejected. These rejections occurred very quickly, that's why the number is large.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="87d42c2955984afa2d89c8474700c255:0">+
</a>
</span></p>
<div class="NOTE alert"><h5>Note</h5><p class="lf-text-block lf-block" data-lf-anchor-id="89d44a6d5d99965b0bccc94743221341:0">The results of the third test highlight the importance of using an intelligent retry strategy when transient errors such as this occur—back off for a short period to allow the bulk insert queue to drain before reattempting to repeat the bulk insert operation.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="89d44a6d5d99965b0bccc94743221341:0">+
</a>
</span></p>
</div>
<p class="lf-text-block lf-block" data-lf-anchor-id="8bd4ac6d7f9926cb3b09c8436d0342d7:0">The next sets of graphs compare the response times during the tests. In each case the first graph shows the overall response times, while the second graph zooms in on the response times for the fastest operations (note that the scale of the first graph is ten times that of the second). You can see how the profile of the response times varies across the three tests.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8bd4ac6d7f9926cb3b09c8436d0342d7:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="ab8580fb369df4e99390cc4628654f95:0">With no replicas, most operations took between 75ms and 750ms, with the quickest response times around 25ms:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="ab8580fb369df4e99390cc4628654f95:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:16"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/data-ingestion-image17.png" alt=""><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:16">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8fc0a0285f1c273a1dc1f8c3ed40c8df:0">With 1 replica the most populated operational response time was in the range 125ms to 1250ms. The quickest responses took approximately 75ms, although there were fewer of these quick responses than in the 0 replicas case. There were also far more responses that took significantly longer than the most common cases, in excess of 1250ms:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8fc0a0285f1c273a1dc1f8c3ed40c8df:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:17"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/data-ingestion-image18.png" alt=""><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:17">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="83c0ac4d4d98267a29c98c434720c375:0">With 2 replicas, the most populated response time range was 200ms to 1500ms, but there were far fewer results below the minimum range than in the 1 replica test. However, the pattern of results above the upper limit were very similar to that of the 1 replica test. This is most likely due to the effects of the bulk insert queue overflowing (exceeding a queue length of 50 requests). The additional work required to maintain 2 replicas causes the queue to overflow more frequently, preventing ingestion operations from having excessive response times. Operations are rejected quickly rather than taking a lengthy period of time, possibly causing timeout exceptions or impacting the responsiveness of client applications (this is the purpose of the bulk insert queue mechanism):<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="83c0ac4d4d98267a29c98c434720c375:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:18"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/data-ingestion-image19.png" alt=""><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:18">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8fc02ded5d9062df190cc8c3e7276374:0">Using Marvel, you can see the effect of the number of replicas on the bulk index queue. The figure below shows the data from Marvel that depicts how the bulk insert queue filled during the test. The average queue length was around 40 requests, but periodic bursts caused it to overflow and requests were rejected as a result:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8fc02ded5d9062df190cc8c3e7276374:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:19"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/data-ingestion-image20.png" alt=""><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:19">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="a39821b1594050e92c860941a1741624:0"><strong><em>Bulk index queue size and number of requests rejected with 2 replicas.</em></strong><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="a39821b1594050e92c860941a1741624:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="2fc5752f45b93cdbabe1dcc365027961:0">You should compare this with the figure below which shows the results for a single replica. The Elasticsearch engine was able to process requests quickly enough to keep the average queue length at around 25, and at no point did the queue length exceed 50 requests so no work was rejected.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="2fc5752f45b93cdbabe1dcc365027961:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:20"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/data-ingestion-image21.png" alt=""><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:20">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="a2d9493149e172a80cac4841b3740e20:0"><strong><em>Bulk index queue size and number of requests rejected with 1 replica.</em></strong><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="a2d9493149e172a80cac4841b3740e20:0">+
</a>
</span></p>
<h2 id="best-practices-for-clients-sending-data-to-elasticsearch">Best practices for clients sending data to Elasticsearch</h2>
<p class="lf-text-block lf-block" data-lf-anchor-id="8df5ac2d759e2cb539698c5757604d55:0">Many aspects of performance are concerned not only internally within the system but with how the system is used by client applications. Elasticsearch provides many features that can be utilized by the data ingestion process; generating unique identifiers for documents, performing document analysis, and even using scripting to transform the data as it is stored are some examples. However, these functions all add to the load on the Elasticsearch engine, and in many cases can be performed more efficiently by client applications prior to transmission. <span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8df5ac2d759e2cb539698c5757604d55:0">+
</a>
</span></p>
<div class="NOTE alert"><h5>Note</h5><p class="lf-text-block lf-block" data-lf-anchor-id="08d16dcdcd9de6ae38659c464f777e49:0">This list of best practices is primarily concerned with ingesting new data rather modifying existing data already stored in an index. Ingestion workloads are performed as append operations by Elasticsearch, whereas data modifications are performed as delete/append operations. This is because documents in an index are immutable, so modifying a document involves replacing the entire document with a new version. You can either perform an HTTP PUT request to overwrite an existing document, or you can use the Elasticsearch <em>update</em> API that abstracts a query to fetch an existing document, merges the changes, and then performs a PUT to store the new document.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="08d16dcdcd9de6ae38659c464f777e49:0">+
</a>
</span></p>
</div>
<p class="lf-text-block lf-block" data-lf-anchor-id="0641040dbb086a9ba0886d050000c025:0">Additionally, consider implementing the following practices where appropriate:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="0641040dbb086a9ba0886d050000c025:0">+
</a>
</span></p>
<ul class="lf-text-block lf-block" data-lf-anchor-id="8dc52d6b5d9c6cbb39cd99c74f234671:0">
<li><p>Disable text analysis for index fields that do not need to be analyzed. Analysis involves tokenizing text to enable queries that can search for specific terms. However, it can be a CPU-intensive task, so be selective. If you are using Elasticsearch to store log data, it might be useful to tokenize the detailed log messages to allow complex searches. Other fields, such as those containing error codes or identifiers should probably not be tokenized (how frequently are you likely to request the details of all messages whose error code contains a "3", for example?) The following code disables analysis for the <em>name</em> and <em>hostip</em> fields in the <em>logs</em> type of the <em>systembase</em> index.</p>
<div class="codeHeader lang-http"><div class="copyBtn">Copy</div><div class="labelHolder">http</div></div><pre><code class="lang-http">  <span class="hljs-attribute">PUT /systembase
  {
      "settings" </span>: {
          ...
      },
      "<span class="hljs-attribute">logs" </span>: {
          ...
          "<span class="hljs-attribute">name"</span>: {
              "<span class="hljs-attribute">type"</span>: "string",
              "<span class="hljs-attribute">index" </span>: "not_analyzed"
          },
          "<span class="hljs-attribute">hostip"</span>: {
              "<span class="hljs-attribute">type"</span>: "string",
              "<span class="hljs-attribute">index" </span>: "not_analyzed"
          },
          ...
      }
  }
</code></pre></li>
<li><p>Disable the <em>_all</em> field of an index if it is not required. The <em>_all</em> field concatenates the values of the other fields in the document for analysis and indexing. It is useful for performing queries that can match against any field in a document. If clients are expected to match against named fields, then enabling <em>_all</em> simply incurs CPU and storage overhead. The following example shows how to disable the <em>_all</em> field for the <em>logs</em> type in the <em>systembase</em> index.</p>
<div class="codeHeader lang-http"><div class="copyBtn">Copy</div><div class="labelHolder">http</div></div><pre><code class="lang-http">  <span class="hljs-attribute">PUT /systembase
  {
      "settings" </span>: {
          ...
      },
      "<span class="hljs-attribute">logs" </span>: {
          "<span class="hljs-attribute">_all"</span>: {
              "<span class="hljs-attribute">enabled" </span>: false
          },
          ...,
      ...
      }
  }
</code></pre><p>  Note that you can create a selective version of <em>_all</em> that only contains information from specific fields. For more information, see <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-all-field.html#disabling-all-field">Disabling the _all Field</a>.</p>
</li>
<li>Avoid dynamic mappings in indexes. Dynamic mapping is a powerful feature, but adding new fields to an existing index requires coordinating changes to the index structure across nodes and can temporarily cause the index to be locked. Dynamic mapping can also lead to an explosion in the number of fields and the consequent volume of index metadata if not used carefully. In turn, this results in increased storage requirements and I/O, both for ingesting data and when performing queries. Both of these issues will impact performance. Consider disabling dynamic mapping and define your index structures explicitly. For more information, see <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/dynamic-field-mapping.html#dynamic-field-mapping">Dynamic Field Mapping</a>.</li>
<li>Understand how to balance the workload to meet conflicting requirements. You should always consider that data ingestion can have a significant impact on the performance of other concurrent operations, such as users performing queries. Data ingestion might be subject to sudden bursts, and if the system attempts to consume all the data arriving immediately the influx could cause query rates to slow down to a trickle. Elasticsearch tries to prevent this situation from occurring by regulating the rate at which it will process ingestion requests through the bulk insert queue (refer to the section <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#determining-limiting-factors-cpu-utilization">Determining limiting factors – CPU utilization</a> for further information), but this mechanism should really be treated as a last resort. If your application code is not prepared to handle rejected requests you risk losing data. Instead, consider using a pattern such as <a href="https://msdn.microsoft.com/library/dn589783.aspx">Queue-Based Load Levelling</a> to control the rate at which data is passed to Elasticsearch.</li>
<li>Ensure that your cluster has sufficient resources to handle the workload, especially if indexes are configured with multiple replicas.</li>
<li>Use the bulk insert API to upload large batches of documents. Size bulk requests appropriately. Sometimes bigger batches are not better for performance, and can cause Elasticsearch threads and other resources to become overloaded, delaying other concurrent operations. The documents in a bulk insert batch are held in memory at the coordinating node while the operation is performed. The physical size of each batch is more important than the document count. There is no hard and fast rule as to what constitutes the ideal batch size, although Elasticsearch documentation recommends using between 5MB and 15MB as a starting point for your own investigations. Conduct performance testing to establish the optimal batch size for your own scenarios and workload mix.</li>
<li>Make sure that bulk insert requests are distributed across nodes rather than directed to a single node. Directing all requests to a single node can cause memory exhaustion as each bulk insert request being processed is stored in memory in the node. It can also increase network latency as requests are redirected to other nodes.</li>
<li><p>Elasticsearch uses a quorum consisting of a majority of the primary and replica nodes when writing data. A write operation is not completed until the quorum reports success. This approach helps to ensure that data is not written if a majority of the nodes are unavailable due to a network partition (failure) event. Using a quorum can slow the performance of write operations. You can disable quorum-based writing by setting the <em>consistency</em> parameter to <em>one</em> when writing data. The following example adds a new document but completes as soon as the write to the primary shard has completed.</p>
<div class="codeHeader lang-http"><div class="copyBtn">Copy</div><div class="labelHolder">http</div></div><pre><code class="lang-http">  <span class="hljs-attribute">PUT /my_index/my_data/104?consistency=one
  {
      "name"</span>: "Bert",
      "<span class="hljs-attribute">age"</span>: 23
  }
</code></pre><p>  Note that as with asynchronous replication, disabling quorum-based writing can lead to inconsistencies between the primary shard and each of the replicas.</p>
</li>
<li><p>When using quorums, Elasticsearch will wait if insufficient nodes are available before determining that a write operation should be cancelled because a quorum cannot be reached. This wait period is determined by the timeout query parameter (the default is 1 minute). You can modify this setting by using the timeout query parameter. The example below creates a new document and waits for a maximum of 5 seconds for the quorum to respond before cancelling:</p>
<div class="codeHeader lang-http"><div class="copyBtn">Copy</div><div class="labelHolder">http</div></div><pre><code class="lang-http">  <span class="hljs-attribute">PUT /my_index/my_data/104?timeout=5s
  {
      "name"</span>: "Sid",
      "<span class="hljs-attribute">age"</span>: 27
  }
</code></pre><p>  Elasticsearch also lets you use your own version numbers <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-index_.html#_version_types">generated externally</a>.</p>
</li>
<li><p>Consider disabling the <em>_source</em> field of an index. This field contains a copy of the original JSON document that was used when a document is stored. Saving this field incurs additional storage costs and disk I/O. However, these costs may be marginal depending on the document structure, and you should also be aware that disabling the <em>_source</em> field prevents a client from being able to perform the following operations:</p>
<ul>
<li>Using the Update API to modify a document.</li>
<li>Performing on the fly highlighting when running queries.</li>
<li>Reindexing data.</li>
<li><p>Debugging queries and aggregations by viewing the original document.</p>
<p>The following example disables the <em>_source</em> field for the <em>logs</em> type in the <em>systembase</em> index.</p>
</li>
</ul>
<div class="codeHeader lang-http"><div class="copyBtn">Copy</div><div class="labelHolder">http</div></div><pre><code class="lang-http"><span class="hljs-attribute">PUT /systembase
{
      "settings" </span>: {
          ...
      },
      "<span class="hljs-attribute">logs" </span>: {
          "<span class="hljs-attribute">_source"</span>: {
              "<span class="hljs-attribute">enabled"</span>: false
          },
          ...,
      ...
      }
}
</code></pre></li>
<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8dc52d6b5d9c6cbb39cd99c74f234671:0">+
</a>
</span></ul>
<h2 id="general-guidelines-for-conducting-data-ingestion-performance-testing-with-elasticsearch">General guidelines for conducting data ingestion performance testing with Elasticsearch</h2>
<p class="lf-text-block lf-block" data-lf-anchor-id="0fd50d6dff0964db3babf947c5414759:0">The following points highlight some of the items you should consider when running performance tests with Elasticsearch and analyzing the results.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="0fd50d6dff0964db3babf947c5414759:0">+
</a>
</span></p>
<ul class="lf-text-block lf-block" data-lf-anchor-id="addd2d297da934bd3be9a9c74f656e79:0">
<li>Performance testing is necessarily time consuming and costly. At a minimum, gather statistics that measure transfer rates on disk and network, CPU utilization, CPU wait times and disk latency (if possible). This can give you fast feedback on your test effort with good return of investment.</li>
<li>Leverage any scripting capabilities provided by your load testing tool to collect metrics that might not otherwise be available. For example, Linux has a variety of reliable performance statistics that you can gather using utilities such as <em>vmstat</em> and <em>iostat</em>. You can use scripting with JMeter to capture this data as part of a test plan.</li>
<li>Performance engineering is mostly about analyzing statistics based on reliable and repeatable data. Do not stop at high-level metrics that will not give the necessary insights. Educate yourself with the data and make performance engineering a dev ops process with a fast feedback loop. Always look at the statistics comparing trends and past results/configurations. By doing this on a regular basis you will generate data that you will understand, is repeatable with your workloads, and with which you will be able to assess the effects of changes in configuration and deployment.</li>
<li>Use a tool such as Marvel to monitor cluster and node performance while testing to gain additional insights. JMeter can be effective for capturing raw data for subsequent analysis, but using Marvel can give you a real-time feel for how performance is faring and the possible causes of glitches and slow downs. Additionally, many load test tools do not provide visibility to the inner metrics of Elasticsearch. Use and compare indexing throughput rates, merge segment counts, garbage collector (GC) statistics, and throttling times available in index statistics. Repeat this analysis on a regular basis.</li>
<li>Compare your load test tool statistics with node statistics in Marvel (disk and network traffic, CPU utilization, memory and thread pool usage) to understand the correlation pattern between the figures reported by the infrastructure and specific Elasticsearch statistics.</li>
<li>As a general rule consider <em>one node one shard</em> as the baseline for performance testing and assess application costs by adding nodes. However, do not depend completely on extrapolating performance based on a small number of nodes and shards. Synchronization and communication costs in the cluster can have unpredictable effects the larger the number of nodes and shards.</li>
<li>Look at the shard allocation across nodes to compare the statistics. Some nodes will have fewer replicas and shards which will create an imbalance of resource utilization.</li>
<li>If you are performing load testing, increase the number of threads that your test tool uses to submit work to the cluster until errors occur. For sustainable throughput testing, consider maintaining your test level below the expected peak load. If the error rate exceeds the ceiling, errors will incur cost on backend resources due to recoverability. In these situations, throughput will inevitably diminish.</li>
<li>To simulate how your system reacts to an unexpectedly large burst of activity, consider running tests that generate an error rate that exceeds your expected peak load. This will give you throughput figures not only in terms of capacity but also the cost of recoverability.</li>
<li>Use a document count to assess your performance profile, and recycle documents following your workload patterns. Consider that as more documents are added, the performance profile might change.</li>
<li>Be aware of the SLAs for IOPS and transfer rates limits for the storage you are using. Different storage types (SSD, spinning media) have different transfer rates.</li>
<li>Remember that CPU performance can drop not only because of disk and network activity, but because backend applications can use locking and communication mechanisms with distributed processing that may cause underutilization of the processor.</li>
<li>Run performance tests for at least two hours (not a few minutes). Indexing can affect performance in ways which may not be visible immediately. For example, JVM garbage collection statistics and indexing merges can change the performance profile over time.</li>
<li>Consider how index refreshes might big impact data ingestion throughput and throttling with a cluster.</li>
<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="addd2d297da934bd3be9a9c74f656e79:0">+
</a>
</span></ul>
<h2 id="summary">Summary</h2>
<p class="lf-text-block lf-block" data-lf-anchor-id="8fc4ade95fbd22b8306ba9c747256e5d:0">It is important to understand how to scale your solution as the volumes of data and the number of requests increases. Elasticsearch running on Azure enables vertical and horizontal scaling. You can run on bigger VMs with more resources, and you can distribute an Elasticsearch cluster across a network of VMs. The range of options can be confusing. Is it more cost-effective to implement a cluster on a large number of small VMs, on a cluster with a small number of large VMs, or somewhere in the middle? Also, how many shards should each index contain, and what are the tradeoffs concerning data ingestion versus query performance? The way in which shards are distributed across nodes can have a significant impact on the data ingestion throughput. Using more shards can reduce the amount of internal contention that occurs within a shard, but you must balance this benefit with the overhead that using many shards can impose on a cluster. To answer these questions effectively, you should be prepared to test your system to determine the most appropriate strategy.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8fc4ade95fbd22b8306ba9c747256e5d:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="ebcca56a2bb922f23963d9e7c7076ee5:0">For data ingestion workloads, the performance of the disk I/O subsystem is a critical factor. Using SSDs can boost throughput by reducing the disk latency of write operations. If you don't need vast amounts of disk space on a node, consider using standard VMs with ephemeral storage in place of more expensive VMs that support premium storage.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="ebcca56a2bb922f23963d9e7c7076ee5:0">+
</a>
</span></p>
<h2 id="appendix-the-bulk-load-data-ingestion-performance-test">Appendix: the bulk load data ingestion performance test</h2>
<p class="lf-text-block lf-block" data-lf-anchor-id="8d816dcbef9b46fb2bcb880365070cd7:0">This appendix describes the performance test performed against the Elasticsearch cluster. The tests were run by using JMeter running on a separate set of VMs. Details the configuration of the test environment are described in <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-creating-performance-testing-environment">Creating a performance testing environment for Elasticsearch on Azure</a>. To perform your own testing, you can create your own JMeter test plan manually, or you can use the automated test scripts available separately. See <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-running-automated-performance-tests">Running the automated Elasticsearch performance tests</a> for further information.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8d816dcbef9b46fb2bcb880365070cd7:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8ff52d69ddbd249ab3c09cc3694142d5:0">The data ingestion workload performed a large-scale upload of documents by using the bulk insert API. The purpose of this index was to simulate a repository receiving log data representing system events for subsequent search and analysis. Each document was stored in a single index named <em>systembase</em>, and had the type <em>logs</em>. All documents had the same fixed schema described by the following table:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8ff52d69ddbd249ab3c09cc3694142d5:0">+
</a>
</span></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Datatype</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>@timestamp</td>
<td>datetime</td>
<td>2013-12-11T08:01:45.000Z</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>checkout.payment</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>Incoming request message</td>
</tr>
<tr>
<td>severityCode</td>
<td>integer</td>
<td>1</td>
</tr>
<tr>
<td>severity</td>
<td>string</td>
<td>info</td>
</tr>
<tr>
<td>hostname</td>
<td>string</td>
<td>sixshot</td>
</tr>
<tr>
<td>hostip</td>
<td>string (ip address)</td>
<td>10.0.0.4</td>
</tr>
<tr>
<td>pid</td>
<td>int</td>
<td>123</td>
</tr>
<tr>
<td>tid</td>
<td>int</td>
<td>4325</td>
</tr>
<tr>
<td>appId</td>
<td>string (uuid)</td>
<td>{00000000-0000-0000-000000000000}</td>
</tr>
<tr>
<td>appName</td>
<td>string</td>
<td>mytestapp</td>
</tr>
<tr>
<td>appVersion</td>
<td>string</td>
<td>0.1.0.1234</td>
</tr>
<tr>
<td>type</td>
<td>int</td>
<td>5</td>
</tr>
<tr>
<td>subtype</td>
<td>int</td>
<td>1</td>
</tr>
<tr>
<td>correlationId</td>
<td>guid</td>
<td>{00000000-0000-0000-000000000000}</td>
</tr>
<tr>
<td>os</td>
<td>string</td>
<td>Linux</td>
</tr>
<tr>
<td>osVersion</td>
<td>string</td>
<td>4.1.1</td>
</tr>
<tr>
<td>parameters</td>
<td>[ ]</td>
<td>{key:value,key:value}</td>
</tr>
</tbody>
</table>
<p class="lf-text-block lf-block" data-lf-anchor-id="8fdc2d4fffb822793989b84547064357:0">You can use the following request to create the index. The <em>number_of_replicas</em>, <em>refresh_interval</em>, and <em>number_of_shards</em> settings varied from the values shown below in many of the tests.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8fdc2d4fffb822793989b84547064357:0">+
</a>
</span></p>
<div class="IMPORTANT alert"><h5>Important</h5><p class="lf-text-block lf-block" data-lf-anchor-id="83f168654c3770b16b8c0fc77f675e74:0">The index was dropped and recreated prior to each test run.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="83f168654c3770b16b8c0fc77f675e74:0">+
</a>
</span></p>
</div>
<div class="codeHeader lang-http"><div class="copyBtn">Copy</div><div class="labelHolder">http</div></div><pre><code class="lang-http"><span class="hljs-attribute">PUT /systembase
{
    "settings" </span>: {
        "<span class="hljs-attribute">number_of_replicas"</span>: 1,
        "<span class="hljs-attribute">refresh_interval"</span>: "30s",
        "<span class="hljs-attribute">number_of_shards"</span>: "5"
    },
    "<span class="hljs-attribute">logs" </span>: {
        "<span class="hljs-attribute">properties" </span>: {
            "@<span class="hljs-attribute">timestamp"</span>: {
            "<span class="hljs-attribute">type"</span>: "date",
            "<span class="hljs-attribute">index" </span>: "not_analyzed"
            },
            "<span class="hljs-attribute">name"</span>: {
                "<span class="hljs-attribute">type"</span>: "string",
                "<span class="hljs-attribute">index" </span>: "not_analyzed"
            },
            "<span class="hljs-attribute">message"</span>: {
                "<span class="hljs-attribute">type"</span>: "string",
                "<span class="hljs-attribute">index" </span>: "not_analyzed"
            },
            "<span class="hljs-attribute">severityCode"</span>: {
                "<span class="hljs-attribute">type"</span>: "integer",
                "<span class="hljs-attribute">index" </span>: "not_analyzed"
            },
            "<span class="hljs-attribute">severity"</span>: {
                "<span class="hljs-attribute">type"</span>: "string",
                "<span class="hljs-attribute">index" </span>: "not_analyzed"
            },
            "<span class="hljs-attribute">hostname"</span>: {
                "<span class="hljs-attribute">type"</span>: "string",
                "<span class="hljs-attribute">index" </span>: "not_analyzed"
            },
            "<span class="hljs-attribute">hostip"</span>: {
                "<span class="hljs-attribute">type"</span>: "string",
                "<span class="hljs-attribute">index" </span>: "not_analyzed"
            },
            "<span class="hljs-attribute">pid"</span>: {
                "<span class="hljs-attribute">type"</span>: "integer",
                "<span class="hljs-attribute">index" </span>: "not_analyzed"
            },
            "<span class="hljs-attribute">tid"</span>: {
                "<span class="hljs-attribute">type"</span>: "integer",
                "<span class="hljs-attribute">index" </span>: "not_analyzed"
            },
            "<span class="hljs-attribute">appId"</span>: {
                "<span class="hljs-attribute">type"</span>: "string",
                "<span class="hljs-attribute">index" </span>: "not_analyzed"
            },
            "<span class="hljs-attribute">appName"</span>: {
                "<span class="hljs-attribute">type"</span>: "string",
                "<span class="hljs-attribute">index" </span>: "not_analyzed"
            },
            "<span class="hljs-attribute">appVersion"</span>: {
                "<span class="hljs-attribute">type"</span>: "integer",
                "<span class="hljs-attribute">index" </span>: "not_analyzed"
            },
            "<span class="hljs-attribute">type"</span>: {
                "<span class="hljs-attribute">type"</span>: "integer",
                "<span class="hljs-attribute">index" </span>: "not_analyzed"
            },
            "<span class="hljs-attribute">subtype"</span>: {
                "<span class="hljs-attribute">type"</span>: "integer",
                "<span class="hljs-attribute">index" </span>: "not_analyzed"
            },
            "<span class="hljs-attribute">correlationId"</span>: {
                "<span class="hljs-attribute">type"</span>: "string",
                "<span class="hljs-attribute">index" </span>: "not_analyzed"
            },
            "<span class="hljs-attribute">os"</span>: {
                "<span class="hljs-attribute">type"</span>: "string",
                "<span class="hljs-attribute">index" </span>: "not_analyzed"
            },
            "<span class="hljs-attribute">osVersion"</span>: {
                "<span class="hljs-attribute">type"</span>: "string",
                "<span class="hljs-attribute">index" </span>: "not_analyzed"
            },
            "<span class="hljs-attribute">parameters"</span>: {
                "<span class="hljs-attribute">type"</span>: "string",     
                "<span class="hljs-attribute">index" </span>: "not_analyzed"
            }
        }
    }
}
</code></pre><p class="lf-text-block lf-block" data-lf-anchor-id="85fc3d61d938248d3b89b84349234271:0">Each bulk insert batch contained 1000 documents. Each document was generated based on a combination of random values for the <em>severityCode</em>, <em>hostname</em>, <em>hostip</em>, <em>pid</em>, <em>tid</em>, <em>appName</em>, <em>appVersion</em>, <em>type</em>, <em>subtype</em>, and <em>correlationId</em> fields, and a random selection of text from a fixed set of terms for the <em>name</em>, <em>message</em>, <em>severity</em>, <em>os</em>, <em>osVersion</em>, <em>parameters</em>, <em>data1</em>, and <em>data2</em> fields. The number of client application instances used to upload data was carefully selected to maximize successful input volume. Tests ran for two hours to enable the cluster to settle and reduce the influence of any temporary glitches in the overall results. In this time, some tests uploaded nearly 1.5 billion documents.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="85fc3d61d938248d3b89b84349234271:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="0bd76f8d44b9a62291c888c36b076ec7:0">The data was generated dynamically by using a custom JUnit request sampler that was added to a thread group in a JMeter test plan. The JUnit code was created by using the JUnit test case template in the Eclipse IDE.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="0bd76f8d44b9a62291c888c36b076ec7:0">+
</a>
</span></p>
<div class="NOTE alert"><h5>Note</h5><p class="lf-text-block lf-block" data-lf-anchor-id="5dcf6fa325bac2758ce191b64f24546c:0">For information on how to create a JUnit test for JMeter, see <a href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-deploying-jmeter-junit-sampler">Deploying a JMeter JUnit sampler for testing Elasticsearch performance</a>.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="5dcf6fa325bac2758ce191b64f24546c:0">+
</a>
</span></p>
</div>
<p class="lf-text-block lf-block" data-lf-anchor-id="8ad76cee4dba62f30a39d84b670a2fd3:0">The following snippet shows the Java code for testing Elasticsearch 1.7.3. Note that the JUnit test class in this example is named <em>ElasticsearchLoadTest2</em>:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8ad76cee4dba62f30a39d84b670a2fd3:0">+
</a>
</span></p>
<div class="codeHeader lang-java"><div class="copyBtn">Copy</div><div class="labelHolder">Java</div></div><pre><code class="lang-java"><span class="hljs-comment">/* Java */</span>
<span class="hljs-keyword">package</span> elasticsearchtest2;

    <span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.junit.Assert.*;

    <span class="hljs-keyword">import</span> org.junit.*;

    <span class="hljs-keyword">import</span> java.util.*;

    <span class="hljs-keyword">import</span> java.io.*;

    <span class="hljs-keyword">import</span> org.elasticsearch.action.bulk.*;
    <span class="hljs-keyword">import</span> org.elasticsearch.common.transport.*;
    <span class="hljs-keyword">import</span> org.elasticsearch.client.transport.*;
    <span class="hljs-keyword">import</span> org.elasticsearch.common.settings.*;
    <span class="hljs-keyword">import</span> org.elasticsearch.common.xcontent.*;

    <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ElasticsearchLoadTest2</span> </span>{

        <span class="hljs-keyword">private</span> String [] names={<span class="hljs-string">"checkout"</span>,<span class="hljs-string">"order"</span>,<span class="hljs-string">"search"</span>,<span class="hljs-string">"payment"</span>};
        <span class="hljs-keyword">private</span> String [] messages={<span class="hljs-string">"Incoming request from code"</span>,<span class="hljs-string">"incoming operation succeeded with code"</span>,<span class="hljs-string">"Operation completed time"</span>,<span class="hljs-string">"transaction performed"</span>};
        <span class="hljs-keyword">private</span> String [] severity={<span class="hljs-string">"info"</span>,<span class="hljs-string">"warning"</span>,<span class="hljs-string">"transaction"</span>,<span class="hljs-string">"verbose"</span>};
        <span class="hljs-keyword">private</span> String [] apps={<span class="hljs-string">"4D24BD62-20BF-4D74-B6DC-31313ABADB82"</span>,<span class="hljs-string">"5D24BD62-20BF-4D74-B6DC-31313ABADB82"</span>,<span class="hljs-string">"6D24BD62-20BF-4D74-B6DC-31313ABADB82"</span>,<span class="hljs-string">"7D24BD62-20BF-4D74-B6DC-31313ABADB82"</span>};

        <span class="hljs-keyword">private</span> String hostname = <span class="hljs-string">""</span>;
        <span class="hljs-keyword">private</span> String indexstr = <span class="hljs-string">""</span>;
        <span class="hljs-keyword">private</span> String typestr = <span class="hljs-string">""</span>;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> port = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> itemsPerInsert = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">private</span> String clustername = <span class="hljs-string">""</span>;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Random rand=<span class="hljs-keyword">new</span> Random();

        <span class="hljs-meta">@Before</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUp</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ElasticsearchLoadTest2</span><span class="hljs-params">(String paras)</span> </span>{
        \* Paras is a string containing a set of comma separated values <span class="hljs-keyword">for</span>:
            hostname
            indexstr
            typestr
            port
            clustername
            node
            itemsPerInsert
        */

            <span class="hljs-comment">// Note: No checking/validation is performed</span>

            String delims = <span class="hljs-string">"[ ]*,[ ]*"</span>; <span class="hljs-comment">// comma surrounded by zero or more spaces</span>
            String[] items = paras.split(delims);

            hostname = items[<span class="hljs-number">0</span>];
            indexstr = items[<span class="hljs-number">1</span>];
            typestr = items[<span class="hljs-number">2</span>];
            port = Integer.parseInt(items[<span class="hljs-number">3</span>]);
            clustername = items[<span class="hljs-number">4</span>];
            itemsPerInsert = Integer.parseInt(items[<span class="hljs-number">5</span>]);

            <span class="hljs-keyword">if</span> (itemsPerInsert == <span class="hljs-number">0</span>)
                itemsPerInsert = <span class="hljs-number">1000</span>;
            }

        <span class="hljs-meta">@After</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">tearDown</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
        }

        <span class="hljs-meta">@Test</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">BulkBigInsertTest</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>{

            Settings settings = ImmutableSettings.settingsBuilder().put(<span class="hljs-string">"cluster.name"</span>, clustername).build();

            TransportClient client;
            client = <span class="hljs-keyword">new</span> TransportClient(settings);

            <span class="hljs-keyword">try</span> {
                client.addTransportAddress(<span class="hljs-keyword">new</span> InetSocketTransportAddress(hostname, port));
                BulkRequestBuilder bulkRequest = client.prepareBulk();
                Random random = <span class="hljs-keyword">new</span> Random();
                <span class="hljs-keyword">char</span>[] exmarks = <span class="hljs-keyword">new</span> <span class="hljs-keyword">char</span>[<span class="hljs-number">12000</span>];
                Arrays.fill(exmarks, <span class="hljs-string">'x'</span>);
                String dataString = <span class="hljs-keyword">new</span> String(exmarks);

                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">1</span>; i &amp;lt; itemsPerInsert; i++){
                    random.nextInt(<span class="hljs-number">10</span>);
                    <span class="hljs-keyword">int</span> host=random.nextInt(<span class="hljs-number">20</span>);

                    bulkRequest.add(client.prepareIndex(indexstr, typestr).setSource(XContentFactory.jsonBuilder().startObject()
                        .field(<span class="hljs-string">"@timestamp"</span>, <span class="hljs-keyword">new</span> Date())
                        .field(<span class="hljs-string">"name"</span>, names[random.nextInt(names.length)])
                        .field(<span class="hljs-string">"message"</span>, messages[random.nextInt(messages.length)])
                        .field(<span class="hljs-string">"severityCode"</span>, random.nextInt(<span class="hljs-number">10</span>))
                        .field(<span class="hljs-string">"severity"</span>, severity[random.nextInt(severity.length)])
                        .field(<span class="hljs-string">"hostname"</span>, <span class="hljs-string">"Hostname"</span>+host)
                        .field(<span class="hljs-string">"hostip"</span>, <span class="hljs-string">"10.1.0."</span>+host)
                        .field(<span class="hljs-string">"pid"</span>,random.nextInt(<span class="hljs-number">10</span>))
                        .field(<span class="hljs-string">"tid"</span>,random.nextInt(<span class="hljs-number">10</span>))
                        .field(<span class="hljs-string">"appId"</span>, apps[random.nextInt(apps.length)])
                        .field(<span class="hljs-string">"appName"</span>, <span class="hljs-string">"application"</span> + host)
                        .field(<span class="hljs-string">"appVersion"</span>, random.nextInt(<span class="hljs-number">5</span>))
                        .field(<span class="hljs-string">"type"</span>, random.nextInt(<span class="hljs-number">6</span>))
                        .field(<span class="hljs-string">"subtype"</span>, random.nextInt(<span class="hljs-number">6</span>))
                        .field(<span class="hljs-string">"correlationId"</span>, UUID.randomUUID().toString())
                        .field(<span class="hljs-string">"os"</span>, <span class="hljs-string">"linux"</span>)
                        .field(<span class="hljs-string">"osVersion"</span>, <span class="hljs-string">"14.1.5"</span>)
                        .field(<span class="hljs-string">"parameters"</span>, <span class="hljs-string">"{key:value,key:value}"</span>)
                        .field(<span class="hljs-string">"data1"</span>,dataString)
                        .field(<span class="hljs-string">"data2"</span>,dataString)
                    .endObject()));
                }

                BulkResponse bulkResponse = bulkRequest.execute().actionGet();
                assertFalse(bulkResponse.hasFailures());
            }
            <span class="hljs-keyword">finally</span> {
                client.close();
            }
        }

        <span class="hljs-meta">@Test</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">BulkDataInsertTest</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>{
            Settings settings = ImmutableSettings.settingsBuilder().put(<span class="hljs-string">"cluster.name"</span>, clustername).build();

            TransportClient client;
            client = <span class="hljs-keyword">new</span> TransportClient(settings);

            <span class="hljs-keyword">try</span> {
                client.addTransportAddress(<span class="hljs-keyword">new</span> InetSocketTransportAddress(hostname, port));
                BulkRequestBuilder bulkRequest = client.prepareBulk();

                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">1</span>; i&amp;lt; itemsPerInsert; i++){
                    rand.nextInt(<span class="hljs-number">10</span>);
                    <span class="hljs-keyword">int</span> host=rand.nextInt(<span class="hljs-number">20</span>);

                    bulkRequest.add(client.prepareIndex(indexstr, typestr).setSource(XContentFactory.jsonBuilder().startObject()
                        .field(<span class="hljs-string">"@timestamp"</span>, <span class="hljs-keyword">new</span> Date())
                        .field(<span class="hljs-string">"name"</span>, names[rand.nextInt(names.length)])
                        .field(<span class="hljs-string">"message"</span>, messages[rand.nextInt(messages.length)])
                        .field(<span class="hljs-string">"severityCode"</span>, rand.nextInt(<span class="hljs-number">10</span>))
                        .field(<span class="hljs-string">"severity"</span>, severity[rand.nextInt(severity.length)])
                        .field(<span class="hljs-string">"hostname"</span>, <span class="hljs-string">"Hostname"</span> + host)
                        .field(<span class="hljs-string">"hostip"</span>, <span class="hljs-string">"10.1.0."</span>+host)
                        .field(<span class="hljs-string">"pid"</span>,rand.nextInt(<span class="hljs-number">10</span>))
                        .field(<span class="hljs-string">"tid"</span>,rand.nextInt(<span class="hljs-number">10</span>))
                        .field(<span class="hljs-string">"appId"</span>, apps[rand.nextInt(apps.length)])
                        .field(<span class="hljs-string">"appName"</span>, <span class="hljs-string">"application"</span>+host)
                        .field(<span class="hljs-string">"appVersion"</span>, rand.nextInt(<span class="hljs-number">5</span>))
                        .field(<span class="hljs-string">"type"</span>, rand.nextInt(<span class="hljs-number">6</span>))
                        .field(<span class="hljs-string">"subtype"</span>, rand.nextInt(<span class="hljs-number">6</span>))
                        .field(<span class="hljs-string">"correlationId"</span>, UUID.randomUUID().toString())
                        .field(<span class="hljs-string">"os"</span>, <span class="hljs-string">"linux"</span>)
                        .field(<span class="hljs-string">"osVersion"</span>, <span class="hljs-string">"14.1.5"</span>)
                        .field(<span class="hljs-string">"parameters"</span>, <span class="hljs-string">"{key:value,key:value}"</span>)
                    .endObject()));
                }

                BulkResponse bulkResponse = bulkRequest.execute().actionGet();
                assertFalse(bulkResponse.hasFailures());
            }
            <span class="hljs-keyword">finally</span> {
                client.close();
            }
        }
    }
</code></pre><p class="lf-text-block lf-block" data-lf-anchor-id="ed5df5e8c51d7e1e2c0888d25db36f4c:0">The private <em>String</em> arrays <em>names</em>, <em>messages</em>, <em>severity</em>, and <em>apps</em> contain a small set of values that items are selected from at random. The remaining data items for each document are generated at runtime.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="ed5df5e8c51d7e1e2c0888d25db36f4c:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="89d46d674d99a6532b09ac464c234ff7:0">The constructor that takes the <em>String</em> parameter is invoked from JMeter, and the values passed in the string are specified as part of the JUnit Request sampler configuration. For this JUnit test, the <em>String</em> parameter is expected to contain the following information:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="89d46d674d99a6532b09ac464c234ff7:0">+
</a>
</span></p>
<ul class="lf-text-block lf-block" data-lf-anchor-id="83847c294f9804bb21ccc8c747214b53:0">
<li><strong>Hostname</strong>. This is the name or IP address of the Azure load balancer. The load balancer attempts to distribute the request across the data nodes in the cluster. If you are not using a load balancer you can specify the address of a node in the cluster, but all requests will be directed to that node and that might result in it becoming a bottleneck.</li>
<li><strong>Indexstr</strong>. This is the name of the index that the data generated by the JUnit test is added to. If you created the index as described above, this value should be <em>systembase</em>.</li>
<li><strong>Typestr</strong>. This is the type in the index where the data is stored. If you created the index as described above, this value should be <em>logs</em>.</li>
<li><strong>Port</strong>. This is the port to connect to on the host. In most cases this should be set to 9300 (the port used by Elasticsearch to listen for client API requests, port 9200 is only used for HTTP requests).</li>
<li><strong>Clustername</strong>. This is the name of the Elasticsearch cluster containing the index.</li>
<li><strong>ItemsPerInsert</strong>. This is a numeric parameter indicating the number of documents to add in each bulk insert batch. The default batch size is 1000.</li>
<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="83847c294f9804bb21ccc8c747214b53:0">+
</a>
</span></ul>
<p class="lf-text-block lf-block" data-lf-anchor-id="1bd4ac650fb8e6f919c9f86747024b5f:0">You specify the data for the constructor string in the JUnit Request page used to configure the JUnit sampler in JMeter. The following image shows an example:<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="1bd4ac650fb8e6f919c9f86747024b5f:0">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:21"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/data-ingestion-image22.png" alt=""><span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="d41d8cd98f00b204e9800998ecf8427e:21">+
</a>
</span></p>
<p class="lf-text-block lf-block" data-lf-anchor-id="8bd42cedd7b96ed03989e8474f234257:0">The <em>BulkInsertTest</em> and <em>BigBulkInsertTest</em> methods perform the actual work of generating and uploading the data. Both methods are very similar. They connect to the Elasticsearch cluster and then create a batch of documents (as determined by the <em>ItemsPerInsert</em> constructor string parameter). The documents are added to the index using the Elasticsearch Bulk API. The difference between the two methods is that the <em>data1</em> and <em>data2</em> string fields in each document are omitted from the upload in the <em>BulkInsertTest</em> method, but are filled in with strings of 12000 characters in the <em>BigBulkInsertTest</em> method. Note that you select which of these methods to run using the <em>Test Method</em> box in the JUnit Request page in JMeter (highlighted in the previous figure).<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="8bd42cedd7b96ed03989e8474f234257:0">+
</a>
</span></p>
<div class="NOTE alert"><h5>Note</h5><p class="lf-text-block lf-block" data-lf-anchor-id="cf856c0ccf9c62fb6e4fbbc36f037656:0">The sample code presented here uses the Elasticsearch 1.7.3 Transport Client library. If you are using Elasticsearch 2.0.0 or later, you must use the appropriate library for the version selected. For more information about the Elasticsearch 2.0.0 Transport Client library, see the <a href="https://www.elastic.co/guide/en/elasticsearch/client/java-api/2.0/transport-client.html">Transport Client</a> page on the Elasticsearch website.<span class="lf-thread-btn"><a class="fycon-action-view" tabindex="0" data-lf-anchor-id="cf856c0ccf9c62fb6e4fbbc36f037656:0">+
</a>
</span></p>
</div>
</div></div>

          

          <div id="comments-container" role="form"><div class="fyre fyre-width-medium"><div class="fyre-widget "><div class="fyre-featured-content-wrapper" style="display: none"></div><div class="fyre-stream-stats"><div class="fyre-comment-count"><span>0 comments</span></div><div class="fyre-help"><div class="fyre-box-wrapper"><a class="fyre-logo-link" href="http://livefyre.com/" target="_blank"><img class="fyre-logo-drop" src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/down_arrow.png" alt="Down arrow"><img class="fyre-logo-help" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" alt="Livefyre"></a><ul class="fyre-box-list"><li><a href="http://livefyre.com/" target="_blank" title="Get Livefyre">Get Livefyre</a></li><li><a href="http://support.livefyre.com/" target="_blank" title="FAQ">FAQ</a></li></ul></div></div></div><div class="fyre-auth"><div class="fyre-login-bar"><a rel="nofollow" class="fyre-user-loggedout">Sign in</a></div><div class="fyre-live-container"><div class="fyre-livecount"><em class="fyre-stream-livecount">0 people listening</em></div><div class="fyre-listener-avatars"></div></div></div><div class="fyre-editor"><div class="fyre-editor-container fyre-editor-container-focus"><div class="fyre-editor-editable editable fyre-editor-field" id="fyre-editor-3" g_editable="true" role="textbox" contenteditable="true"><p>&nbsp;</p></div><span class="fyre-editor-spinner" style="display: none;"></span><div class="fyre-editor-preview"></div><div class="fyre-editor-media-drawer" style="display: none;"></div><div class="fyre-editor-toolbar"><div class="fyre-mention-menu fyre-mention-menu-vertical" role="menu" aria-haspopup="true" style="user-select: none; display: none;"><div class="fyre-mention-menu-filter" style="user-select: none;"><div style="user-select: none;"></div><input type="text" aria-autocomplete="list" aria-owns=":h.content-el" aria-expanded="true" tabindex="-1" style="user-select: none;"></div><div class="fyre-mention-menu-content" id=":h.content-el" style="user-select: none;"><div class="goog-control goog-control-disabled" aria-disabled="true" id=":e" style="user-select: none;"></div><div class="goog-control goog-control-disabled" aria-disabled="true" id=":f" style="user-select: none;"></div><div class="goog-control goog-control-disabled" aria-disabled="true" id=":g" style="user-select: none;"></div><div class="fyre-mention-item fyre-mention-item-twitter" aria-hidden="true" id=":i" style="user-select: none; display: none;"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/50.jpg" class="fyre-mention-item-avatar"><h4 class="fyre-mention-item-display-name"></h4><span class="fyre-mention-item-twitter"></span></div><div class="fyre-mention-item fyre-mention-item-livefyre" aria-hidden="true" id=":j" style="user-select: none; display: none;"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/50.jpg" class="fyre-mention-item-avatar"><h4 class="fyre-mention-item-display-name"></h4><span class="fyre-mention-item-livefyre"></span></div></div></div><div class="goog-toolbar goog-toolbar-horizontal" role="toolbar" style="user-select: none;"><div class="goog-toolbar-separator goog-inline-block" role="separator" id=":b" style="user-select: none;">&nbsp;</div><div class="goog-inline-block fyre-button-left fyre-format-button" role="button" id=":d" style="user-select: none;"><div class="goog-inline-block fyre-button-left-outer-box"><div class="goog-inline-block fyre-button-left-inner-box"></div></div></div><div class="goog-inline-block fyre-button-left fyre-mention-button" role="button" id=":l" style="user-select: none;"><div class="goog-inline-block fyre-button-left-outer-box"><div class="goog-inline-block fyre-button-left-inner-box"></div></div></div><div class="goog-inline-block fyre-button-left fyre-embed-button" role="button" id=":n" aria-hidden="true" style="user-select: none; display: none;"><div class="goog-inline-block fyre-button-left-outer-box"><div class="goog-inline-block fyre-button-left-inner-box"></div></div></div><div class="goog-inline-block fyre-button-left fyre-raw-button" role="button" id=":p" style="user-select: none; display: none;"><div class="goog-inline-block fyre-button-left-outer-box"><div class="goog-inline-block fyre-button-left-inner-box"></div></div></div><div class="goog-inline-block fyre-button-left fyre-follow-button" role="button" id=":r" style="user-select: none;"><div class="goog-inline-block fyre-button-left-outer-box"><div class="goog-inline-block fyre-button-left-inner-box">+ Follow</div></div></div><div class="goog-inline-block fyre-button-right fyre-share-button" role="button" id=":t" style="user-select: none;"><div class="goog-inline-block fyre-button-right-outer-box"><div class="goog-inline-block fyre-button-right-inner-box">Share<label class="fyre-share-counter fyre-share-empty"></label></div></div></div><div class="goog-inline-block fyre-button-right fyre-post-button fyre-post-button-new" role="button" id=":v" style="user-select: none;"><div class="goog-inline-block fyre-button-right-outer-box"><div class="goog-inline-block fyre-button-right-inner-box">Post comment as...</div></div></div></div></div></div><div class="fyre-comment-preview" style="display: none;"><h5>Custom HTML Preview<span class="fyre-icon-remove"></span></h5><div class="fyre-roundedpanel-content fyre-comment-preview-content"><article class="fyre-comment-article"><div class="fyre-comment"><div class="fyre-comment-raw-html"></div></div></article></div></div></div><div class="fyre-input-box-collapsed"></div><div class="fyre-stream-header"><div class="fyre-content-loading" style="display: none;">Loading</div><div class="fyre-stream-sort"><div class="fyre-stream-sort-options"><a class="fyre-stream-sort-newest fyre-stream-sort-selected">Newest</a><span class="fyre-stream-sort-bar"> | </span><a class="fyre-stream-sort-oldest">Oldest</a></div><a class="fyre-stream-sort-back"></a></div></div><div class="fyre-comment-stream"><div class="fyre-stream-content"></div><div class="fyre-stream-content-not-found"></div><div class="fyre-stream-more" style="display: none;"><div class="fyre-stream-more-container"><div class="fyre-text">Show More Comments</div><div class="fyre-spinner"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/snake-loader.gif" alt=""></div></div></div></div><div class="fyre-top-content-stream"></div><div class="fyre-thread-breakout-stream"></div><div class="fyre-stream-menu-container"></div></div></div></div>
        </div>
      </div>

      <div id="openFeedbackContainer" class="openfeedback-container or-t-ml or-pc" role="complementary" style="z-index: 1000;"><div class="or-c-pf or-o" style="opacity: 1;"><div class="or-lw or-o or-c"><div class="or-c-v or-o"><h3 class="or-t or-o">Is this page helpful?</h3><table class="or-lw or-o"><tbody class="or-so"><tr class="or-so"><td class="or-so"><button type="button" role="button" aria-label="Yes, this page is helpful." class="or-b or-o or-f"><span class="or-t or-o or-so or-c">Yes</span></button></td><td class="or-so"><button type="button" role="button" aria-label="No, this page is not helpful." class="or-b or-o or-f"><span class="or-t or-o or-so or-c">No</span></button></td></tr></tbody></table></div></div><button type="button" role="button" aria-label="Close feedback" class="or-a or-o or-f"><span class="or-g or-o or-so or-c"><svg xmlns="http://www.w3.org/2000/svg" focusable="false" class="or-so" viewBox="0 0 20 20"><path d="M6 6L14 14M14 6L6 14"></path></svg></span></button></div></div>

    </main>

    <footer id="footer" ms.pgarea="footer" class="footer-layout">
  <div class="container" role="contentinfo">

    <select id="locale-picker" aria-label="Change Page Language"><option data-id="cs-cz" dir="ltr">Čeština</option><option data-id="de-de" dir="ltr">Deutsch</option><option data-id="en-us" selected="" dir="ltr">English</option><option data-id="es-es" dir="ltr">Español</option><option data-id="fr-fr" dir="ltr">Français</option><option data-id="hu-hu" dir="ltr">Magyar</option><option data-id="it-it" dir="ltr">Italiano</option><option data-id="ja-jp" dir="ltr">日本語</option><option data-id="ko-kr" dir="ltr">한국어</option><option data-id="nl-nl" dir="ltr">Nederlands</option><option data-id="pl-pl" dir="ltr">Polski</option><option data-id="pt-br" dir="ltr">Português (Brasil)</option><option data-id="pt-pt" dir="ltr">Português (Portugal)</option><option data-id="ru-ru" dir="ltr">Pусский</option><option data-id="sv-se" dir="ltr">Svenska</option><option data-id="tr-tr" dir="ltr">Türkçe</option><option data-id="zh-cn" dir="ltr">中文 (简体)</option><option data-id="zh-tw" dir="ltr">中文 (繁體)</option></select>
    
    <ul class="links" ms.cmpgrp="footer link">
      <li><a id="footer-about-link" href="https://docs.microsoft.com/teamblog">Blog</a></li>
      <li><a id="footer-privacy-link" href="https://privacy.microsoft.com/en-us/">Privacy &amp; Cookies</a></li>
      <li><a id="footer-term-of-use" href="https://docs.microsoft.com/en-us/legal/termsofuse">Terms of Use</a></li>
      <li><a href="https://aka.ms/sitefeedback">Feedback</a></li>
      <li id="impressum-section"><a id="impressum-link" href="https://docs.microsoft.com/en-us/azure/guidance/guidance-elasticsearch-tuning-data-ingestion-performance#">Impressum</a></li>
      <li><a href="https://www.microsoft.com/en-us/legal/intellectualproperty/Trademarks/EN-US.aspx">Trademarks</a></li>
    </ul>
  </div>
</footer>

<!---->



    <script type="text/javascript" async="" id="smcx-sdk" src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/79yNbHm5_2Bc09cabC381UfD6Mz_2FuWCiepbBF6EB_2FT0Ea4MCk82Bh_2BApaijjR77BSR.js.下载"></script><script src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/e0ce3378843779296d07.conceptual.js.下载"></script>
  
<link rel="stylesheet" type="text/css" href="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/open-commenting.ui.v1.0.2-7-g1b78816.master.min.css"><link rel="stylesheet" type="text/css" href="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/open-commenting.ui.docs.v1.0.2-7-g1b78816.master.min.css"><img src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/c.gif" style="display: none;"><div id="__smcx__" style="display: none;"><iframe frameborder="0" id="smcx_frame" src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/saved_resource.html"></iframe><style class="smcx-style" type="text/css">.smcx-widget{display:block;margin:0;padding:0 !important;position:static;z-index:999997;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;font-weight:100;font-size:13px;line-height:13px;color:black;opacity:1;transform:translate3d(0,0,0);-webkit-transition:all 300ms ease 0;-moz-transition:all 300ms ease 0;-ms-transition:all 300ms ease 0;-o-transition:all 300ms ease 0;transition:all 300ms ease 0}.smcx-widget,.smcx-widget *{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.smcx-widget-footer{position:relative;width:100%;height:35px;margin:0;padding:0 10px}.smcx-widget-footer>.smcx-branding{display:block;position:absolute;top:0;right:10px;width:300px;height:35px;line-height:35px;background-position:right 3px;background-attachment:scroll;background-repeat:no-repeat;cursor:pointer}.smcx-widget-footer>.smcx-branding>.smcx-powered-by{position:absolute;top:0;right:146px;height:35px;margin:0;padding:0;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;font-size:11px;font-weight:normal;line-height:35px;text-align:right}.smcx-embed{position:static !important;width:470px;height:295px;overflow:hidden;border:1px solid #ccc;background-color:#FFF;-webkit-border-top-left-radius:0;-webkit-border-top-right-radius:0;-webkit-border-bottom-right-radius:3px;-webkit-border-bottom-left-radius:3px;-moz-border-radius-topleft:0;-moz-border-radius-topright:0;-moz-border-radius-bottomright:3px;-moz-border-radius-bottomleft:3px;border-top-left-radius:0;border-top-right-radius:0;border-bottom-right-radius:3px;border-bottom-left-radius:3px}.smcx-embed-footer{-webkit-border-top-left-radius:0;-webkit-border-top-right-radius:0;-webkit-border-bottom-right-radius:3px;-webkit-border-bottom-left-radius:3px;-moz-border-radius-topleft:0;-moz-border-radius-topright:0;-moz-border-radius-bottomright:3px;-moz-border-radius-bottomleft:3px;border-top-left-radius:0;border-top-right-radius:0;border-bottom-right-radius:3px;border-bottom-left-radius:3px}.smcx-modal{position:fixed !important;width:470px;height:295px;left:50%;top:50%;margin:-147.5px 0 0 -235px;padding:0;background:#b7d12f;background:-webkit-gradient(linear,left top,left bottom,from(#bcd732),to(#b2cb2c));background:-moz-linear-gradient(center top,#bcd732 0,#b2cb2c 100%);background:-moz-gradient(center top,#bcd732 0,#b2cb2c 100%);border-radius:5px}.smcx-modal-header{position:relative;width:100%;height:35px;margin:0;padding:0 10px}.smcx-modal-header>.smcx-modal-title{height:35px;line-height:35px;margin:0;padding:0;font-size:14px;font-weight:bold;color:#fff}.smcx-modal-content{position:relative;height:250px;margin:0;padding:20px;background:white;-webkit-background-clip:padding-box;-moz-background-clip:padding-box;-webkit-border-radius:3px;-moz-border-radius:3px;-ms-border-radius:3px;border-radius:3px;background-clip:padding-box;overflow:none}.smcx-modal-content>.smcx-modal-h1{margin:20px 0 15px 0;padding:0;color:#000;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;font-size:28px;font-weight:normal;line-height:28px;text-align:center;word-wrap:break-word}.smcx-modal-content>.smcx-modal-p{color:#333;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;font-size:14px;font-weight:normal;line-height:18px;text-align:center;word-wrap:break-word}.smcx-iframe-container{height:100%;overflow:hidden;margin:0 !important}.smcx-modal-actions{position:absolute;bottom:10px;left:0;width:100%;height:57px;padding:10px 20px}.smcx-modal-close{position:absolute;top:10px;right:10px;width:16px;height:16px;background:#e8e8e8 url("https://assets01.surveymonkey.com/collect/website/assets/images/icons/x.17fb9d7c7a2271cce0389ff14196bd9638482c9f.png") 2px 2px scroll no-repeat;cursor:pointer;-webkit-background-clip:padding-box;-moz-background-clip:padding-box;-webkit-border-radius:3px;-moz-border-radius:3px;-ms-border-radius:3px;border-radius:3px;background-clip:padding-box;-webkit-transition:background-color 300ms ease 0;-moz-transition:background-color 300ms ease 0;-ms-transition:background-color 300ms ease 0;-o-transition:background-color 300ms ease 0;transition:background-color 300ms ease 0}.smcx-modal-close:hover{background-color:#c8c8c8}.smcx-modal-invitation>.smcx-modal-content{margin:10px 10px 0 10px}.smcx-modal-survey>.smcx-modal-content{margin:0 10px;padding:0}.smcx-btn{display:inline-block;margin-bottom:0;font-weight:bold;text-align:center;vertical-align:middle;cursor:pointer;background-image:none;border:1px solid transparent;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:8px 14px;font-size:14px;line-height:1.42857;-webkit-background-clip:padding-box;-moz-background-clip:padding-box;-webkit-border-radius:3px;-moz-border-radius:3px;-ms-border-radius:3px;border-radius:3px;background-clip:padding-box}.smcx-btn,.smcx-btn:hover{text-decoration:none}.smcx-btn-secondary{color:#333;background:#f0f0f0;background:-webkit-gradient(linear,left top,left bottom,from(#f8f8f8),to(#e8e8e8));background:-moz-linear-gradient(center top,#f8f8f8 0,#e8e8e8 100%);background:-moz-gradient(center top,#f8f8f8 0,#e8e8e8 100%);border:0;-webkit-background-clip:padding-box;-moz-background-clip:padding-box;-webkit-border-radius:3px;-moz-border-radius:3px;-ms-border-radius:3px;border-radius:3px;background-clip:padding-box}.smcx-btn-secondary:hover{color:#333}.smcx-btn-primary{color:#FFF;background:#a2be36;background:-webkit-gradient(linear,left top,left bottom,from(#bed830),to(#86a33b));background:-moz-linear-gradient(center top,#bed830 0,#86a33b 100%);background:-moz-gradient(center top,#bed830 0,#86a33b 100%);border:0}.smcx-btn-primary:hover{color:#FFF;background:#aec944;background:-webkit-gradient(linear,left top,left bottom,from(#c5dc45),to(#97b642));background:-moz-linear-gradient(center top,#c5dc45 0,#97b642 100%);background:-moz-gradient(center top,#c5dc45 0,#97b642 100%)}.smcx-widget-light .smcx-widget-footer>.smcx-branding{background-image:url("https://assets01.surveymonkey.com/collect/website/assets/images/sm/logos/sm-logo-grey-145x30.7cb24cf47ffed9bbe9e1a5b8cde1a920acd21727.png")}.smcx-widget-light .smcx-widget-footer>.smcx-branding>.smcx-powered-by{color:#60604a}.smcx-widget-dark .smcx-widget-footer>.smcx-branding{background-image:url("https://assets01.surveymonkey.com/collect/website/assets/images/sm/logos/sm-logo-white-145x30.10b782a3ba53e4e567b437f8bcd87e3b40fbff06.png")}.smcx-widget-dark .smcx-widget-footer>.smcx-branding>.smcx-powered-by{color:#FFF}.smcx-widget.smcx-hide-branding .smcx-embed-footer{display:none}.smcx-widget.smcx-hide-branding .smcx-modal-footer{height:10px}.smcx-widget.smcx-hide-branding .smcx-modal-footer>.smcx-branding{display:none}.smcx-show{display:block}.smcx-hide{display:none}.smcx-transparent{opacity:0 !important}.smcx-opaque{opacity:1 !important}.smcx-offscreen-top{top:-100px !important}.smcx-offscreen-bottom{bottom:-100px !important}.smcx-offscreen-left{left:-100px !important}.smcx-offscreen-right{right:-100px !important}.smcx-modal-offset-top{margin-top:-185px !important}.smcx-modal-offset-bottom{margin-top:-105px !important}.smcx-top{top:0}.smcx-bottom{bottom:0}.smcx-left{left:0}.smcx-right{right:0}.smcx-pull-left{float:left}.smcx-pull-right{float:right}</style><style class="smcx-style" type="text/css">.smcx-modal{width:98%;max-width:500px;height:300px;margin-left:-250px !important;margin-top:-150px !important;background:#706F65;}.smcx-modal>.smcx-modal-content{max-width:480px;height:255px;}@media (max-width: 500px){.smcx-modal{left:0 !important;margin-left:1% !important;}}.smcx-modal.smcx-hide-branding>.smcx-modal-content{height:280px;}.smcx-modal-actions>.smcx-btn-primary{background:#A7C23D;color:#FFF;}.smcx-modal-actions>.smcx-btn-secondary{background:#CCC;color:#FFF;}</style></div><script type="text/javascript" src="./Tuning data ingestion performance for Elasticsearch on Azure _ Microsoft Docs_files/open-rating.ui-v0.6.1-85-g59868b4.master.min.js.下载"></script><div id="fyre-messenger-1"></div><div class="lf"><div class="lf-popover lf-thread-popover"><div class="lf-thread-content lf-popover-content"></div>
<div class="lf-popover-arrow"></div>
</div></div></body></html>