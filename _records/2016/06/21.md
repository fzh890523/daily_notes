
# gohbase failover问题

## region move
之前测过，停掉region server和启动region server的话，能正常的failover。
代码里也能处理 RegionMovedException 异常。
```golang
javaRetryableExceptions = map[string]struct{}{
  "org.apache.hadoop.hbase.NotServingRegionException":         struct{}{},
  "org.apache.hadoop.hbase.exceptions.RegionMovedException":   struct{}{},
  "org.apache.hadoop.hbase.exceptions.RegionOpeningException": struct{}{},
}
```

## region split


## fixMeta
> #yonka# 可能会做重建导致

# lua cjson null的坑
对于字符串里的null，会转为 `userdata(NULL)` 而不是 nil，所以不能用 `o.a == nil` 来判断。
同时，到目前为止，还没找到在lua代码里创建 `userdata(NULL)` 的方式，只能 `o.a == nil or o.a == ngx.null` 或者 `o.a == nil or o.a == cjson.null`。

其中，`ngx.null`和`cjson.null`因为都是lightweight的NULL，所以应该是相等的。
但问题在于这样的话就依赖实现了，有点蛋疼。
